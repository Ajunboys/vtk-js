!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){(function(t){e.exports=t.SphereSource=n(1)}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(2),i=r(o),u=n(21),s=r(u),l=n(23),c=r(l),d=n(30),f=r(d),p=n(37),g=r(p),v=n(64),m=r(v),h=n(67),T=r(h),y=n(68),M=r(y),b=n(73),C=r(b),x=document.querySelector("body");x.innerHTML=C["default"];var A=document.querySelector(".renderwidow"),P=m["default"].newInstance();P.setBackground(.32,.34,.43);var O=T["default"].newInstance();O.addRenderer(P);var S=g["default"].newInstance();S.setContainer(A),O.addView(S);var E=M["default"].newInstance();E.setView(S);var I=i["default"].newInstance();P.addActor(I);var w=f["default"].newInstance();I.setMapper(w);var R=s["default"].newInstance();P.setActiveCamera(R),R.setFocalPoint(0,0,0),R.setPosition(0,0,4),R.setClippingRange(.1,50);var V=c["default"].newInstance();w.setInputConnection(V.getOutputPort()),E.initialize(),E.bindEvents(A,document),E.start(),["radius","thetaResolution","startTheta","endTheta","phiResolution","startPhi","endPhi"].forEach(function(e){document.querySelector("."+e).addEventListener("input",function(t){var n=Number(t.target.value);V.set(a({},e,n)),O.render()})})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkActor"),e.getActors=function(){return e},e.getIsOpaque=function(){if(t.forceOpaque)return!0;if(t.forceTranslucent)return!1;t.property||e.getProperty();var n=t.property.getOpacity()>=1;return n=n&&(!t.texture||!t.texture.isTranslucent()),n=n&&(!t.mapper||t.mapper.getIsOpaque())},e.hasTranslucentPolygonalGeometry=function(){return null!==t.mapper&&(null===t.property&&e.setProperty(e.makeProperty()),!e.getIsOpaque())},e.makeProperty=p["default"].newInstance,e.getProperty=function(){return null===t.property&&(t.property=e.makeProperty()),t.property},e.getBounds=function(){if(null===t.mapper)return t.bounds;var n=t.mapper.getBounds();if(!n||6!==n.length)return n;if(n[0]>n[1])return t.mapperBounds=n.concat(),t.bounds=[1,-1,1,-1,1,-1],t.boundsMTime.modified(),n;var r=function(e){return e[0].map(function(t,n){return e.map(function(e){return e[n]})})};return(!t.mapperBounds||!r([n,t.mapperBounds]).reduce(function(e,t){return e&&t[0]===t[1]},!0)||e.getMTime()>t.boundsMTime.getMTime())&&!function(){console.debug("Recomputing bounds..."),t.mapperBounds=n.map(function(e){return e});var r=[u.vec3.fromValues(n[1],n[3],n[5]),u.vec3.fromValues(n[1],n[2],n[5]),u.vec3.fromValues(n[0],n[2],n[5]),u.vec3.fromValues(n[0],n[3],n[5]),u.vec3.fromValues(n[1],n[3],n[4]),u.vec3.fromValues(n[1],n[2],n[4]),u.vec3.fromValues(n[0],n[2],n[4]),u.vec3.fromValues(n[0],n[3],n[4])];e.computeMatrix();var a=u.mat4.create();u.mat4.transpose(a,t.matrix),r.forEach(function(e){return u.vec3.transformMat4(e,e,a)}),t.bounds[0]=t.bounds[2]=t.bounds[4]=Number.MAX_VALUE,t.bounds[1]=t.bounds[3]=t.bounds[5]=-Number.MAX_VALUE,t.bounds=t.bounds.map(function(e,t){return t%2===0?r.reduce(function(e,n){return e>n[t/2]?n[t/2]:e},e):r.reduce(function(e,n){return e<n[(t-1)/2]?n[(t-1)/2]:e},e)}),t.boundsMTime.modified()}(),t.bounds},e.getMTime=function(){var e=t.mtime;if(null!==t.property){var n=t.property.getMTime();e=n>e?n:e}if(null!==t.backfaceProperty){var r=t.backfaceProperty.getMTime();e=r>e?r:e}return e},e.getRedrawMTime=function(){var e=t.mtime;if(null!==t.mapper){var n=t.mapper.getMTime();e=n>e?n:e,null!==t.mapper.getInput()&&(t.mapper.getInputAlgorithm().update(),n=t.mapper.getInput().getMTime(),e=n>e?n:e)}return e},e.getSupportsSelection=function(){return!!t.mapper&&t.mapper.getSupportsSelection()}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,g,n),d["default"].extend(e,t),t.boundsMTime={},l.obj(t.boundsMTime),l.set(e,t,["property"]),l.setGet(e,t,["backfaceProperty","forceOpaque","forceTranslucent","mapper"]),l.getArray(e,t,["bounds"],6),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=n(3),s=n(13),l=a(s),c=n(15),d=r(c),f=n(19),p=r(f),g={mapper:null,property:null,backfaceProperty:null,forceOpaque:!1,forceTranslucent:!1,bounds:[1,-1,1,-1,1,-1]},v=t.newInstance=l.newInstance(i);t["default"]={newInstance:v,extend:i}},function(e,t,n){t.glMatrix=n(4),t.mat2=n(5),t.mat2d=n(6),t.mat3=n(7),t.mat4=n(8),t.quat=n(9),t.vec2=n(12),t.vec3=n(10),t.vec4=n(11)},function(e,t){var n={};n.EPSILON=1e-6,n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random,n.setMatrixArrayType=function(e){GLMAT_ARRAY_TYPE=e};var r=Math.PI/180;n.toRadian=function(e){return e*r},e.exports=n},function(e,t,n){var r=n(4),a={};a.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},a.clone=function(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},a.transpose=function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},a.invert=function(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=n*o-a*r;return i?(i=1/i,e[0]=o*i,e[1]=-r*i,e[2]=-a*i,e[3]=n*i,e):null},a.adjoint=function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},a.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},a.multiply=function(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],u=n[0],s=n[1],l=n[2],c=n[3];return e[0]=r*u+o*s,e[1]=a*u+i*s,e[2]=r*l+o*c,e[3]=a*l+i*c,e},a.mul=a.multiply,a.rotate=function(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s+o*u,e[1]=a*s+i*u,e[2]=r*-u+o*s,e[3]=a*-u+i*s,e},a.scale=function(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],u=n[0],s=n[1];return e[0]=r*u,e[1]=a*u,e[2]=o*s,e[3]=i*s,e},a.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e},a.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},a.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},a.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},a.LDU=function(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]},e.exports=a},function(e,t,n){var r=n(4),a={};a.create=function(){var e=new r.ARRAY_TYPE(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},a.clone=function(e){var t=new r.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},a.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},a.invert=function(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=n*o-r*a;return s?(s=1/s,e[0]=o*s,e[1]=-r*s,e[2]=-a*s,e[3]=n*s,e[4]=(a*u-o*i)*s,e[5]=(r*i-n*u)*s,e):null},a.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},a.multiply=function(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],l=n[0],c=n[1],d=n[2],f=n[3],p=n[4],g=n[5];return e[0]=r*l+o*c,e[1]=a*l+i*c,e[2]=r*d+o*f,e[3]=a*d+i*f,e[4]=r*p+o*g+u,e[5]=a*p+i*g+s,e},a.mul=a.multiply,a.rotate=function(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],l=Math.sin(n),c=Math.cos(n);return e[0]=r*c+o*l,e[1]=a*c+i*l,e[2]=r*-l+o*c,e[3]=a*-l+i*c,e[4]=u,e[5]=s,e},a.scale=function(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],l=n[0],c=n[1];return e[0]=r*l,e[1]=a*l,e[2]=o*c,e[3]=i*c,e[4]=u,e[5]=s,e},a.translate=function(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],l=n[0],c=n[1];return e[0]=r,e[1]=a,e[2]=o,e[3]=i,e[4]=r*l+o*c+u,e[5]=a*l+i*c+s,e},a.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e},a.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},a.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},a.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},a.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},e.exports=a},function(e,t,n){var r=n(4),a={};a.create=function(){var e=new r.ARRAY_TYPE(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},a.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},a.clone=function(e){var t=new r.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},a.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},a.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],a=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=a}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},a.invert=function(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=t[6],l=t[7],c=t[8],d=c*i-u*l,f=-c*o+u*s,p=l*o-i*s,g=n*d+r*f+a*p;return g?(g=1/g,e[0]=d*g,e[1]=(-c*r+a*l)*g,e[2]=(u*r-a*i)*g,e[3]=f*g,e[4]=(c*n-a*s)*g,e[5]=(-u*n+a*o)*g,e[6]=p*g,e[7]=(-l*n+r*s)*g,e[8]=(i*n-r*o)*g,e):null},a.adjoint=function(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=t[6],l=t[7],c=t[8];return e[0]=i*c-u*l,e[1]=a*l-r*c,e[2]=r*u-a*i,e[3]=u*s-o*c,e[4]=n*c-a*s,e[5]=a*o-n*u,e[6]=o*l-i*s,e[7]=r*s-n*l,e[8]=n*i-r*o,e},a.determinant=function(e){var t=e[0],n=e[1],r=e[2],a=e[3],o=e[4],i=e[5],u=e[6],s=e[7],l=e[8];return t*(l*o-i*s)+n*(-l*a+i*u)+r*(s*a-o*u)},a.multiply=function(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],d=t[8],f=n[0],p=n[1],g=n[2],v=n[3],m=n[4],h=n[5],T=n[6],y=n[7],M=n[8];return e[0]=f*r+p*i+g*l,e[1]=f*a+p*u+g*c,e[2]=f*o+p*s+g*d,e[3]=v*r+m*i+h*l,e[4]=v*a+m*u+h*c,e[5]=v*o+m*s+h*d,e[6]=T*r+y*i+M*l,e[7]=T*a+y*u+M*c,e[8]=T*o+y*s+M*d,e},a.mul=a.multiply,a.translate=function(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],d=t[8],f=n[0],p=n[1];return e[0]=r,e[1]=a,e[2]=o,e[3]=i,e[4]=u,e[5]=s,e[6]=f*r+p*i+l,e[7]=f*a+p*u+c,e[8]=f*o+p*s+d,e},a.rotate=function(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],d=t[8],f=Math.sin(n),p=Math.cos(n);return e[0]=p*r+f*i,e[1]=p*a+f*u,e[2]=p*o+f*s,e[3]=p*i-f*r,e[4]=p*u-f*a,e[5]=p*s-f*o,e[6]=l,e[7]=c,e[8]=d,e},a.scale=function(e,t,n){var r=n[0],a=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=a*t[3],e[4]=a*t[4],e[5]=a*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},a.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},a.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},a.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},a.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},a.fromQuat=function(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=n+n,u=r+r,s=a+a,l=n*i,c=r*i,d=r*u,f=a*i,p=a*u,g=a*s,v=o*i,m=o*u,h=o*s;return e[0]=1-d-g,e[3]=c-h,e[6]=f+m,e[1]=c+h,e[4]=1-l-g,e[7]=p-v,e[2]=f-m,e[5]=p+v,e[8]=1-l-d,e},a.normalFromMat4=function(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=t[6],l=t[7],c=t[8],d=t[9],f=t[10],p=t[11],g=t[12],v=t[13],m=t[14],h=t[15],T=n*u-r*i,y=n*s-a*i,M=n*l-o*i,b=r*s-a*u,C=r*l-o*u,x=a*l-o*s,A=c*v-d*g,P=c*m-f*g,O=c*h-p*g,S=d*m-f*v,E=d*h-p*v,I=f*h-p*m,w=T*I-y*E+M*S+b*O-C*P+x*A;return w?(w=1/w,e[0]=(u*I-s*E+l*S)*w,e[1]=(s*O-i*I-l*P)*w,e[2]=(i*E-u*O+l*A)*w,e[3]=(a*E-r*I-o*S)*w,e[4]=(n*I-a*O+o*P)*w,e[5]=(r*O-n*E-o*A)*w,e[6]=(v*x-m*C+h*b)*w,e[7]=(m*M-g*x-h*y)*w,e[8]=(g*C-v*M+h*T)*w,e):null},a.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},a.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},e.exports=a},function(e,t,n){var r=n(4),a={};a.create=function(){var e=new r.ARRAY_TYPE(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},a.clone=function(e){var t=new r.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},a.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},a.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],a=t[3],o=t[6],i=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=a,e[13]=i,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},a.invert=function(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=t[6],l=t[7],c=t[8],d=t[9],f=t[10],p=t[11],g=t[12],v=t[13],m=t[14],h=t[15],T=n*u-r*i,y=n*s-a*i,M=n*l-o*i,b=r*s-a*u,C=r*l-o*u,x=a*l-o*s,A=c*v-d*g,P=c*m-f*g,O=c*h-p*g,S=d*m-f*v,E=d*h-p*v,I=f*h-p*m,w=T*I-y*E+M*S+b*O-C*P+x*A;return w?(w=1/w,e[0]=(u*I-s*E+l*S)*w,e[1]=(a*E-r*I-o*S)*w,e[2]=(v*x-m*C+h*b)*w,e[3]=(f*C-d*x-p*b)*w,e[4]=(s*O-i*I-l*P)*w,e[5]=(n*I-a*O+o*P)*w,e[6]=(m*M-g*x-h*y)*w,e[7]=(c*x-f*M+p*y)*w,e[8]=(i*E-u*O+l*A)*w,e[9]=(r*O-n*E-o*A)*w,e[10]=(g*C-v*M+h*T)*w,e[11]=(d*M-c*C-p*T)*w,e[12]=(u*P-i*S-s*A)*w,e[13]=(n*S-r*P+a*A)*w,e[14]=(v*y-g*b-m*T)*w,e[15]=(c*b-d*y+f*T)*w,e):null},a.adjoint=function(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=t[6],l=t[7],c=t[8],d=t[9],f=t[10],p=t[11],g=t[12],v=t[13],m=t[14],h=t[15];return e[0]=u*(f*h-p*m)-d*(s*h-l*m)+v*(s*p-l*f),e[1]=-(r*(f*h-p*m)-d*(a*h-o*m)+v*(a*p-o*f)),e[2]=r*(s*h-l*m)-u*(a*h-o*m)+v*(a*l-o*s),e[3]=-(r*(s*p-l*f)-u*(a*p-o*f)+d*(a*l-o*s)),e[4]=-(i*(f*h-p*m)-c*(s*h-l*m)+g*(s*p-l*f)),e[5]=n*(f*h-p*m)-c*(a*h-o*m)+g*(a*p-o*f),e[6]=-(n*(s*h-l*m)-i*(a*h-o*m)+g*(a*l-o*s)),e[7]=n*(s*p-l*f)-i*(a*p-o*f)+c*(a*l-o*s),e[8]=i*(d*h-p*v)-c*(u*h-l*v)+g*(u*p-l*d),e[9]=-(n*(d*h-p*v)-c*(r*h-o*v)+g*(r*p-o*d)),e[10]=n*(u*h-l*v)-i*(r*h-o*v)+g*(r*l-o*u),e[11]=-(n*(u*p-l*d)-i*(r*p-o*d)+c*(r*l-o*u)),e[12]=-(i*(d*m-f*v)-c*(u*m-s*v)+g*(u*f-s*d)),e[13]=n*(d*m-f*v)-c*(r*m-a*v)+g*(r*f-a*d),e[14]=-(n*(u*m-s*v)-i*(r*m-a*v)+g*(r*s-a*u)),e[15]=n*(u*f-s*d)-i*(r*f-a*d)+c*(r*s-a*u),e},a.determinant=function(e){var t=e[0],n=e[1],r=e[2],a=e[3],o=e[4],i=e[5],u=e[6],s=e[7],l=e[8],c=e[9],d=e[10],f=e[11],p=e[12],g=e[13],v=e[14],m=e[15],h=t*i-n*o,T=t*u-r*o,y=t*s-a*o,M=n*u-r*i,b=n*s-a*i,C=r*s-a*u,x=l*g-c*p,A=l*v-d*p,P=l*m-f*p,O=c*v-d*g,S=c*m-f*g,E=d*m-f*v;return h*E-T*S+y*O+M*P-b*A+C*x},a.multiply=function(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],d=t[8],f=t[9],p=t[10],g=t[11],v=t[12],m=t[13],h=t[14],T=t[15],y=n[0],M=n[1],b=n[2],C=n[3];return e[0]=y*r+M*u+b*d+C*v,e[1]=y*a+M*s+b*f+C*m,e[2]=y*o+M*l+b*p+C*h,e[3]=y*i+M*c+b*g+C*T,y=n[4],M=n[5],b=n[6],C=n[7],e[4]=y*r+M*u+b*d+C*v,e[5]=y*a+M*s+b*f+C*m,e[6]=y*o+M*l+b*p+C*h,e[7]=y*i+M*c+b*g+C*T,y=n[8],M=n[9],b=n[10],C=n[11],e[8]=y*r+M*u+b*d+C*v,e[9]=y*a+M*s+b*f+C*m,e[10]=y*o+M*l+b*p+C*h,e[11]=y*i+M*c+b*g+C*T,y=n[12],M=n[13],b=n[14],C=n[15],e[12]=y*r+M*u+b*d+C*v,e[13]=y*a+M*s+b*f+C*m,e[14]=y*o+M*l+b*p+C*h,e[15]=y*i+M*c+b*g+C*T,e},a.mul=a.multiply,a.translate=function(e,t,n){var r,a,o,i,u,s,l,c,d,f,p,g,v=n[0],m=n[1],h=n[2];return t===e?(e[12]=t[0]*v+t[4]*m+t[8]*h+t[12],e[13]=t[1]*v+t[5]*m+t[9]*h+t[13],e[14]=t[2]*v+t[6]*m+t[10]*h+t[14],e[15]=t[3]*v+t[7]*m+t[11]*h+t[15]):(r=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],d=t[8],f=t[9],p=t[10],g=t[11],e[0]=r,e[1]=a,e[2]=o,e[3]=i,e[4]=u,e[5]=s,e[6]=l,e[7]=c,e[8]=d,e[9]=f,e[10]=p,e[11]=g,e[12]=r*v+u*m+d*h+t[12],e[13]=a*v+s*m+f*h+t[13],e[14]=o*v+l*m+p*h+t[14],e[15]=i*v+c*m+g*h+t[15]),e},a.scale=function(e,t,n){var r=n[0],a=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},a.rotate=function(e,t,n,a){var o,i,u,s,l,c,d,f,p,g,v,m,h,T,y,M,b,C,x,A,P,O,S,E,I=a[0],w=a[1],R=a[2],V=Math.sqrt(I*I+w*w+R*R);return Math.abs(V)<r.EPSILON?null:(V=1/V,I*=V,w*=V,R*=V,o=Math.sin(n),i=Math.cos(n),u=1-i,s=t[0],l=t[1],c=t[2],d=t[3],f=t[4],p=t[5],g=t[6],v=t[7],m=t[8],h=t[9],T=t[10],y=t[11],M=I*I*u+i,b=w*I*u+R*o,C=R*I*u-w*o,x=I*w*u-R*o,A=w*w*u+i,P=R*w*u+I*o,O=I*R*u+w*o,S=w*R*u-I*o,E=R*R*u+i,e[0]=s*M+f*b+m*C,e[1]=l*M+p*b+h*C,e[2]=c*M+g*b+T*C,e[3]=d*M+v*b+y*C,e[4]=s*x+f*A+m*P,e[5]=l*x+p*A+h*P,e[6]=c*x+g*A+T*P,e[7]=d*x+v*A+y*P,e[8]=s*O+f*S+m*E,e[9]=l*O+p*S+h*E,e[10]=c*O+g*S+T*E,e[11]=d*O+v*S+y*E,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},a.rotateX=function(e,t,n){var r=Math.sin(n),a=Math.cos(n),o=t[4],i=t[5],u=t[6],s=t[7],l=t[8],c=t[9],d=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*a+l*r,e[5]=i*a+c*r,e[6]=u*a+d*r,e[7]=s*a+f*r,e[8]=l*a-o*r,e[9]=c*a-i*r,e[10]=d*a-u*r,e[11]=f*a-s*r,e},a.rotateY=function(e,t,n){var r=Math.sin(n),a=Math.cos(n),o=t[0],i=t[1],u=t[2],s=t[3],l=t[8],c=t[9],d=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*a-l*r,e[1]=i*a-c*r,e[2]=u*a-d*r,e[3]=s*a-f*r,e[8]=o*r+l*a,e[9]=i*r+c*a,e[10]=u*r+d*a,e[11]=s*r+f*a,e},a.rotateZ=function(e,t,n){var r=Math.sin(n),a=Math.cos(n),o=t[0],i=t[1],u=t[2],s=t[3],l=t[4],c=t[5],d=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*a+l*r,e[1]=i*a+c*r,e[2]=u*a+d*r,e[3]=s*a+f*r,e[4]=l*a-o*r,e[5]=c*a-i*r,e[6]=d*a-u*r,e[7]=f*a-s*r,e},a.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},a.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},a.fromRotation=function(e,t,n){var a,o,i,u=n[0],s=n[1],l=n[2],c=Math.sqrt(u*u+s*s+l*l);return Math.abs(c)<r.EPSILON?null:(c=1/c,u*=c,s*=c,l*=c,a=Math.sin(t),o=Math.cos(t),i=1-o,e[0]=u*u*i+o,e[1]=s*u*i+l*a,e[2]=l*u*i-s*a,e[3]=0,e[4]=u*s*i-l*a,e[5]=s*s*i+o,e[6]=l*s*i+u*a,e[7]=0,e[8]=u*l*i+s*a,e[9]=s*l*i-u*a,e[10]=l*l*i+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},a.fromXRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},a.fromYRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},a.fromZRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},a.fromRotationTranslation=function(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],u=r+r,s=a+a,l=o+o,c=r*u,d=r*s,f=r*l,p=a*s,g=a*l,v=o*l,m=i*u,h=i*s,T=i*l;return e[0]=1-(p+v),e[1]=d+T,e[2]=f-h,e[3]=0,e[4]=d-T,e[5]=1-(c+v),e[6]=g+m,e[7]=0,e[8]=f+h,e[9]=g-m,e[10]=1-(c+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},a.fromRotationTranslationScale=function(e,t,n,r){var a=t[0],o=t[1],i=t[2],u=t[3],s=a+a,l=o+o,c=i+i,d=a*s,f=a*l,p=a*c,g=o*l,v=o*c,m=i*c,h=u*s,T=u*l,y=u*c,M=r[0],b=r[1],C=r[2];return e[0]=(1-(g+m))*M,e[1]=(f+y)*M,e[2]=(p-T)*M,e[3]=0,e[4]=(f-y)*b,e[5]=(1-(d+m))*b,e[6]=(v+h)*b,e[7]=0,e[8]=(p+T)*C,e[9]=(v-h)*C,e[10]=(1-(d+g))*C,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},a.fromRotationTranslationScaleOrigin=function(e,t,n,r,a){var o=t[0],i=t[1],u=t[2],s=t[3],l=o+o,c=i+i,d=u+u,f=o*l,p=o*c,g=o*d,v=i*c,m=i*d,h=u*d,T=s*l,y=s*c,M=s*d,b=r[0],C=r[1],x=r[2],A=a[0],P=a[1],O=a[2];return e[0]=(1-(v+h))*b,e[1]=(p+M)*b,e[2]=(g-y)*b,e[3]=0,e[4]=(p-M)*C,e[5]=(1-(f+h))*C,e[6]=(m+T)*C,e[7]=0,e[8]=(g+y)*x,e[9]=(m-T)*x,e[10]=(1-(f+v))*x,e[11]=0,e[12]=n[0]+A-(e[0]*A+e[4]*P+e[8]*O),e[13]=n[1]+P-(e[1]*A+e[5]*P+e[9]*O),e[14]=n[2]+O-(e[2]*A+e[6]*P+e[10]*O),e[15]=1,e},a.fromQuat=function(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=n+n,u=r+r,s=a+a,l=n*i,c=r*i,d=r*u,f=a*i,p=a*u,g=a*s,v=o*i,m=o*u,h=o*s;return e[0]=1-d-g,e[1]=c+h,e[2]=f-m,e[3]=0,e[4]=c-h,e[5]=1-l-g,e[6]=p+v,e[7]=0,e[8]=f+m,e[9]=p-v,e[10]=1-l-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},a.frustum=function(e,t,n,r,a,o,i){var u=1/(n-t),s=1/(a-r),l=1/(o-i);return e[0]=2*o*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*s,e[6]=0,e[7]=0,e[8]=(n+t)*u,e[9]=(a+r)*s,e[10]=(i+o)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=i*o*2*l,e[15]=0,e},a.perspective=function(e,t,n,r,a){var o=1/Math.tan(t/2),i=1/(r-a);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(a+r)*i,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*a*r*i,e[15]=0,e},a.perspectiveFromFieldOfView=function(e,t,n,r){var a=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),i=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),s=2/(i+u),l=2/(a+o);return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-((i-u)*s*.5),e[9]=(a-o)*l*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e},a.ortho=function(e,t,n,r,a,o,i){var u=1/(t-n),s=1/(r-a),l=1/(o-i);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*u,e[13]=(a+r)*s,e[14]=(i+o)*l,e[15]=1,e},a.lookAt=function(e,t,n,o){var i,u,s,l,c,d,f,p,g,v,m=t[0],h=t[1],T=t[2],y=o[0],M=o[1],b=o[2],C=n[0],x=n[1],A=n[2];return Math.abs(m-C)<r.EPSILON&&Math.abs(h-x)<r.EPSILON&&Math.abs(T-A)<r.EPSILON?a.identity(e):(f=m-C,p=h-x,g=T-A,v=1/Math.sqrt(f*f+p*p+g*g),f*=v,p*=v,g*=v,i=M*g-b*p,u=b*f-y*g,s=y*p-M*f,v=Math.sqrt(i*i+u*u+s*s),v?(v=1/v,i*=v,u*=v,s*=v):(i=0,u=0,s=0),l=p*s-g*u,c=g*i-f*s,d=f*u-p*i,v=Math.sqrt(l*l+c*c+d*d),v?(v=1/v,l*=v,c*=v,d*=v):(l=0,c=0,d=0),e[0]=i,e[1]=l,e[2]=f,e[3]=0,e[4]=u,e[5]=c,e[6]=p,e[7]=0,e[8]=s,e[9]=d,e[10]=g,e[11]=0,e[12]=-(i*m+u*h+s*T),e[13]=-(l*m+c*h+d*T),e[14]=-(f*m+p*h+g*T),e[15]=1,e)},a.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},a.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},e.exports=a},function(e,t,n){var r=n(4),a=n(7),o=n(10),i=n(11),u={};u.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},u.rotationTo=function(){var e=o.create(),t=o.fromValues(1,0,0),n=o.fromValues(0,1,0);return function(r,a,i){var s=o.dot(a,i);return s<-.999999?(o.cross(e,t,a),o.length(e)<1e-6&&o.cross(e,n,a),o.normalize(e,e),u.setAxisAngle(r,e,Math.PI),r):s>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(o.cross(e,a,i),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+s,u.normalize(r,r))}}(),u.setAxes=function(){var e=a.create();return function(t,n,r,a){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=a[0],e[4]=a[1],e[7]=a[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],u.normalize(t,u.fromMat3(t,e))}}(),u.clone=i.clone,u.fromValues=i.fromValues,u.copy=i.copy,u.set=i.set,u.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},u.setAxisAngle=function(e,t,n){n=.5*n;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e},u.add=i.add,u.multiply=function(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],u=n[0],s=n[1],l=n[2],c=n[3];return e[0]=r*c+i*u+a*l-o*s,e[1]=a*c+i*s+o*u-r*l,e[2]=o*c+i*l+r*s-a*u,e[3]=i*c-r*u-a*s-o*l,e},u.mul=u.multiply,u.scale=i.scale,u.rotateX=function(e,t,n){n*=.5;var r=t[0],a=t[1],o=t[2],i=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s+i*u,e[1]=a*s+o*u,e[2]=o*s-a*u,e[3]=i*s-r*u,e},u.rotateY=function(e,t,n){n*=.5;var r=t[0],a=t[1],o=t[2],i=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s-o*u,e[1]=a*s+i*u,e[2]=o*s+r*u,e[3]=i*s-a*u,e},u.rotateZ=function(e,t,n){n*=.5;var r=t[0],a=t[1],o=t[2],i=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s+a*u,e[1]=a*s-r*u,e[2]=o*s+i*u,e[3]=i*s-o*u,e},u.calculateW=function(e,t){var n=t[0],r=t[1],a=t[2];return e[0]=n,e[1]=r,e[2]=a,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-a*a)),e},u.dot=i.dot,u.lerp=i.lerp,u.slerp=function(e,t,n,r){var a,o,i,u,s,l=t[0],c=t[1],d=t[2],f=t[3],p=n[0],g=n[1],v=n[2],m=n[3];return o=l*p+c*g+d*v+f*m,o<0&&(o=-o,p=-p,g=-g,v=-v,m=-m),1-o>1e-6?(a=Math.acos(o),i=Math.sin(a),u=Math.sin((1-r)*a)/i,s=Math.sin(r*a)/i):(u=1-r,s=r),e[0]=u*l+s*p,e[1]=u*c+s*g,e[2]=u*d+s*v,e[3]=u*f+s*m,e},u.sqlerp=function(){var e=u.create(),t=u.create();return function(n,r,a,o,i,s){return u.slerp(e,r,i,s),u.slerp(t,a,o,s),u.slerp(n,e,t,2*s*(1-s)),n}}(),u.invert=function(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=n*n+r*r+a*a+o*o,u=i?1/i:0;return e[0]=-n*u,e[1]=-r*u,e[2]=-a*u,e[3]=o*u,e},u.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},u.length=i.length,u.len=u.length,u.squaredLength=i.squaredLength,u.sqrLen=u.squaredLength,u.normalize=i.normalize,u.fromMat3=function(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var a=0;t[4]>t[0]&&(a=1),t[8]>t[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3;n=Math.sqrt(t[3*a+a]-t[3*o+o]-t[3*i+i]+1),e[a]=.5*n,n=.5/n,e[3]=(t[3*o+i]-t[3*i+o])*n,e[o]=(t[3*o+a]+t[3*a+o])*n,e[i]=(t[3*i+a]+t[3*a+i])*n}return e},u.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},e.exports=u},function(e,t,n){var r=n(4),a={};a.create=function(){var e=new r.ARRAY_TYPE(3);return e[0]=0,e[1]=0,e[2]=0,e},a.clone=function(e){var t=new r.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},a.fromValues=function(e,t,n){var a=new r.ARRAY_TYPE(3);return a[0]=e,a[1]=t,a[2]=n,a},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},a.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},a.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},a.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},a.sub=a.subtract,a.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e},a.mul=a.multiply,a.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},a.div=a.divide,a.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},a.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},a.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},a.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},a.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return Math.sqrt(n*n+r*r+a*a)},a.dist=a.distance,a.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return n*n+r*r+a*a},a.sqrDist=a.squaredDistance,a.length=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)},a.len=a.length,a.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},a.sqrLen=a.squaredLength,a.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},a.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},a.normalize=function(e,t){var n=t[0],r=t[1],a=t[2],o=n*n+r*r+a*a;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},a.cross=function(e,t,n){var r=t[0],a=t[1],o=t[2],i=n[0],u=n[1],s=n[2];return e[0]=a*s-o*u,e[1]=o*i-r*s,e[2]=r*u-a*i,e},a.lerp=function(e,t,n,r){var a=t[0],o=t[1],i=t[2];return e[0]=a+r*(n[0]-a),e[1]=o+r*(n[1]-o),e[2]=i+r*(n[2]-i),e},a.hermite=function(e,t,n,r,a,o){var i=o*o,u=i*(2*o-3)+1,s=i*(o-2)+o,l=i*(o-1),c=i*(3-2*o);return e[0]=t[0]*u+n[0]*s+r[0]*l+a[0]*c,e[1]=t[1]*u+n[1]*s+r[1]*l+a[1]*c,e[2]=t[2]*u+n[2]*s+r[2]*l+a[2]*c,e},a.bezier=function(e,t,n,r,a,o){var i=1-o,u=i*i,s=o*o,l=u*i,c=3*o*u,d=3*s*i,f=s*o;return e[0]=t[0]*l+n[0]*c+r[0]*d+a[0]*f,e[1]=t[1]*l+n[1]*c+r[1]*d+a[1]*f,e[2]=t[2]*l+n[2]*c+r[2]*d+a[2]*f,e},a.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI,a=2*r.RANDOM()-1,o=Math.sqrt(1-a*a)*t;return e[0]=Math.cos(n)*o,e[1]=Math.sin(n)*o,e[2]=a*t,e},a.transformMat4=function(e,t,n){var r=t[0],a=t[1],o=t[2],i=n[3]*r+n[7]*a+n[11]*o+n[15];return i=i||1,e[0]=(n[0]*r+n[4]*a+n[8]*o+n[12])/i,e[1]=(n[1]*r+n[5]*a+n[9]*o+n[13])/i,e[2]=(n[2]*r+n[6]*a+n[10]*o+n[14])/i,e},a.transformMat3=function(e,t,n){var r=t[0],a=t[1],o=t[2];return e[0]=r*n[0]+a*n[3]+o*n[6],e[1]=r*n[1]+a*n[4]+o*n[7],e[2]=r*n[2]+a*n[5]+o*n[8],e},a.transformQuat=function(e,t,n){var r=t[0],a=t[1],o=t[2],i=n[0],u=n[1],s=n[2],l=n[3],c=l*r+u*o-s*a,d=l*a+s*r-i*o,f=l*o+i*a-u*r,p=-i*r-u*a-s*o;return e[0]=c*l+p*-i+d*-s-f*-u,e[1]=d*l+p*-u+f*-i-c*-s,e[2]=f*l+p*-s+c*-u-d*-i,e},a.rotateX=function(e,t,n,r){var a=[],o=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],o[0]=a[0],o[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),o[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e},a.rotateY=function(e,t,n,r){var a=[],o=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],o[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),o[1]=a[1],o[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e},a.rotateZ=function(e,t,n,r){var a=[],o=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],o[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),o[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),o[2]=a[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e},a.forEach=function(){var e=a.create();return function(t,n,r,a,o,i){var u,s;for(n||(n=3),r||(r=0),s=a?Math.min(a*n+r,t.length):t.length,u=r;u<s;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],o(e,e,i),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2];return t}}(),a.angle=function(e,t){var n=a.fromValues(e[0],e[1],e[2]),r=a.fromValues(t[0],t[1],t[2]);a.normalize(n,n),a.normalize(r,r);var o=a.dot(n,r);return o>1?0:Math.acos(o)},a.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},e.exports=a},function(e,t,n){var r=n(4),a={};a.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},a.clone=function(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.fromValues=function(e,t,n,a){var o=new r.ARRAY_TYPE(4);return o[0]=e,o[1]=t,o[2]=n,o[3]=a,o},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.set=function(e,t,n,r,a){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e},a.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},a.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},a.sub=a.subtract,a.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},a.mul=a.multiply,a.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e},a.div=a.divide,a.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},a.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),
e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},a.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},a.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},a.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(n*n+r*r+a*a+o*o)},a.dist=a.distance,a.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2],o=t[3]-e[3];return n*n+r*r+a*a+o*o},a.sqrDist=a.squaredDistance,a.length=function(e){var t=e[0],n=e[1],r=e[2],a=e[3];return Math.sqrt(t*t+n*n+r*r+a*a)},a.len=a.length,a.squaredLength=function(e){var t=e[0],n=e[1],r=e[2],a=e[3];return t*t+n*n+r*r+a*a},a.sqrLen=a.squaredLength,a.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},a.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},a.normalize=function(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=n*n+r*r+a*a+o*o;return i>0&&(i=1/Math.sqrt(i),e[0]=n*i,e[1]=r*i,e[2]=a*i,e[3]=o*i),e},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},a.lerp=function(e,t,n,r){var a=t[0],o=t[1],i=t[2],u=t[3];return e[0]=a+r*(n[0]-a),e[1]=o+r*(n[1]-o),e[2]=i+r*(n[2]-i),e[3]=u+r*(n[3]-u),e},a.random=function(e,t){return t=t||1,e[0]=r.RANDOM(),e[1]=r.RANDOM(),e[2]=r.RANDOM(),e[3]=r.RANDOM(),a.normalize(e,e),a.scale(e,e,t),e},a.transformMat4=function(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3];return e[0]=n[0]*r+n[4]*a+n[8]*o+n[12]*i,e[1]=n[1]*r+n[5]*a+n[9]*o+n[13]*i,e[2]=n[2]*r+n[6]*a+n[10]*o+n[14]*i,e[3]=n[3]*r+n[7]*a+n[11]*o+n[15]*i,e},a.transformQuat=function(e,t,n){var r=t[0],a=t[1],o=t[2],i=n[0],u=n[1],s=n[2],l=n[3],c=l*r+u*o-s*a,d=l*a+s*r-i*o,f=l*o+i*a-u*r,p=-i*r-u*a-s*o;return e[0]=c*l+p*-i+d*-s-f*-u,e[1]=d*l+p*-u+f*-i-c*-s,e[2]=f*l+p*-s+c*-u-d*-i,e[3]=t[3],e},a.forEach=function(){var e=a.create();return function(t,n,r,a,o,i){var u,s;for(n||(n=4),r||(r=0),s=a?Math.min(a*n+r,t.length):t.length,u=r;u<s;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],e[3]=t[u+3],o(e,e,i),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2],t[u+3]=e[3];return t}}(),a.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},e.exports=a},function(e,t,n){var r=n(4),a={};a.create=function(){var e=new r.ARRAY_TYPE(2);return e[0]=0,e[1]=0,e},a.clone=function(e){var t=new r.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},a.fromValues=function(e,t){var n=new r.ARRAY_TYPE(2);return n[0]=e,n[1]=t,n},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},a.set=function(e,t,n){return e[0]=t,e[1]=n,e},a.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},a.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},a.sub=a.subtract,a.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},a.mul=a.multiply,a.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},a.div=a.divide,a.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},a.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},a.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},a.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},a.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)},a.dist=a.distance,a.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r},a.sqrDist=a.squaredDistance,a.length=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)},a.len=a.length,a.squaredLength=function(e){var t=e[0],n=e[1];return t*t+n*n},a.sqrLen=a.squaredLength,a.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},a.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},a.normalize=function(e,t){var n=t[0],r=t[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a),e},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},a.cross=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e},a.lerp=function(e,t,n,r){var a=t[0],o=t[1];return e[0]=a+r*(n[0]-a),e[1]=o+r*(n[1]-o),e},a.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e},a.transformMat2=function(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[2]*a,e[1]=n[1]*r+n[3]*a,e},a.transformMat2d=function(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[2]*a+n[4],e[1]=n[1]*r+n[3]*a+n[5],e},a.transformMat3=function(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[3]*a+n[6],e[1]=n[1]*r+n[4]*a+n[7],e},a.transformMat4=function(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[4]*a+n[12],e[1]=n[1]*r+n[5]*a+n[13],e},a.forEach=function(){var e=a.create();return function(t,n,r,a,o,i){var u,s;for(n||(n=2),r||(r=0),s=a?Math.min(a*n+r,t.length):t.length,u=r;u<s;u+=n)e[0]=t[u],e[1]=t[u+1],o(e,e,i),t[u]=e[0],t[u+1]=e[1];return t}}(),a.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},e.exports=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}function i(e,t){return Object.keys(e).find(function(n){return e[n]===t})}function u(e){function t(e){i[e]=null}function n(e){function n(){t(e)}return Object.freeze({unsubscribe:n})}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=[];r.mtime=r.mtime||b,r.classHierarchy=["vtkObject"],e.modified=function(){return r.deleted?void console.log("instance deleted - can not call any method"):(r.mtime=++b,void i.forEach(function(t){return t&&t(e)}))},e.onModified=function(e){if(r.deleted)return console.log("instance deleted - can not call any method"),null;var t=i.length;return i.push(e),n(t)},e.getMTime=function(){return r.mtime},e.isA=function(e){return r.classHierarchy.indexOf(e)!==-1},e.getClassName=function(){return r.classHierarchy.slice(-1)[0]},e.set=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t).forEach(function(n){Array.isArray(t[n])?e["set"+o(n)].apply(e,a(t[n])):e["set"+o(n)]?e["set"+o(n)](t[n]):(["mtime"].indexOf(n)===-1&&console.log("Warning: Set value to model directly",n,t[n]),r[n]=t[n])})},e.get=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t)return r;var a={};return t.forEach(function(e){a[e]=r[e]}),a},e["delete"]=function(){Object.keys(r).forEach(function(e){return delete r[e]}),i.forEach(function(e,n){return t(n)}),r.deleted=!0}}function s(e,t,n){n.forEach(function(n){"object"===("undefined"==typeof n?"undefined":T(n))?e["get"+o(n.name)]=function(){return t[n]}:e["get"+o(n)]=function(){return t[n]}})}function l(e){if("object"===("undefined"==typeof e?"undefined":T(e))){var t=function(){var t=C[e.type];return t?{v:function(n,r){return t(n,r,e)}}:void console.error("No setter for field",e)}();if("object"===("undefined"==typeof t?"undefined":T(t)))return t.v}return function(t,n){return function(r){return n.deleted?(console.log("instance deleted - can not call any method"),!1):n[e]!==r&&(n[e]=r,t.modified(),!0)}}}function c(e,t,n){n.forEach(function(n){e["set"+o(n)]=l(n)(e,t)})}function d(e,t,n){s(e,t,n),c(e,t,n)}function f(e,t,n){n.forEach(function(n){e["get"+o(n)]=function(){return[].concat(t[n])}})}function p(e,t,n,r){n.forEach(function(n){e["set"+o(n)]=function(){for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];if(t.deleted)return void console.log("instance deleted - can not call any method");var i=!1;t[n].forEach(function(e,t){if(e!==a[t]){if(i)return;i=!0}}),i&&(t[n]=[].concat(a),e.modified())}})}function g(e,t,n,r){f(e,t,n),p(e,t,n,r)}function v(e,t,n,r){function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.deleted?void console.log("instance deleted - can not call any method"):(t.inputData[n]=e,void(t.inputConnection[n]=null))}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.inputConnection[e]&&(t.inputData[e]=t.inputConnection[e]()),t.inputData[e]}function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.deleted?void console.log("instance deleted - can not call any method"):(t.inputData[n]=null,void(t.inputConnection[n]=e))}function u(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.deleted?(console.log("instance deleted - can not call any method"),null):(e.update(),t.output[n])}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){return u(e)}}if(t.inputData=[],t.inputConnection=[],t.output=[],t.inputArrayToProcess=[],n){for(var l=n;l--;)t.inputData.push(null),t.inputConnection.push(null);e.setInputData=a,e.setInputConnection=i,e.getInputData=o}r&&(e.getOutputData=u,e.getOutputPort=s),e.update=function(){var r=[];if(n)for(var a=0;a<n;)r[a]=e.getInputData(a),a++;e.requestData(r,t.output)},e.getNumberOfInputPorts=function(){return n},e.getNumberOfOutputPorts=function(){return r},e.getInputArrayToProcess=function(e){var n=t.inputArrayToProcess[e],r=t.inputData[e];return n&&r?r["get"+n.fieldAssociation]().getArray(n.arrayName):null},e.setInputArrayToProcess=function(e,n,r){for(var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Scalars";t.inputArrayToProcess.length<e;)t.inputArrayToProcess.push(null);t.inputArrayToProcess[e]={arrayName:n,fieldAssociation:r,attributeType:a}}}function m(e,t,n){function r(e){i[e]=null}function a(e){function t(){r(e)}return Object.freeze({unsubscribe:t})}var i=[],u=e["delete"];e["invoke"+o(n)]=function(){for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.deleted?void console.log("instance deleted - can not call any method"):void i.forEach(function(t){return t&&t.apply(e,r)})},e["on"+o(n)]=function(e){if(t.deleted)return console.log("instance deleted - can not call any method"),null;var n=i.length;return i.push(e),a(n)},e["delete"]=function(){u(),i.forEach(function(e,t){return r(t)})}}function h(e,t){var n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={},r={};return e(r,n,t),Object.freeze(r)};return t&&M["default"].register(t,n),n}Object.defineProperty(t,"__esModule",{value:!0});var T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.capitalize=o,t.enumToString=i,t.obj=u,t.get=s,t.set=c,t.setGet=d,t.getArray=f,t.setArray=p,t.setGetArray=g,t.algo=v,t.event=m,t.newInstance=h;var y=n(14),M=r(y),b=0,C={"enum":function(e,t,n){return function(r){if("string"==typeof r)return void 0!==t["enum"][r]?t[n.name]!==t["enum"][r]&&(t[n.name]=t["enum"][r],e.modified(),!0):(console.log("Set Enum with invalid argument",n,r),null);if("number"==typeof r){if(t[n.name]!==r){if(Object.keys(n["enum"]).map(function(e){return n["enum"][e]}).indexOf(r)!==-1)return t[n.name]=r,e.modified(),!0;console.log("Set Enum outside range",n,r)}return!1}return console.log("Set Enum with invalid argument (String/Number)",n,r),null}}}},function(e,t){"use strict";function n(e){if(e.isA)return e;if(!e.type)return console.log("Invalid VTK object"),null;var t=a[e.type];return t?t(e):(console.log("No vtk class found for Object of type",e.type),null)}function r(e,t){a[e]=t}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,t.register=r;var a={};n.register=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return function(){return console.log("vtkProp3D::"+e+" - NOT IMPLEMENTED")}}function i(e,t){function n(){if([t.origin,t.position,t.orientation].forEach(function(e){if(e.filter(function(e){return 0!==e}).length)return void(t.isIdentity=!1)}),t.scale.filter(function(e){return 1!==e}).length)return void(t.isIdentity=!1)}t.classHierarchy.push("vtkProp3D"),e.getMTime=function(){return Math.max(t.mtime,e.getUserTransformMatrixMTime())},e.getUserTransformMatrixMTime=function(){return Math.max(t.userMatrix?t.userMatrix.getMTime():0,t.userTransform?t.userTransform.getMTime():0)},e.addPosition=function(n){t.position=t.position.map(function(e,t){return e+n[t]}),e.modified()},e.setOrientation=o("setOrientation"),e.getOrientation=o("getOrientation"),e.getOrientationWXYZ=o("GetOrientationWXYZ"),e.AddOrientation=o("AddOrientation"),e.RotateX=o("RotateX"),e.RotateY=o("RotateY"),e.RotateZ=o("RotateZ"),e.RotateWXYZ=o("RotateWXYZ"),e.SetUserTransform=o("SetUserTransform"),e.SetUserMatrix=o("SetUserMatrix"),e.getMatrix=function(){return e.computeMatrix(),t.matrix},e.computeMatrix=function(){t.isIdentity||e.getMTime()>t.matrixMTime.getMTime()&&(s.mat4.identity(t.matrix),s.mat4.translate(t.matrix,t.matrix,[-t.origin[0],-t.origin[1],-t.origin[2]]),s.mat4.scale(t.matrix,t.matrix,t.scale),s.mat4.translate(t.matrix,t.matrix,t.position),s.mat4.translate(t.matrix,t.matrix,t.origin),s.mat4.transpose(t.matrix,t.matrix),t.matrixMTime.modified())},e.getCenter=function(){return f["default"].getCenter(t.bounds)},e.getLength=function(){return f["default"].getLength(t.bounds)},e.getXRange=function(){return f["default"].getXRange(t.bounds)},e.getYRange=function(){return f["default"].getYRange(t.bounds)},e.getZRange=function(){return f["default"].getZRange(t.bounds)},e.pokeMatrix=o("pokeMatrix"),e.getUserMatrix=o("GetUserMatrix"),e.onModified(n)}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,v,n),g["default"].extend(e,t),t.matrixMTime={},c.obj(t.matrixMTime),c.get(e,t,["bounds","isIdentity"]),c.setGetArray(e,t,["origin","position","orientation","scale"],3),t.matrix=s.mat4.create(),t.transform=null,i(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=u;var s=n(3),l=n(13),c=a(l),d=n(16),f=r(d),p=n(18),g=r(p),v={origin:[0,0,0],position:[0,0,0],orientation:[0,0,0],scale:[1,1,1],bounds:[1,-1,1,-1,1,-1],userMatrix:null,userTransform:null,cachedProp3D:null,isIdentity:!0,matrixMTime:null},m=t.newInstance=c.newInstance(u);t["default"]={newInstance:m,extend:u}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){return e[0]<=e[1]&&e[2]<=e[3]&&e[4]<=e[5]}function u(e){return[.5*(e[0]+e[1]),.5*(e[2]+e[3]),.5*(e[4]+e[5])]}function s(e,t){return e[2*t+1]-e[2*t]}function l(e){return[s(e,0),s(e,1),s(e,2)]}function c(e){return e.slice(0,2)}function d(e){return e.slice(2,4)}function f(e){return e.slice(4,6)}function p(e){var t=l(e);return t[0]>t[1]?t[0]>t[2]?t[0]:t[2]:t[1]>t[2]?t[1]:t[2]}function g(e){if(i(e)){var t=l(e);return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}return null}function v(e,t){return e<=0&&t>=0||e>=0&&t<=0}function m(e,t){t.classHierarchy.push("vtkBoundingBox"),e.clone=function(){var e=[].concat(t.bounds);return O({bounds:e})},e.equals=function(e){var n=t.bounds,r=e.getBounds();return n[0]===r[0]&&n[1]===r[1]&&n[2]===r[2]&&n[3]===r[3]&&n[4]===r[4]&&n[5]===r[5]},e.setMinPoint=function(e,n,r){var a=T(t.bounds,6),o=a[0],i=a[1],u=a[2],s=a[3],l=a[4],c=a[5];return t.bounds=[e,e>i?e:i,n,n>s?n:s,r,r>c?r:c],o!==e||u!==n||l!==r},e.setMaxPoint=function(e,n,r){var a=T(t.bounds,6),o=a[0],i=a[1],u=a[2],s=a[3],l=a[4],c=a[5];return t.bounds=[e<o?e:o,e,n<u?n:u,n,r<l?r:l,r],i!==e||s!==n||c!==r},e.addPoint=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t.bounds=t.bounds.map(function(e,t){if(t%2===0){var r=t/2;return e<n[r]?e:n[r]}var a=(t-1)/2;return e>n[a]?e:n[a]})},e.addBounds=function(e,n,r,a,o,i){var u=T(t.bounds,6),s=u[0],l=u[1],c=u[2],d=u[3],f=u[4],p=u[5];t.bounds=[Math.min(e,s),Math.max(n,l),Math.min(r,c),Math.max(a,d),Math.min(o,f),Math.max(i,p)]},e.addBox=function(t){e.addBounds.apply(e,o(t.getBounds()))},e.isValid=function(){return i(t.bounds)},e.intersect=function(n){if(!e.isValid()||!n.isValid())return!1;for(var r=[0,0,0,0,0,0],a=n.getBounds(),o=void 0,i=0;i<3;i++)if(o=!1,a[2*i]>=t.bounds[2*i]&&a[2*i]<=t.bounds[2*i+1]?(o=!0,r[2*i]=a[2*i]):t.bounds[2*i]>=a[2*i]&&t.bounds[2*i]<=a[2*i+1]&&(o=!0,r[2*i]=t.bounds[2*i]),a[2*i+1]>=t.bounds[2*i]&&a[2*i+1]<=t.bounds[2*i+1]?(o=!0,r[2*i+1]=n.MaxPnt[i]):t.bounds[2*i+1]>=n.MinPnt[2*i]&&t.bounds[2*i+1]<=n.MaxPnt[2*i+1]&&(o=!0,r[2*i+1]=t.bounds[2*i+1]),!o)return!1;return t.bounds=r,!0},e.intersects=function(n){if(!e.isValid()||!n.isValid())return!1;for(var r=n.getBounds(),a=0;a<3;a++)if(!(r[2*a]>=t.bounds[2*a]&&r[2*a]<=t.bounds[2*a+1]||t.bounds[2*a]>=r[2*a]&&t.bounds[2*a]<=r[2*a+1]||r[2*a+1]>=t.bounds[2*a]&&r[2*a+1]<=t.bounds[2*a+1]||t.bounds[2*a+1]>=n.MinPnt[2*a]&&t.bounds[2*a+1]<=n.MaxPnt[2*a+1]))return!1;return!0},e.intersectPlane=function(e,n){for(var r=[[0,1,2,3,4,5,6,7],[0,1,4,5,2,3,6,7],[0,2,4,6,1,3,5,7]],a=[0,0,0,0,0,0,0,0],o=0,i=0;i<2;i++)for(var u=2;u<4;u++)for(var s=4;s<6;s++){var l=[t.bounds[i],t.bounds[u],t.bounds[s]];a[o++]=C["default"].evaluate(n,e,l)}for(var c=2;c--&&!(v(a[r[c][0]],a[r[c][4]])&&v(a[r[c][1]],a[r[c][5]])&&v(a[r[c][2]],a[r[c][6]])&&v(a[r[c][3]],a[r[c][7]])););if(c<0)return!1;for(var d=Math.sign(n[c]),f=Math.abs((t.bounds[2*c+1]-t.bounds[2*c])*n[c]),p=d>0?1:0,g=0;g<4;g++)if(0!==f){var m=Math.abs(a[r[c][g]])/f;d>0&&m<p&&(p=m),d<0&&m>p&&(p=m)}var h=(1-p)*t.bounds[2*c]+p*t.bounds[2*c+1];return d>0?t.bounds[2*c]=h:t.bounds[2*c+1]=h,!0},e.containsPoint=function(e,n,r){return!(e<t.bounds[0]||e>t.bounds[1])&&(!(n<t.bounds[2]||n>t.bounds[3])&&!(r<t.bounds[4]||r>t.bounds[5]))},e.getMinPoint=function(){return[t.bounds[0],t.bounds[2],t.bounds[4]]},e.getMaxPoint=function(){return[t.bounds[1],t.bounds[3],t.bounds[5]]},e.getBound=function(e){return t.bound[e]},e.contains=function(t){return!!e.intersects(t)&&(!!e.containsPoint.apply(e,o(t.getMinPoint()))&&(!!e.containsPoint.apply(e,o(t.getMaxPoint()))||0))},e.getCenter=function(){return u(t.bounds)},e.getLength=function(e){return s(t.bounds,e)},e.getLengths=function(){return l(t.bounds)},e.getMaxLength=function(){return p(t.bounds)},e.getDiagonalLength=function(){return g(t.bounds)},e.reset=function(){return e.setBounds([].concat(x))},e.inflate=function(e){t.bounds=t.bounds.map(function(t,n){return n%2===0?t-e:t+e})},e.scale=function(n,r,a){if(e.isValid()){var o=[].concat(t.bounds);return n>=0?(o[0]*=n,o[1]*=n):(o[0]=n*t.bounds[1],o[1]=n*t.bounds[0]),r>=0?(o[2]*=r,o[3]*=r):(o[2]=r*t.bounds[3],o[3]=r*t.bounds[2]),a>=0?(o[4]*=a,o[5]*=a):(o[4]=a*t.bounds[5],o[5]=a*t.bounds[4]),t.bounds=o,!0}return!1}}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,P,n),M.obj(e,t),M.setGet(e,t,["bounds"]),m(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=t.STATIC=t.INIT_BOUNDS=void 0;var T=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(s){a=!0,o=s}finally{try{!r&&u["return"]&&u["return"]()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.extend=h;var y=n(13),M=a(y),b=n(17),C=r(b),x=t.INIT_BOUNDS=[Number.MAX_VALUE,Number.MIN_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MAX_VALUE,Number.MIN_VALUE],A=t.STATIC={isValid:i,getCenter:u,getLength:s,getLengths:l,getMaxLength:p,getDiagonalLength:g,getXRange:c,getYRange:d,getZRange:f},P={type:"vtkBoundingBox",bounds:[].concat(x)},O=t.newInstance=M.newInstance(h,"vtkBoundingBox");t["default"]=Object.assign({newInstance:O,extend:h},A)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e,t,n){return e[0]*(n[0]-t[0])+e[1]*(n[1]-t[1])+e[2]*(n[2]-t[2])}function o(e,t){t.classHierarchy.push("vtkPlane")}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,c,n),s.obj(e,t),s.setGet(e,t,["bounds"]),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=t.STATIC=void 0,t.extend=i;var u=n(13),s=r(u),l=t.STATIC={evaluate:a},c={type:"vtkPlane"},d=t.newInstance=s.newInstance(i,"vtkPlane");t["default"]=Object.assign({newInstance:d,extend:i},l)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){return function(){return console.log("vtkProp::"+e+" - NOT IMPLEMENTED")}}function o(e,t){t.classHierarchy.push("vtkProp"),e.getActors=function(){return null},e.getActors2D=function(){return null},e.getVolumes=function(){return null},e.pick=a("pick"),e.hasKey=a("hasKey"),e.getRedrawMTime=function(){return t.mtime},e.setEstimatedRenderTime=function(e){t.estimatedRenderTime=e,t.savedEstimatedRenderTime=e},e.restoreEstimatedRenderTime=function(){t.estimatedRenderTime=t.savedEstimatedRenderTime},e.addEstimatedRenderTime=function(e){t.estimatedRenderTime+=e},e.setAllocatedRenderTime=function(e){t.allocatedRenderTime=e,t.savedEstimatedRenderTime=t.estimatedRenderTime,t.estimatedRenderTime=0},e.getSupportsSelection=function(){return!1},e.getTextures=function(){return t.textures},e.hasTexture=function(e){return!!t.textures.filter(function(t){return t===e}).length},e.addTexture=function(n){n&&!e.hasTexture(n)&&(t.textures=t.textures.concat(n))},e.removeTexture=function(e){var n=t.textures.filter(function(t){return t===e});t.texture.length!==n.length&&(t.textures=n)},e.removeAllTextures=function(){t.textures=[]}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,l,n),s.obj(e,t),s.get(e,t,["estimatedRenderTime","allocatedRenderTime"]),s.setGet(e,t,["visibility","pickable","dragable","useBounds","renderTimeMultiplier"]),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=n(13),s=r(u),l={visibility:!0,pickable:!0,dragable:!0,useBounds:!0,allocatedRenderTime:10,estimatedRenderTime:0,savedEstimatedRenderTime:0,renderTimeMultiplier:1,paths:null,textures:[]},c=t.newInstance=s.newInstance(i);t["default"]={newInstance:c,extend:i}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){return function(){return console.log("vtkProperty::"+e+" - NOT IMPLEMENTED")}}function o(e,t){t.classHierarchy.push("vtkProperty"),e.setColor=function(n,r,a){t.color[0]===n&&t.color[1]===r&&t.color[2]===a||(t.color[0]=n,t.color[1]=r,t.color[2]=a,e.modified()),e.setDiffuseColor(t.color),e.setAmbientColor(t.color),e.setSpecularColor(t.color)},e.computeCompositeColor=a("ComputeCompositeColor"),e.getColor=function(){var e=0;t.ambient+t.diffuse+t.specular>0&&(e=1/(t.ambient+t.diffuse+t.specular));for(var n=0;n<3;n++)t.color[n]=e*(t.ambient*t.ambientColor[n]+t.diffuse*t.diffuseColor[n]+t.specular*t.specularColor[n]);return[].concat(t.color)},e.addShaderVariable=a("AddShaderVariable"),e.setInterpolationToFlat=function(){return e.setInterpolation(l.VTK_INTERPOLATION.FLAT)},e.setInterpolationToGouraud=function(){return e.setInterpolation(l.VTK_INTERPOLATION.GOURAUD)},e.setInterpolationToPhong=function(){return e.setInterpolation(l.VTK_INTERPOLATION.PHONG)},e.getInterpolationAsString=function(){return l.VTK_SHADING_MODEL[t.interpolation]},e.setRepresentationToWireframe=function(){return e.setRepresentation(l.VTK_REPRESENTATION.WIREFRAME)},e.setRepresentationToSurface=function(){return e.setRepresentation(l.VTK_REPRESENTATION.SURFACE)},e.setRepresentationToPoints=function(){return e.setRepresentation(l.VTK_REPRESENTATION.POINTS)}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,c,n),s.obj(e,t),s.setGet(e,t,["lighting","interpolation","ambient","diffuse","specular","specularPower","opacity","edgeVisibility","lineWidth","pointSize","backfaceCulling","frontfaceCulling","representation"]),s.setGetArray(e,t,["ambientColor","specularColor","diffuseColor","edgeColor"],3),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=n(13),s=r(u),l=n(20),c={color:[1,1,1],ambientColor:[1,1,1],diffuseColor:[1,1,1],specularColor:[1,1,1],edgeColor:[0,0,0],ambient:0,diffuse:1,specular:0,specularPower:1,opacity:1,interpolation:l.VTK_INTERPOLATION.GOURAUD,representation:l.VTK_REPRESENTATION.SURFACE,edgeVisibility:!1,backfaceCulling:!1,frontfaceCulling:!1,pointSize:1,lineWidth:1,lighting:!0,shading:!1,materialName:null},d=t.newInstance=s.newInstance(i);t["default"]={newInstance:d,extend:i}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.VTK_SHADING={FLAT:0,GOURAUD:1,PHONG:2},r=t.VTK_REPRESENTATION={POINTS:0,WIREFRAME:1,SURFACE:2},a=t.VTK_INTERPOLATION={FLAT:0,GOURAUD:1,PHONG:2};t["default"]={VTK_SHADING:n,VTK_REPRESENTATION:r,VTK_INTERPOLATION:a}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkCamera");var n=u.mat4.create(),r=u.mat4.create();e.orthogonalizeViewUp=function(){var n=e.getViewTransformMatrix();t.viewUp[0]=n[4],t.viewUp[1]=n[5],t.viewUp[2]=n[6],e.modified()},e.setPosition=function(n,r,a){n===t.position[0]&&r===t.position[1]&&a===t.position[2]||(t.position[0]=n,t.position[1]=r,t.position[2]=a,e.computeDistance(),e.modified())},e.setFocalPoint=function(n,r,a){n===t.focalPoint[0]&&r===t.focalPoint[1]&&a===t.focalPoint[2]||(t.focalPoint[0]=n,t.focalPoint[1]=r,t.focalPoint[2]=a,e.computeDistance(),e.modified())},e.setDistance=function(e){},e.getDistance=function(){},e.computeDistance=function(){var n=t.focalPoint[0]-t.position[0],r=t.focalPoint[1]-t.position[1],a=t.focalPoint[2]-t.position[2];if(t.distance=Math.sqrt(n*n+r*r+a*a),t.distance<1e-20){t.distance=1e-20,console.debug("Distance is set to minimum.");var o=t.DirectionOfProjection;t.focalPoint[0]=t.position[0]+o[0]*t.distance,t.focalPoint[1]=t.position[1]+o[1]*t.distance,t.focalPoint[2]=t.position[2]+o[2]*t.distance}t.directionOfProjection[0]=n/t.distance,t.directionOfProjection[1]=r/t.distance,t.directionOfProjection[2]=a/t.distance,e.computeViewPlaneNormal()},e.computeViewPlaneNormal=function(){t.viewPlaneNormal[0]=-t.directionOfProjection[0],t.viewPlaneNormal[1]=-t.directionOfProjection[1],t.viewPlaneNormal[2]=-t.directionOfProjection[2]},e.dolly=function(n){if(!(n<=0)){var r=t.distance/n;e.setPosition(t.focalPoint[0]-r*t.directionOfProjection[0],t.focalPoint[1]-r*t.directionOfProjection[1],t.focalPoint[2]-r*t.directionOfProjection[2])}},e.setRoll=function(e){},e.getRoll=function(){},e.roll=function(n){var r=t.position,a=t.focalPoint,o=t.viewUp,i=u.vec4.fromValues(o[0],o[1],o[2],0),s=u.mat4.create(),l=u.vec3.fromValues(a[0]-r[0],a[1]-r[1],a[2]-r[2]);u.mat4.rotate(s,s,d["default"].radiansFromDegrees(n),l),u.vec4.transformMat4(i,i,s),t.viewUp[0]=i[0],t.viewUp[1]=i[1],t.viewUp[2]=i[2],e.modified()},e.azimuth=function(n){var r=u.vec3.create(),a=t.focalPoint,o=u.mat4.create();u.mat4.identity(o),u.mat4.translate(o,o,u.vec3.fromValues(a[0],a[1],a[2])),u.mat4.rotate(o,o,d["default"].radiansFromDegrees(n),u.vec3.fromValues(t.viewUp[0],t.viewUp[1],t.viewUp[2])),u.mat4.translate(o,o,u.vec3.fromValues(-a[0],-a[1],-a[2])),u.vec3.transformMat4(r,u.vec3.fromValues(t.position[0],t.position[1],t.position[2]),o),e.setPosition(r[0],r[1],r[2])},e.yaw=function(e){},e.elevation=function(n){var r=u.vec3.create(),a=t.focalPoint,o=e.getViewTransformMatrix(),i=[-o[0],-o[1],-o[2]],s=u.mat4.create();u.mat4.identity(s),u.mat4.translate(s,s,u.vec3.fromValues(a[0],a[1],a[2])),u.mat4.rotate(s,s,d["default"].radiansFromDegrees(n),u.vec3.fromValues(i[0],i[1],i[2])),u.mat4.translate(s,s,u.vec3.fromValues(-a[0],-a[1],-a[2])),u.vec3.transformMat4(r,u.vec3.fromValues(t.position[0],t.position[1],t.position[2]),s),e.setPosition(r[0],r[1],r[2])},e.pitch=function(e){},e.zoom=function(n){n<=0||(t.parallelProjection?t.parallelScale/=n:t.viewAngle/=n,e.modified())},e.setThickness=function(e){},e.setWindowCenter=function(e,t){},e.setObliqueAngles=function(e,t){},e.applyTransform=function(e){},e.getViewTransformMatrix=function(){var e=t.position,r=t.focalPoint,a=t.viewUp,o=u.mat4.lookAt(n,u.vec3.fromValues(e[0],e[1],e[2]),u.vec3.fromValues(r[0],r[1],r[2]),u.vec3.fromValues(a[0],a[1],a[2]));return u.mat4.transpose(o,o),o},e.getViewTransformObject=function(){},e.getProjectionTransformMatrix=function(e,n,a){u.mat4.identity(r);var o=t.clippingRange[1]-t.clippingRange[0],i=[t.clippingRange[0]+(n+1)*o/2,t.clippingRange[0]+(a+1)*o/2];if(t.parallelProjection){var s=t.parallelScale*e,l=t.parallelScale,c=(t.windowCenter[0]-1)*s,f=(t.windowCenter[0]+1)*s,p=(t.windowCenter[1]-1)*l,g=(t.windowCenter[1]+1)*l;u.mat4.ortho(r,c,f,p,g,n,a)}else{if(t.useOffAxisProjection)throw new Error("Off-Axis projection is not supported at this time");var v=t.viewAngle;t.useHorizontalViewAngle===!0&&(v=t.viewAngle/e),u.mat4.perspective(r,d["default"].radiansFromDegrees(v),e,i[0],i[1])}return u.mat4.transpose(r,r),r},e.getProjectionTransformObject=function(e,t,n){},e.getCompositeProjectionTransformMatrix=function(t,n,r){var a=e.getViewTransformMatrix(),o=e.getProjectionTransformMatrix(t,n,r);return u.mat4.multiply(o,a,o),o},e.setUserViewTransform=function(e){},e.setUserTransform=function(e){},e.render=function(e){},e.getViewingRaysMTime=function(){},e.viewingRaysModified=function(){},e.getFrustumPlanes=function(e){},e.getOrientation=function(){},e.getOrientationWXYZ=function(){},e.getCameraLightTransformMatrix=function(){},e.updateViewport=function(){},e.shallowCopy=function(e){},e.deepCopy=function(e){},e.setScissorRect=function(e){},e.getScissorRect=function(){}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,f,n),l.obj(e,t),l.get(e,t,["thickness","userViewTransform","userTransform"]),l.setGet(e,t,["parallelProjection","useHorizontalViewAngle","viewAngle","parallelScale","focalDisk","useOffAxisProjection","freezeFocalPoint","useScissor"]),l.getArray(e,t,["directionOfProjection","windowCenter","viewPlaneNormal","position","focalPoint"]),l.setGetArray(e,t,["clippingRange"],2),l.setGetArray(e,t,["viewUp","screenBottomLeft","screenBottomRight","screenTopRight"],3),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=t.DEFAULT_VALUES=void 0,t.extend=i;var u=n(3),s=n(13),l=a(s),c=n(22),d=r(c),f=t.DEFAULT_VALUES={position:[0,0,1],focalPoint:[0,0,0],viewUp:[0,1,0],directionOfProjection:[0,0,-1],parallelProjection:!1,useHorizontalViewAngle:!1,viewAngle:30,parallelScale:1,clippingRange:[.01,1000.01],thickness:1e3,windowCenter:[0,0],viewPlaneNormal:[0,0,1],focalDisk:1,useOffAxisProjection:!1,screenBottomLeft:[-.5,-.5,-.5],screenBottomRight:[.5,-.5,-.5],screenTopRight:[.5,.5,-.5],userViewTransform:null,userTransform:null,freezeFocalPoint:!1,useScissor:!1},p=t.newInstance=l.newInstance(i);t["default"]={newInstance:p,extend:i}},function(e,t){"use strict";function n(e){return function(){return console.log("vtkMath::"+e+" - NOT IMPLEMENTED")}}function r(e,t){for(var n=0;n<3;n++){var r=e[n];e[n]=t[n],t[n]=r}}function a(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=[];t.length<e;)t.push(0);return t}function o(e,t){for(var n=1,r=1;r<=t;++r)n*=(e-r+1)/r;return Math.floor(n)}function i(e,t){if(e<t)return 0;for(var n=a(t),r=0;r<t;++r)n[r]=r;return n}function u(e,t,n){for(var r=0,a=t-1;a>=0;--a)if(n[a]<e-t+a){for(var o=n[a]+1;a<t;)n[a++]=o++;r=1;break}return r}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t-e;
return e+n*Math.random()}function l(e,t,n){n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2]}function c(e,t,n){n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2]}function d(e,t){e[0]*=t,e[1]*=t,e[2]*=t}function f(e,t){e[0]*=t,e[1]*=t}function p(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function g(e,t,n){for(var r=0;r<3;r++)for(var a=0;a<3;a++)n[r][a]=e[r]*t[a]}function v(e,t,n){var r=e[1]*t[2]-e[2]*t[1],a=e[2]*t[0]-e[0]*t[2],o=e[0]*t[1]-e[1]*t[0];n[0]=r,n[1]=a,n[2]=o}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;switch(t){case 1:return Math.abs(e);case 2:return Math.sqrt(e[0]*e[0]+e[1]*e[1]);case 3:return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);default:for(var n=0,r=0;r<t;r++)n+=e[r]*e[r];return Math.sqrt(n)}}function h(e){var t=m(e);return 0!==t&&(e[0]/=t,e[1]/=t,e[2]/=t),t}function T(e,t,n,r){var a=e[0]*e[0],o=e[1]*e[1],i=e[2]*e[2],u=Math.sqrt(a+o+i),s=void 0,l=void 0,c=void 0;a>o&&a>i?(s=0,l=1,c=2):o>i?(s=1,l=2,c=0):(s=2,l=0,c=1);var d=e[s]/u,f=e[l]/u,p=e[c]/u,g=Math.sqrt(d*d+p*p);if(0!==r){var v=Math.sin(r),m=Math.cos(r);t&&(t[s]=(p*m-d*f*v)/g,t[l]=v*g,t[c]=(-(d*m)-f*p*v)/g),n&&(n[s]=(-(p*v)-d*f*m)/g,n[l]=m*g,n[c]=(d*v-f*p*m)/g)}else t&&(t[s]=p/g,t[l]=0,t[c]=-d/g),n&&(n[s]=-d*f/g,n[l]=g,n[c]=-f*p/g)}function y(e,t,n){var r=p(t,t);if(0===r)return n[0]=0,n[1]=0,n[2]=0,!1;for(var a=p(e,t)/r,o=0;o<3;o++)n[o]=t[o];return d(n,a),!0}function M(e,t){return e[0]*t[0]+e[1]*t[1]}function b(e,t,n){var r=M(t,t);if(0===r)return n[0]=0,n[1]=0,!1;for(var a=M(e,t)/r,o=0;o<2;o++)n[o]=t[o];return f(n,a),!0}function C(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])+(e[2]-t[2])*(e[2]-t[2])}function x(e,t){var n=[0,0,0];return v(e,t,n),Math.atan2(m(v),p(e,t))}function A(e,t,n){var r=Math.abs(e-n);return 1/Math.sqrt(2*Math.PI*t)*Math.exp(-Math.pow(r,2)/(2*t))}function P(e,t,n){var r=Math.abs(e-n);return Math.exp(-Math.pow(r,2)/(2*t))}function O(e,t,n){for(var r=0;r<2;r++)for(var a=0;a<2;a++)n[r][a]=e[r]*t[a]}function S(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function E(e){var t=S(e);return 0!==t&&(e[0]/=t,e[1]/=t),t}function I(e,t){return e[0]*t[1]-t[0]*e[1]}function w(e,t){for(var n=void 0,a=void 0,o=void 0,i=[0,0,0],u=0;u<3;u++)o=Math.abs(e[u][0]),(a=Math.abs(e[u][1]))>o&&(o=a),(a=Math.abs(e[u][2]))>o&&(o=a),i[u]=1/o;o=i[0]*Math.abs(e[0][0]),n=0,(a=i[1]*Math.abs(e[1][0]))>=o&&(o=a,n=1),(a=i[2]*Math.abs(e[2][0]))>=o&&(n=2),0!==n&&(r(e[n],e[0]),i[n]=i[0]),t[0]=n,e[1][0]/=e[0][0],e[2][0]/=e[0][0],e[1][1]-=e[1][0]*e[0][1],e[2][1]-=e[2][0]*e[0][1],o=i[1]*Math.abs(e[1][1]),n=1,(a=i[2]*Math.abs(e[2][1]))>=o&&(n=2,r(e[2],e[1]),i[2]=i[1]),t[1]=n,e[2][1]/=e[1][1],e[1][2]-=e[1][0]*e[0][2],e[2][2]-=e[2][0]*e[0][2]+e[2][1]*e[1][2],t[2]=2}function R(e,t,n){var r=n[t[0]];n[t[0]]=n[0],n[0]=r,r=n[t[1]],n[t[1]]=n[1],n[1]=r-e[1][0]*n[0],r=n[t[2]],n[t[2]]=n[2],n[2]=r-e[2][0]*n[0]-e[2][1]*n[1],n[2]/=e[2][2],n[1]=(n[1]-e[1][2]*n[2])/e[1][1],n[0]=(n[0]-e[0][1]*n[1]-e[0][2]*n[2])/e[0][0]}function V(e,t,n){var r=e[0][0],a=e[0][1],o=e[0][2],i=e[1][0],u=e[1][1],s=e[1][2],l=e[2][0],c=e[2][1],d=e[2][2],f=+I(u,c,s,d),p=-I(i,l,s,d),g=+I(i,l,u,c),v=-I(a,c,o,d),m=+I(r,l,o,d),h=-I(r,l,a,c),T=+I(a,u,o,s),y=-I(r,i,o,s),M=+I(r,i,a,u),b=r*f+a*p+o*g,C=f*t[0]+v*t[1]+T*t[2],x=p*t[0]+m*t[1]+y*t[2],A=g*t[0]+h*t[1]+M*t[2];n[0]=C/b,n[1]=x/b,n[2]=A/b}function _(e,t,n){var r=e[0][0]*t[0]+e[0][1]*t[1]+e[0][2]*t[2],a=e[1][0]*t[0]+e[1][1]*t[1]+e[1][2]*t[2],o=e[2][0]*t[0]+e[2][1]*t[1]+e[2][2]*t[2];n[0]=r,n[1]=a,n[2]=o}function D(e,t,n){for(var r=[[0,0,0],[0,0,0],[0,0,0]],a=0;a<3;a++)r[0][a]=e[0][0]*t[0][a]+e[0][1]*t[1][a]+e[0][2]*t[2][a],r[1][a]=e[1][0]*t[0][a]+e[1][1]*t[1][a]+e[1][2]*t[2][a],r[2][a]=e[2][0]*t[0][a]+e[2][1]*t[1][a]+e[2][2]*t[2][a];for(var o=0;o<3;o++)n[o][0]=r[o][0],n[o][1]=r[o][1],n[o][2]=r[o][2]}function L(e,t,n,r,a,o,i){r!==a&&console.error("Number of columns of A must match number of rows of B.");for(var u=0;u<n;u++)for(var s=0;s<o;s++){i[u][s]=0;for(var l=0;l<r;l++)i[u][s]+=e[u][l]*t[l][s]}}function N(e,t){var n=void 0;n=e[1][0],t[1][0]=e[0][1],t[0][1]=n,n=e[2][0],t[2][0]=e[0][2],t[0][2]=n,n=e[2][1],t[2][1]=e[1][2],t[1][2]=n,t[0][0]=e[0][0],t[1][1]=e[1][1],t[2][2]=e[2][2]}function k(e,t){var n=e[0][0],r=e[0][1],a=e[0][2],o=e[1][0],i=e[1][1],u=e[1][2],s=e[2][0],l=e[2][1],c=e[2][2],d=+I(i,l,u,c),f=-I(o,s,u,c),p=+I(o,s,i,l),g=-I(r,l,a,c),v=+I(n,s,a,c),m=-I(n,s,r,l),h=+I(r,i,a,u),T=-I(n,o,a,u),y=+I(n,o,r,i),M=n*d+r*f+a*p;t[0][0]=d/M,t[1][0]=f/M,t[2][0]=p/M,t[0][1]=g/M,t[1][1]=v/M,t[2][1]=m/M,t[0][2]=h/M,t[1][2]=T/M,t[2][2]=y/M}function F(e){for(var t=0;t<3;t++)e[t][0]=e[t][1]=e[t][2]=0,e[t][t]=1}function B(e){return e[0][0]*e[1][1]*e[2][2]+e[1][0]*e[2][1]*e[0][2]+e[2][0]*e[0][1]*e[1][2]-e[0][0]*e[2][1]*e[1][2]-e[1][0]*e[0][1]*e[2][2]-e[2][0]*e[1][1]*e[0][2]}function U(e,t){var n=e[0]*e[0],r=e[0]*e[1],a=e[0]*e[2],o=e[0]*e[3],i=e[1]*e[1],u=e[2]*e[2],s=e[3]*e[3],l=e[1]*e[2],c=e[1]*e[3],d=e[2]*e[3],f=i+u+s,p=1/(n+f),g=(n-f)*p;p*=2,t[0][0]=i*p+g,t[1][0]=(l+o)*p,t[2][0]=(c-a)*p,t[0][1]=(l-o)*p,t[1][1]=u*p+g,t[2][1]=(d+r)*p,t[0][2]=(c+a)*p,t[1][2]=(d-r)*p,t[2][2]=s*p+g}function j(e,t,n,r){var o=void 0,i=void 0,u=void 0,s=void 0,l=void 0,c=void 0,d=void 0,f=void 0,p=void 0,g=void 0,v=void 0,m=void 0,h=void 0,T=void 0,y=void 0,M=void 0,b=a(t),C=a(t),x=function(t,n,r,a,o){T=t[n][r],h=t[a][o],e[n][r]=T-m*(h+T*g),e[a][o]=h+m*(T-h*g)};for(l=0;l<t;l++){for(s=0;s<t;s++)r[l][s]=0;r[l][l]=1}for(l=0;l<t;l++)b[l]=n[l]=e[l][l],C[l]=0;for(o=0;o<ye;o++){for(v=0,l=0;l<t-1;l++)for(s=l+1;s<t;s++)v+=Math.abs(e[l][s]);if(0===v)break;for(d=o<3?.2*v/(t*t):0,l=0;l<t-1;l++)for(s=l+1;s<t;s++)if(T=100*Math.abs(e[l][s]),o>3&&Math.abs(n[l])+T===Math.abs(n[l])&&Math.abs(n[s])+T===Math.abs(n[s]))e[l][s]=0;else if(Math.abs(e[l][s])>d){for(h=n[s]-n[l],Math.abs(h)+T===Math.abs(h)?p=e[l][s]/h:(f=.5*h/e[l][s],p=1/(Math.abs(f)+Math.sqrt(1+f*f)),f<0&&(p=-p)),y=1/Math.sqrt(1+p*p),m=p*y,g=m/(1+y),h=p*e[l][s],C[l]-=h,C[s]+=h,n[l]-=h,n[s]+=h,e[l][s]=0,i=0;i<=l-1;i++)x(e,i,l,i,s);for(i=l+1;i<=s-1;i++)x(e,l,i,i,s);for(i=s+1;i<t;i++)x(e,l,i,s,i);for(i=0;i<t;i++)x(r,i,l,i,s)}for(l=0;l<t;l++)b[l]+=C[l],n[l]=b[l],C[l]=0}if(o>=ye)return console.warn("vtkMath::Jacobi: Error extracting eigenfunctions"),0;for(i=0;i<t-1;i++){for(u=i,M=n[u],o=i+1;o<t;o++)n[o]>=M&&(u=o,M=n[u]);if(u!==i)for(n[u]=n[i],n[i]=M,o=0;o<t;o++)M=r[o][i],r[o][i]=r[o][u],r[o][u]=M}var A=(t>>1)+(1&t);for(i=0;i<t;i++){for(c=0,o=0;o<t;o++)r[o][i]>=0&&c++;if(c<A)for(o=0;o<t;o++)r[o][i]*=-1}return 1}function G(e,t){var n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];n[0][0]=e[0][0]+e[1][1]+e[2][2],n[1][1]=e[0][0]-e[1][1]-e[2][2],n[2][2]=-e[0][0]+e[1][1]-e[2][2],n[3][3]=-e[0][0]-e[1][1]+e[2][2],n[0][1]=n[1][0]=e[2][1]-e[1][2],n[0][2]=n[2][0]=e[0][2]-e[2][0],n[0][3]=n[3][0]=e[1][0]-e[0][1],n[1][2]=n[2][1]=e[1][0]+e[0][1],n[1][3]=n[3][1]=e[0][2]+e[2][0],n[2][3]=n[3][2]=e[2][1]+e[1][2];for(var r=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],a=[0,0,0,0],o=[0,0,0,0],i=[0,0,0,0],u=0;u<4;u++)o[u]=n[u],i[u]=r[u];j(o,4,a,i),t[0]=r[0][0],t[1]=r[1][0],t[2]=r[2][0],t[3]=r[3][0]}function K(e,t,n){var r=e[0]*t[0],a=e[0]*t[1],o=e[0]*t[2],i=e[0]*t[3],u=e[1]*t[0],s=e[1]*t[1],l=e[1]*t[2],c=e[1]*t[3],d=e[2]*t[0],f=e[2]*t[1],p=e[2]*t[2],g=e[2]*t[3],v=e[3]*t[0],m=e[3]*t[1],h=e[3]*t[2],T=e[3]*t[3];n[0]=r-s-p-T,n[1]=a+u+g-h,n[2]=o-c+d+m,n[3]=i+l-f+v}function z(e,t){for(var n=0;n<3;n++)t[0][n]=e[0][n],t[1][n]=e[1][n],t[2][n]=e[2][n];for(var o=a(3),i=a(3),u=void 0,s=0;s<3;s++){var l=Math.abs(t[s][0]),c=Math.abs(t[s][1]),d=Math.abs(t[s][2]);u=c>l?c:l,u=d>u?d:u,o[s]=1,0!==u&&(o[s]/=u)}var f=Math.abs(t[0][0])*o[0],p=Math.abs(t[1][0])*o[1],g=Math.abs(t[2][0])*o[2];i[0]=0,u=f,p>=u&&(u=p,i[0]=1),g>=u&&(i[0]=2),0!==i[0]&&(r(t[i[0]],t[0]),o[i[0]]=o[0]);var v=Math.abs(t[1][1])*o[1],m=Math.abs(t[2][1])*o[2];i[1]=1,u=v,m>=u&&(i[1]=2,r(t[2],t[1])),i[2]=2;var h=0;if(B(t)<0){h=1;for(var T=0;T<3;T++)t[0][T]=-t[0][T],t[1][T]=-t[1][T],t[2][T]=-t[2][T]}var y=a(4);if(G(t,y),U(y,t),h)for(var M=0;M<3;M++)t[0][M]=-t[0][M],t[1][M]=-t[1][M],t[2][M]=-t[2][M];1!==i[1]&&r(t[i[1]],t[1]),0!==i[0]&&r(t[i[0]],t[0])}function H(e,t,n){var o=void 0,i=void 0,u=void 0,s=void 0,l=void 0,c=void 0,d=[a(3),a(3),a(3)],f=a(3),p=a(3);for(o=0;o<3;o++)d[o][0]=e[o][0],d[o][1]=e[o][1],d[o][2]=e[o][2],f[o]=d[o],p[o]=n[o];if(j(f,3,t,p),t[0]===t[1]&&t[0]===t[2])return void F(n);for(N(n,n),o=0;o<3;o++)if(t[(o+1)%3]===t[(o+2)%3]){for(c=Math.abs(n[o][0]),s=0,i=1;i<3;i++)c<(l=Math.abs(n[o][i]))&&(c=l,s=i);return s!==o&&(l=t[s],t[s]=t[o],t[o]=l,r(n[o],n[s])),n[s][s]<0&&(n[s][0]=-n[s][0],n[s][1]=-n[s][1],n[s][2]=-n[s][2]),i=(s+1)%3,u=(s+2)%3,n[i][0]=0,n[i][1]=0,n[i][2]=0,n[i][i]=1,v(n[s],n[i],n[u]),h(n[u]),v(n[u],n[s],n[i]),void N(n,n)}for(c=Math.abs(n[0][0]),s=0,o=1;o<3;o++)c<(l=Math.abs(n[o][0]))&&(c=l,s=o);for(0!==s&&(l=t[s],t[s]=t[0],t[0]=l,r(n[s],n[0])),Math.abs(n[1][1])<Math.abs(n[2][1])&&(l=t[2],t[2]=t[1],t[1]=l,r(n[2],n[1])),o=0;o<2;o++)n[o][o]<0&&(n[o][0]=-n[o][0],n[o][1]=-n[o][1],n[o][2]=-n[o][2]);B(n)<0&&(n[2][0]=-n[2][0],n[2][1]=-n[2][1],n[2][2]=-n[2][2]),N(n,n)}function W(e,t,n,r){var o=void 0,i=[a(3),a(3),a(3)];for(o=0;o<3;o++)i[0][o]=e[0][o],i[1][o]=e[1][o],i[2][o]=e[2][o];var u=B(i);if(u<0)for(o=0;o<3;o++)i[0][o]=-i[0][o],i[1][o]=-i[1][o],i[2][o]=-i[2][o];z(i,t),N(i,i),D(i,t,r),H(r,n,r),D(t,r,t),N(r,r),u<0&&(n[0]=-n[0],n[1]=-n[1],n[2]=-n[2])}function Y(e,t,n){var r=void 0,o=void 0,i=void 0,u=void 0,s=0,l=void 0,c=void 0,d=void 0,f=a(n);for(r=0;r<n;r++){for(u=0,o=0;o<n;o++)(d=Math.abs(e[r][o]))>u&&(u=d);if(0===u)return console.warn("Unable to factor linear system"),0;f[r]=1/u}for(o=0;o<n;o++){for(r=0;r<o;r++){for(l=e[r][o],i=0;i<r;i++)l-=e[r][i]*e[i][o];e[r][o]=l}for(u=0,r=o;r<n;r++){for(l=e[r][o],i=0;i<o;i++)l-=e[r][i]*e[i][o];e[r][o]=l,(c=f[r]*Math.abs(l))>=u&&(u=c,s=r)}if(o!==s){for(i=0;i<n;i++)c=e[s][i],e[s][i]=e[o][i],e[o][i]=c;f[s]=f[o]}if(t[o]=s,Math.abs(e[o][o])<=Me)return console.warn("Unable to factor linear system"),0;if(o!==n-1)for(c=1/e[o][o],r=o+1;r<n;r++)e[r][o]*=c}return 1}function q(e,t,n,r){var a=void 0,o=void 0,i=void 0,u=void 0,s=void 0;for(i=-1,a=0;a<r;a++){if(u=t[a],s=n[u],n[u]=n[a],i>=0)for(o=i;o<=a-1;o++)s-=e[a][o]*n[o];else 0!==s&&(i=a);n[a]=s}for(a=r-1;a>=0;a--){for(s=n[a],o=a+1;o<r;o++)s-=e[a][o]*n[o];n[a]=s/e[a][a]}}function X(e,t,n){if(2===n){var r=a(2),o=I(e[0][0],e[0][1],e[1][0],e[1][1]);return 0===o?0:(r[0]=(e[1][1]*t[0]-e[0][1]*t[1])/o,r[1]=(-(e[1][0]*t[0])+e[0][0]*t[1])/o,t[0]=r[0],t[1]=r[1],1)}if(1===n)return 0===e[0][0]?0:(t[0]/=e[0][0],1);var i=a(n);return 0===Y(e,i,n)?0:(q(e,i,t,n),1)}function Z(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=r||a(n),u=o||a(n);if(0===Y(e,i,n,u))return 0;for(var s=0;s<n;s++){for(var l=0;l<n;l++)u[l]=0;u[s]=1,q(e,i,u,n);for(var c=0;c<n;c++)t[c][s]=u[c]}return 1}function J(e,t){for(var n=+Number.MAX_VALUE,r=-Number.MAX_VALUE,a=0;a<t;a++)for(var o=a;o<t;o++)Math.abs(e[a][o])>Ie&&(r=Math.abs(e[a][o]));for(var i=0;i<t;i++)Math.abs(e[i][i])<Ee&&(n=Math.abs(e[i][i]));return 0===n?Number.MAX_VALUE:r/n}function Q(e,t,n){return j(e,3,t,n)}function $(e,t,n,r){if(e<n)return console.warn("Insufficient number of samples. Underdetermined."),0;var o=void 0,i=void 0,u=void 0,s=a(n),l=a(n),c=a(n);for(o=0;o<n;o++)for(c[o]=a(n),s[o]=a(n),i=0;i<n;i++)s[o][i]=0;for(u=0;u<e;u++)for(o=0;o<n;o++)for(i=o;i<n;i++)s[o][i]+=t[u][o]*t[u][i];for(o=0;o<n;o++)for(i=0;i<o;i++)s[o][i]=s[i][o];for(j(s,n,l,c),o=0;o<n;o++)r[o][0]=c[o][n-1];return 1}function ee(e,t,n,r,o,i){var u=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];if(e<n||e<o)return console.warn("Insufficient number of samples. Underdetermined."),0;var s=a(o),l=1,c=void 0,d=0,f=void 0,p=void 0,g=void 0,v=0;if(u){for(p=0;p<o;p++)s[p]=1;for(f=0;f<e;f++)for(p=0;p<o;p++)Math.abs(r[f][p])>Me&&(l=0,s[p]=0);if(l&&1===o)return console.warn("Detected homogeneous system (Y=0), calling SolveHomogeneousLeastSquares()"),$(e,t,n,i);if(l)v=1;else for(p=0;p<o;p++)s[p]&&(v=1)}if(v){for(c=a(n),p=0;p<n;p++)c[p]=[0];d=$(e,t,n,c)}var m=a(n),h=a(n),T=a(n);for(f=0;f<n;f++){for(m[f]=a(n),h[f]=a(n),p=0;p<n;p++)m[f][p]=0,h[f][p]=0;for(T[f]=a(o),p=0;p<o;p++)T[f][p]=0}for(g=0;g<e;g++)for(f=0;f<n;f++){for(p=f;p<n;p++)m[f][p]+=t[g][f]*t[g][p];for(p=0;p<o;p++)T[f][p]+=t[g][f]*r[g][p]}for(f=0;f<n;f++)for(p=0;p<f;p++)m[f][p]=m[p][f];var y=Z(m,h,n);if(y)for(f=0;f<n;f++)for(p=0;p<o;p++)for(i[f][p]=0,g=0;g<n;g++)i[f][p]+=h[f][g]*T[g][p];if(v)for(p=0;p<o;p++)if(s[p])for(f=0;f<n;f++)i[f][p]=c[f][0];return v?d&&y:y}function te(e,t){var n=void 0,r=void 0,a=Te(e,3),o=a[0],i=a[1],u=a[2],s=1/3,l=1/6,c=2/3,d=o,f=o;i>d?d=i:i<f&&(f=i),u>d?d=u:u<f&&(f=u);var p=d;r=p>0?(d-f)/d:0,r>0?(n=o===d?l*(i-u)/(d-f):i===d?s+l*(u-o)/(d-f):c+l*(o-i)/(d-f),n<0&&(n+=1)):n=0,t[0]=n,t[1]=r,t[2]=p}function ne(e,t){var n=Te(e,3),r=n[0],a=n[1],o=n[2],i=1/3,u=1/6,s=2/3,l=5/6,c=void 0,d=void 0,f=void 0;r>u&&r<=i?(d=1,c=(i-r)/u,f=0):r>i&&r<=.5?(d=1,f=(r-i)/u,c=0):r>.5&&r<=s?(f=1,d=(s-r)/u,c=0):r>s&&r<=l?(f=1,c=(r-s)/u,d=0):r>l&&r<=1?(c=1,f=(1-r)/u,d=0):(c=1,d=r/u,f=0),c=a*c+(1-a),d=a*d+(1-a),f=a*f+(1-a),c*=o,d*=o,f*=o,t[0]=c,t[1]=d,t[2]=f}function re(e,t){var n=Te(e,3),r=n[0],a=n[1],o=n[2],i=(r+16)/116,u=a/500+i,s=i-o/200;i=Math.pow(i,3)>.008856?Math.pow(i,3):(i-16/116)/7.787,u=Math.pow(u,3)>.008856?Math.pow(u,3):(u-16/116)/7.787,s=Math.pow(s,3)>.008856?Math.pow(s,3):(s-16/116)/7.787;var l=.9505,c=1,d=1.089;t[0]=l*u,t[1]=c*i,t[2]=d*s}function ae(e,t){var n=Te(e,3),r=n[0],a=n[1],o=n[2],i=.9505,u=1,s=1.089,l=r/i,c=a/u,d=o/s;l=l>.008856?Math.pow(l,1/3):7.787*l+16/116,c=c>.008856?Math.pow(c,1/3):7.787*c+16/116,d=d>.008856?Math.pow(d,1/3):7.787*d+16/116,t[0]=116*c-16,t[1]=500*(l-c),t[2]=200*(c-d)}function oe(e,t){var n=Te(e,3),r=n[0],a=n[1],o=n[2],i=3.2406*r+a*-1.5372+o*-.4986,u=r*-.9689+1.8758*a+.0415*o,s=.0557*r+a*-.204+1.057*o;i>.0031308?i=1.055*Math.pow(i,1/2.4)-.055:i*=12.92,u>.0031308?u=1.055*Math.pow(u,1/2.4)-.055:u*=12.92,s>.0031308?s=1.055*Math.pow(s,1/2.4)-.055:s*=12.92;var l=i;l<u&&(l=u),l<s&&(l=s),l>1&&(i/=l,u/=l,s/=l),i<0&&(i=0),u<0&&(u=0),s<0&&(s=0),t[0]=i,t[1]=u,t[2]=s}function ie(e,t){var n=Te(e,3),r=n[0],a=n[1],o=n[2];r>.04045?r=Math.pow((r+.055)/1.055,2.4):r/=12.92,a>.04045?a=Math.pow((a+.055)/1.055,2.4):a/=12.92,o>.04045?o=Math.pow((o+.055)/1.055,2.4):o/=12.92,t[0]=.4124*r+.3576*a+.1805*o,t[1]=.2126*r+.7152*a+.0722*o,t[2]=.0193*r+.1192*a+.9505*o}function ue(e,t){var n=[0,0,0];ie(e,n),ae(n,t)}function se(e,t){var n=[0,0,0];re(e,n),oe(n,t)}function le(e){e[0]=1,e[1]=-1,e[2]=1,e[3]=-1,e[4]=1,e[5]=-1}function ce(e){return!(e[1]-e[0]<0)}function de(e,t,n){return e<t?t:e>n?n:e}function fe(e,t){var n=0;return t[0]!==t[1]&&(n=e<t[0]?t[0]:e>t[1]?t[1]:e,n=(n-t[0])/(t[1]-t[0])),n}function pe(e,t){if(!e||!t)return 0;for(var n=0;n<6;n+=2)if(e[n]<t[n]||e[n]>t[n+1]||e[n+1]<t[n]||e[n+1]>t[n+1])return 0;return 1}function ge(e,t,n){if(!e||!t)return 0;for(var r=0;r<6;r+=2)if(e[r]+n[r/2]<t[r]||e[r]-n[r/2]>t[r+1]||e[r+1]+n[r/2]<t[r]||e[r+1]-n[r/2]>t[r+1])return 0;return 1}function ve(e,t,n){if(!e||!t||!n)return 0;for(var r=0;r<3;r++)if(e[r]+n[r]<t[2*r]||e[r]-n[r]>t[2*r+1])return 0;return 1}function me(e,t,n,r){for(var o=a(3),i=a(3),u=a(3),s=a(3),l=a(3),c=a(3),d=0;d<3;++d)o[d]=e[d]-t[d],i[d]=t[d]-n[d],u[d]=n[d]-e[d],s[d]=-o[d],l[d]=-i[d],c[d]=-u[d];var f=m(s),g=m(l),h=m(u),T=a(3);v(o,i,T);for(var y=m(T),M=f*g*h/(2*y),b=2*y*y,C=g*g*p(o,c)/b,x=h*h*p(s,i)/b,A=f*f*p(u,l)/b,P=0;P<3;++P)r[P]=C*e[P]+x*t[P]+A*n[P];return M}function he(){return[].concat([Number.MAX_VALUE,Number.MIN_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MAX_VALUE,Number.MIN_VALUE])}Object.defineProperty(t,"__esModule",{value:!0});var Te=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(s){a=!0,o=s}finally{try{!r&&u["return"]&&u["return"]()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ye=20,Me=1e-12,be=function(){return Math.PI},Ce=function(e){return e/180*Math.PI},xe=function(e){return 180*e/Math.PI},Ae=Math.round,Pe=Math.floor,Oe=Math.ceil,Se=n("ceilLog2"),Ee=Math.min,Ie=Math.max,we=n("isPowerOfTwo"),Re=n("nearestPowerOfTwo"),Ve=n("factorial"),_e=n("randomSeed"),De=n("getSeed"),Le=n("gaussian"),Ne=n("GetScalarTypeFittingRange"),ke=n("GetAdjustedScalarRange"),Fe=1/0,Be=-(1/0),Ue=function(e){return!Number.isFinite(e)},je=Number.isNaN,Ge=Number.isFinite;t["default"]={Pi:be,radiansFromDegrees:Ce,degreesFromRadians:xe,round:Ae,floor:Pe,ceil:Oe,ceilLog2:Se,min:Ee,max:Ie,isPowerOfTwo:we,nearestPowerOfTwo:Re,factorial:Ve,binomial:o,beginCombination:i,nextCombination:u,randomSeed:_e,getSeed:De,random:s,gaussian:Le,add:l,subtract:c,multiplyScalar:d,multiplyScalar2D:f,dot:p,outer:g,cross:v,norm:m,normalize:h,perpendiculars:T,projectVector:y,projectVector2D:b,distance2BetweenPoints:C,angleBetweenVectors:x,gaussianAmplitude:A,gaussianWeight:P,dot2D:M,outer2D:O,norm2D:S,normalize2D:E,determinant2x2:I,LUFactor3x3:w,LUSolve3x3:R,linearSolve3x3:V,multiply3x3_vect3:_,multiply3x3_mat3:D,multiplyMatrix:L,transpose3x3:N,invert3x3:k,identity3x3:F,determinant3x3:B,quaternionToMatrix3x3:U,matrix3x3ToQuaternion:G,multiplyQuaternion:K,orthogonalize3x3:z,diagonalize3x3:H,singularValueDecomposition3x3:W,solveLinearSystem:X,invertMatrix:Z,luFactorLinearSystem:Y,luSolveLinearSystem:q,estimateMatrixCondition:J,jacobi:Q,jacobiN:j,solveHomogeneousLeastSquares:$,solveLeastSquares:ee,rgb2hsv:te,hsv2rgb:ne,lab2xyz:re,xyz2lab:ae,xyz2rgb:oe,rgb2xyz:ie,rgb2lab:ue,LabToRGB:se,uninitializeBounds:le,areBoundsInitialized:ce,clampValue:de,clampAndNormalizeValue:fe,getScalarTypeFittingRange:Ne,getAdjustedScalarRange:ke,extentIsWithinOtherExtent:pe,boundsIsWithinOtherBounds:ge,pointIsWithinBounds:ve,solve3PointCircle:me,inf:Fe,negInf:Be,isInf:Ue,isNan:je,isFinite:Ge,createUninitializedBouds:he}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){function n(e,n){if(!t.deleted){var r=n[0];r&&r.mtime===t.mtime||!function(){var e={};r={type:"vtkPolyData",mtime:t.mtime,metadata:{source:"SphereSource",state:e},vtkPolyData:{Points:{type:"vtkDataArray",name:"_points",tuple:3,dataType:t.pointType},Polys:{type:"vtkDataArray",name:"_polys",tuple:1,dataType:"Uint32Array"},PointData:{Normals:{type:"vtkDataArray",name:"Normals",tuple:3,dataType:"Float32Array"}}}},["radius","latLongTessellation","thetaResolution","startTheta","endTheta","phiResolution","startPhi","endPhi"].forEach(function(n){e[n]=t[n]}),["center"].forEach(function(n){e[n]=[].concat(t[n])});var a=0,o=t.thetaResolution,i=t.startTheta<t.endTheta?t.startTheta:t.endTheta;i*=Math.PI/180;var u=t.endTheta>t.startTheta?t.endTheta:t.startTheta;u*=Math.PI/180;var s=t.startPhi<t.endPhi?t.startPhi:t.endPhi;s*=Math.PI/180;var l=t.endPhi>t.startPhi?t.endPhi:t.startPhi;l*=Math.PI/180,Math.abs(i-u)<2*Math.PI&&++o;var d=(u-i)/t.thetaResolution,f=t.startPhi<=0?1:0,p=t.phiResolution+(t.endPhi>=180?-1:0),g=t.phiResolution*o+2,v=2*t.phiResolution*t.thetaResolution,m=0,h=new window[r.vtkPolyData.Points.dataType](3*g);r.vtkPolyData.Points.values=h,r.vtkPolyData.Points.size=3*g;var T=new Float32Array(3*g);r.vtkPolyData.PointData.Normals.values=T,r.vtkPolyData.PointData.Normals.size=3*g;var y=0,M=new window[r.vtkPolyData.Polys.dataType](5*v);r.vtkPolyData.Polys.values=M,t.startPhi<=0&&(h[3*m+0]=t.center[0],h[3*m+1]=t.center[1],h[3*m+2]=t.center[2]+t.radius,T[3*m+0]=0,T[3*m+1]=0,T[3*m+2]=1,m++,a++),t.endPhi>=180&&(h[3*m+0]=t.center[0],h[3*m+1]=t.center[1],h[3*m+2]=t.center[2]-t.radius,T[3*m+0]=0,T[3*m+1]=0,T[3*m+2]=-1,m++,a++);for(var b=t.phiResolution-a,C=(l-s)/(t.phiResolution-1),x=0;x<o;x++)for(var A=i+x*d,P=f;P<p;P++){var O=s+P*C,S=t.radius*Math.sin(O);T[3*m+0]=S*Math.cos(A),T[3*m+1]=S*Math.sin(A),T[3*m+2]=t.radius*Math.cos(O),h[3*m+0]=T[3*m+0]+t.center[0],h[3*m+1]=T[3*m+1]+t.center[1],h[3*m+2]=T[3*m+2]+t.center[2];var E=Math.sqrt(T[3*m+0]*T[3*m+0]+T[3*m+1]*T[3*m+1]+T[3*m+2]*T[3*m+2]);E=0===E?1:E,T[3*m+0]/=E,T[3*m+1]/=E,T[3*m+2]/=E,m++}var I=b*o;if(Math.abs(i-u)<2*Math.PI&&--o,t.startPhi<=0)for(var w=0;w<o;w++)M[y++]=3,M[y++]=b*w+a,M[y++]=b*(w+1)%I+a,M[y++]=0;if(t.endPhi>=180)for(var R=b-1+a,V=0;V<o;V++)M[y++]=3,M[y++]=b*V+R,M[y++]=a-1,M[y++]=b*(V+1)%I+R;for(var _=0;_<o;_++)for(var D=0;D<b-1;D++){var L=b*_+D+a,N=L+1,k=(b*(_+1)+D)%I+a+1;t.latLongTessellation?(M[y++]=4,M[y++]=L,M[y++]=N,M[y++]=k,M[y++]=k-1):(M[y++]=3,M[y++]=L,M[y++]=N,M[y++]=k,M[y++]=3,M[y++]=L,M[y++]=k,M[y++]=k-1)}h=h.subarray(0,3*m),r.vtkPolyData.Points.values=h,r.vtkPolyData.Points.size=3*m,T=T.subarray(0,3*m),r.vtkPolyData.PointData.Normals.values=T,r.vtkPolyData.PointData.Normals.size=3*m,M=M.subarray(0,y),r.vtkPolyData.Polys.values=M,r.vtkPolyData.Polys.size=y,n[0]=c["default"].newInstance(r),n[0].getPointData().setActiveNormals("Normals")}()}}t.classHierarchy.push("vtkSphereSource"),e.requestData=n}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,d,n),s.obj(e,t),s.setGet(e,t,["radius","latLongTessellation","thetaResolution","startTheta","endTheta","phiResolution","startPhi","endPhi"]),s.setGetArray(e,t,["center"],3),s.algo(e,t,0,1),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.vtkSphereSource=o,t.extend=i;var u=n(13),s=a(u),l=n(24),c=r(l),d={radius:.5,latLongTessellation:!1,thetaResolution:8,startTheta:0,endTheta:360,phiResolution:8,startPhi:0,endPhi:180,center:[0,0,0],pointType:"Float32Array"},f=t.newInstance=s.newInstance(i);t["default"]={newInstance:f,extend:i}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkPolyData"),t.vtkPolyData&&t.vtkPolyData.Points&&(t.points=f["default"].newInstance(t.vtkPolyData.Points)),["Verts","Lines","Polys","Strips"].forEach(function(e){var n=e.toLowerCase();t[n]||(t.vtkPolyData&&t.vtkPolyData[e]?t[n]=f["default"].newInstance(t.vtkPolyData[e]):t[n]=f["default"].newInstance({empty:!0}))}),e.shallowCopy=function(){var e={},n=["pointData","cellData","fieldData","points","verts","lines","polys","strips"];n.forEach(function(n){e[n]=t[n].shallowCopy()});var r=v(e);return r.set({mtime:t.mtime}),r}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,g,n),c["default"].extend(e,t,n),s.setGet(e,t,["verts","lines","polys","strips"]),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=t.STATIC=void 0,t.extend=i;var u=n(13),s=a(u),l=n(25),c=r(l),d=n(28),f=r(d),p=t.STATIC={},g={PolyData:null,verts:null,lines:null,polys:null,strips:null},v=t.newInstance=s.newInstance(i,"vtkPolyData");t["default"]=Object.assign({newInstance:v,extend:i},p)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkPointSet"),t.points||(t.points=f["default"].newInstance({empty:!0})),e.getBounds=function(){return t.points.getBounds()},e.computeBounds=function(){e.getBounds()}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,g,n),c["default"].extend(e,t,n),s.setGet(e,t,["points"]),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=t.STATIC=void 0,t.extend=i;var u=n(13),s=a(u),l=n(26),c=r(l),d=n(28),f=r(d),p=t.STATIC={},g={points:null},v=t.newInstance=s.newInstance(i,"vtkPointSet");t["default"]=Object.assign({newInstance:v,extend:i},p)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){if(e.bounds)return e.bounds;if(e.type&&e[e.type]){var t=e[e.type];if(t.bounds)return t.bounds;if(t.Points&&t.Points.bounds)return t.Points.bounds;if(t.Points&&t.Points.values){for(var n=t.Points.values,r=d["default"].newInstance(),a=n.length,o=t.Points.tuple?t.Points.tuple:3,i=0;i<a;i+=o)r.addPoint(n[i*o],n[i*o+1],n[i*o+2]);return t.Points.bounds=r.getBounds(),t.Points.bounds}}return v["default"].createUninitializedBounds()}function i(e,t){t.classHierarchy.push("vtkDataSet");var n=t.type?t[t.type]||{}:{};e.dataset=n,t.pointData||(t.pointData=p["default"].newInstance({dataArrays:n.PointData})),t.cellData||(t.cellData=p["default"].newInstance({dataArrays:n.CellData})),t.fieldData||(t.fieldData=p["default"].newInstance({dataArrays:n.FieldData}))}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,h,n),l.obj(e,t),l.get(e,t,["pointData","cellData","fieldData"]),i(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=t.STATIC=void 0,t.extend=u;var s=n(13),l=a(s),c=n(16),d=r(c),f=n(27),p=r(f),g=n(22),v=r(g),m=t.STATIC={getBounds:o},h={},T=t.newInstance=l.newInstance(u,"vtkDataSet");t["default"]=Object.assign({newInstance:T,extend:u},m)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkDataSetAttributes"),e.getScalars=function(){var e=t.arrays[t.activeScalars];return e?e:null},e.getVectors=function(){var e=t.arrays[t.activeVectors];return e?e:null},e.getNormals=function(){var e=t.arrays[t.activeNormals];return e?e:null},e.getTCoords=function(){var e=t.arrays[t.activeTCoords];return e?e:null},e.getGlobalIds=function(){var e=t.arrays[t.activeGlobalIds];return e?e:null},e.getPedigreeIds=function(){var e=t.arrays[t.activePedigreeIds];return e?e:null},e.addArray=function(n){if(t.arrays[n.getName()])throw new Error("Array with same name already exist",n,t.arrays);t.arrays[n.getName()]=n,e.modified()},e.removeArray=function(n){var r=t.arrays[n];return delete t.arrays[n],e.modified(),r},e.getArrayNames=function(){return Object.keys(t.arrays)},e.getAbstractArray=function(e){return t.arrays[e]},e.getArray=function(e){return t.arrays[e]},t.dataArrays&&Object.keys(t.dataArrays).length&&Object.keys(t.dataArrays).forEach(function(n){t.dataArrays[n].ref||"vtkDataArray"!==t.dataArrays[n].type||e.addArray(c["default"].newInstance(t.dataArrays[n]))}),e.shallowCopy=function(){var n=Object.assign({},t,{arrays:null,dataArrays:null}),r=p(n);return e.getArrayNames().forEach(function(t){r.addArray(e.getArray(t).shallowCopy())}),r.set({mtime:t.mtime}),r}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,f,n),s.obj(e,t),s.setGet(e,t,["activeScalars","activeNormals","activeTCoords","activeVectors","activeTensors","activeGlobalIds","activePedigreeIds"]),t.arrays||(t.arrays={}),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=n(13),s=a(u),l=n(28),c=r(l),d=n(14),f=(r(d),{activeScalars:"",activeVectors:"",activeTensors:"",activeNormals:"",activeTCoords:"",activeGlobalIds:"",activePedigreeIds:"",arrays:null}),p=t.newInstance=s.newInstance(i,"vtkDataSetAttributes");t["default"]={newInstance:p,extend:i}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r={min:Number.MAX_VALUE,max:Number.MIN_VALUE};if(t<0)return console.log("vtkDataArray: Compute magnitude - NOT IMPLEMENTED"),r;for(var a=e.length,o=t;o<a;o+=n){var i=e[o];r.min>i&&(r.min=i),r.max<i&&(r.max=i)}return r}function o(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e||[];n.length<=t;)n.push(null);return n}function i(e){var t=0;return e.filter(function(e,n){return n===t&&(t+=e+1,!0)})}function u(e){return i(e).length}function s(e){return Object.prototype.toString.call(e).split(" ")[1].slice(0,-1)}function l(e,t){function n(){t.ranges=null,e.modified()}t.classHierarchy.push("vtkDataArray"),e.getElementComponentSize=function(){return t.values.BYTES_PER_ELEMENT},e.getComponent=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.values[e*t.tuple+n]},e.setComponent=function(e,r,a){a!==t.values[e*t.tuple+r]&&(t.values[e*t.tuple+r]=a,n())},e.getData=function(){return t.values},e.getRange=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=e<0?t.tuple:e,r=null;return t.ranges||(t.ranges=o(t.ranges,t.tuple)),(r=t.ranges[n])?[r.min,r.max]:(r=t.ranges[n]=a(t.values,e),[r.min,r.max])},e.getTupleLocation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e*t.tuple},e.getBounds=function(){return 3===t.tuple?[].concat(e.getRange(0),e.getRange(1),e.getRange(2)):2!==t.tuple?(console.error("getBounds called on an array of tuple size",t.tuple,t),[1,-1,1,-1,1,-1]):[].concat(e.getRange(0),e.getRange(1))},e.getNumberOfComponents=function(){return t.tuple},e.getNumberOfValues=function(){return t.values.length},e.getNumberOfTuples=function(){return t.values.length/t.tuple},e.getDataType=function(){return t.dataType},e.getNumberOfCells=function(){return void 0!==t.numberOfCells?t.numberOfCells:(t.cellSizes=i(t.values),t.numberOfCells=t.cellSizes.length,t.numberOfCells)},e.getCellSizes=function(){return void 0!==t.cellSizes?t.cellSizes:(t.cellSizes=i(t.values),t.cellSizes)},e.setData=function(e,r){t.values=e,t.size=e.length,t.dataType=s(e),r&&(t.tuple=r),t.size%t.tuple!==0&&(t.tuple=1),n()},e.shallowCopy=function(){return m(Object.assign({},t))}}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(t,v,n),t.values&&(t.size=t.values.length,t.dataType=s(t.values)),!t.empty&&(!t.values||!t.size)||"vtkDataArray"!==t.type)throw Error("Can not create vtkDataArray object without: size > 0, values or type = vtkDataArray");t.values||(t.values=new window[t.dataType](t.size)),f.obj(e,t),f.setGet(e,t,["name"]),l(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=t.STATIC=void 0,t.extend=c;var d=n(13),f=r(d),p=n(29),g=t.STATIC={computeRange:a,extractCellSizes:i,getNumberOfCells:u,getDataType:s},v={type:"vtkDataArray",name:"",tuple:1,size:0,dataType:p.VTK_DEFAULT_DATATYPE,values:null,ranges:null},m=t.newInstance=f.newInstance(c,"vtkDataArray");t["default"]=Object.assign({newInstance:m,extend:c},g)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.VTK_BYTE_SIZE={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},r=t.VTK_DATATYPES={CHAR:"Int8Array",SIGNED_CHAR:"Int8Array",UNSIGNED_CHAR:"Uint8Array",SHORT:"Int16Array",UNSIGNED_SHORT:"Uint16Array",INT:"Int32Array",UNSIGNED_INT:"Uint32Array",FLOAT:"Float32Array",DOUBLE:"Float64Array"},a=t.VTK_DEFAULT_DATATYPE="Float32Array";t["default"]={VTK_DEFAULT_DATATYPE:a,VTK_BYTE_SIZE:n,VTK_DATATYPES:r}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return function(){return console.log("vtkMapper::"+e+" - NOT IMPLEMENTED")}}function i(e,t){t.classHierarchy.push("vtkMapper"),e.getBounds=function(){var n=e.getInputData();return n?(t["static"]||e.update(),t.bounds=n.getBounds()):t.bounds=h["default"].createUninitializedBouds(),t.bounds},e.update=function(){t["static"]||(t.inputData[0]=null),e.getInputData();
},e.setForceCompileOnly=function(e){t.forceCompileOnly=e},e.createDefaultLookupTable=function(){t.lookupTable=v["default"].newInstance()},e.getColorModeAsString=function(){return d.enumToString(T.VTK_COLOR_MODE,t.colorMode)},e.setColorModeToDefault=function(){return e.setColorMode(0)},e.setColorModeToMapScalars=function(){return e.setColorMode(1)},e.setColorModeToDirectScalars=function(){return e.setColorMode(2)},e.getScalarModeAsString=function(){return d.enumToString(T.VTK_SCALAR_MODE,t.scalarMode)},e.setScalarModeToDefault=function(){return e.setScalarMode(0)},e.setScalarModeToUsePointData=function(){return e.setScalarMode(1)},e.setScalarModeToUseCellData=function(){return e.setScalarMode(2)},e.setScalarModeToUsePointFieldData=function(){return e.setScalarMode(3)},e.setScalarModeToUseCellFieldData=function(){return e.setScalarMode(4)},e.setScalarModeToUseFieldData=function(){return e.setScalarMode(5)},Object.keys(p["default"]).forEach(function(t){e[t]=p["default"][t]}),Object.keys(M).forEach(function(t){e[t]=M[t]}),t.topologyOffset={Polygon:{factor:0,unit:0},Line:{factor:0,unit:0},Point:{factor:0,unit:0}},l.addCoincidentTopologyMethods(e,t.topologyOffset,l.CATEGORIES.map(function(e){return{key:e,method:"RelativeCoincidentTopology"+e+"OffsetParameters"}})),e.getCoincidentTopologyPolygonOffsetParameters=function(){var t=M.getResolveCoincidentTopologyPolygonOffsetParameters(),n=e.getRelativeCoincidentTopologyPolygonOffsetParameters();return{factor:t.factor+n.factor,units:t.units+n.units}},e.getCoincidentTopologyLineOffsetParameters=function(){var t=M.getResolveCoincidentTopologyLineOffsetParameters(),n=e.getRelativeCoincidentTopologyLineOffsetParameters();return{factor:t.factor+n.factor,units:t.units+n.units}},e.getCoincidentTopologyPointOffsetParameter=function(){var t=M.getResolveCoincidentTopologyPointOffsetParameters(),n=e.getRelativeCoincidentTopologyPointOffsetParameters();return{factor:t.factor+n.factor,units:t.units+n.units}},e.getAbstractScalars=function(e,t,n,r,a){if(!e)return null;var o=null;if(t===T.VTK_SCALAR_MODE.DEFAULT)o=e.getPointData().getScalars(),o||(o=e.getCellData().getScalars());else if(t===T.VTK_SCALAR_MODE.USE_POINT_DATA)o=e.getPointData().getScalars();else if(t===T.VTK_SCALAR_MODE.USE_CELL_DATA)o=e.getCellData().getScalars();else if(t===T.VTK_SCALAR_MODE.USE_POINT_FIELD_DATA){var i=e.getPointData();o=n===T.VTK_GET_ARRAY.BY_ID?i.getAbstractArray(r):i.getAbstractArray(a)}else if(t===T.VTK_SCALAR_MODE.USE_CELL_FIELD_DATA){var u=e.getCellData();o=n===T.VTK_GET_ARRAY.BY_ID?u.getAbstractArray(r):u.getAbstractArray(a)}else if(t===T.VTK_SCALAR_MODE.USE_FIELD_DATA){var s=e.getFieldData();o=n===T.VTK_GET_ARRAY.BY_ID?s.getAbstractArray(r):s.getAbstractArray(a)}return o},e.mapScalars=function(n,r){var a=e.getAbstractScalars(n,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName);if(!a)return void(t.colorMapColors=null);var o=e.getLookupTable();o&&(o.build(),t.colorMapColors=o.mapScalars(a,t.colorMode,0))},e.setScalarMaterialModeToDefault=function(){return e.setScalarMaterialMode(T.VTK_MATERIALMODE.DEFAULT)},e.setScalarMaterialModeToAmbient=function(){return e.setScalarMaterialMode(T.VTK_MATERIALMODE.AMBIENT)},e.setScalarMaterialModeToDiffuse=function(){return e.setScalarMaterialMode(T.VTK_MATERIALMODE.DIFFUSE)},e.setScalarMaterialModeToAmbientAndDiffuse=function(){return e.setScalarMaterialMode(T.VTK_MATERIALMODE.AMBIENT_AND_DIFFUSE)},e.getScalarMaterialModeAsString=function(){return d.enumToString(T.VTK_MATERIALMODE,t.scalarMaterialMode)},e.getIsOpaque=function(){var t=e.getLookupTable();return!t||(t.build(),t.isOpaque())},e.canUseTextureMapForColoring=function(e){return console.log("vtkMapper::canUseTextureMapForColoring - NOT IMPLEMENTED"),!1},e.clearColorArrays=function(){t.colorMapColors=null,t.colorCoordinates=null,t.colorTextureMap=null},e.getLookupTable=function(){return t.lookupTable||e.createDefaultLookupTable(),t.lookupTable},e.acquireInvertibleLookupTable=o("AcquireInvertibleLookupTable"),e.valueToColor=o("ValueToColor"),e.colorToValue=o("ColorToValue"),e.useInvertibleColorFor=o("UseInvertibleColorFor"),e.clearInvertibleColor=o("ClearInvertibleColor"),e.getColorModeAsString=o("getColorModeAsString"),e.getScalarModeAsString=o("GetScalarModeAsString"),e.getScalarMaterialModeAsString=o("GetScalarMaterialModeAsString"),e.scalarToTextureCoordinate=o("ScalarToTextureCoordinate"),e.createColorTextureCoordinates=o("CreateColorTextureCoordinates"),e.mapScalarsToTexture=o("MapScalarsToTexture")}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,b,n),d.obj(e,t),d.algo(e,t,1,0),d.get(e,t,["colorCoordinates","colorMapColors","colorTextureMap"]),d.setGet(e,t,["colorByArrayComponent","colorByArrayName","colorMode","fieldDataTupleId","interpolateScalarsBeforeMapping","lookupTable","renderTime","scalarMaterialMode","scalarMode","scalarVisibility","static","useLookupTableScalarRange"]),d.setGetArray(e,t,["scalarRange"],2),i(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=u;var s=n(31),l=a(s),c=n(13),d=a(c),f=n(32),p=r(f),g=n(33),v=r(g),m=n(22),h=r(m),T=n(36),y={Polygon:{factor:2,unit:2},Line:{factor:1,unit:1},Point:{factor:0,unit:0}},M={};l.addCoincidentTopologyMethods(M,y,l.CATEGORIES.map(function(e){return{key:e,method:"ResolveCoincidentTopology"+e+"OffsetParameters"}}));var b={colorMapColors:null,"static":!1,lookupTable:null,scalarVisibility:!0,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,scalarMaterialMode:0,bounds:[1,-1,1,-1,1,-1],center:[0,0],renderTime:0,colorByArrayName:null,colorByArrayComponent:-1,fieldDataTupleId:-1,interpolateScalarsBeforeMapping:!1,colorCoordinates:null,colorTextureMap:null,forceCompileOnly:0,useInvertibleColors:!1,invertibleScalars:null},C=t.newInstance=d.newInstance(u);t["default"]=Object.assign({newInstance:C,extend:u},M,p["default"])},function(e,t){"use strict";function n(e,t,n){n.forEach(function(n){e["get"+n.method]=function(){return t[n.key]},e["set"+n.method]=function(e,r){t[n.key]={factor:e,unit:r}}})}Object.defineProperty(t,"__esModule",{value:!0}),t.addCoincidentTopologyMethods=n;t.CATEGORIES=["Polygon","Line","Point"]},function(e,t){"use strict";function n(){return c}function r(e){c=e}function a(){return d}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;d=e}function i(){o(0)}function u(){o(0)}function s(){o(1)}function l(){return f[d]}Object.defineProperty(t,"__esModule",{value:!0}),t.getResolveCoincidentTopologyPolygonOffsetFaces=n,t.setResolveCoincidentTopologyPolygonOffsetFaces=r,t.getResolveCoincidentTopology=a,t.setResolveCoincidentTopology=o,t.setResolveCoincidentTopologyToDefault=i,t.setResolveCoincidentTopologyToOff=u,t.setResolveCoincidentTopologyToPolygonOffset=s,t.getResolveCoincidentTopologyAsString=l;var c=1,d=0,f=t.RESOLVE_COINCIDENT_TOPOLOGY_MODE=["VTK_RESOLVE_OFF","VTK_RESOLVE_POLYGON_OFFSET"];t["default"]={getResolveCoincidentTopologyAsString:l,getResolveCoincidentTopologyPolygonOffsetFaces:n,setResolveCoincidentTopology:o,setResolveCoincidentTopologyPolygonOffsetFaces:r,setResolveCoincidentTopologyToDefault:i,setResolveCoincidentTopologyToOff:u,setResolveCoincidentTopologyToPolygonOffset:s}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkLookupTable"),e.isOpaque=function(){if(t.opaqueFlagBuildTime.getMTime()<e.getMTime()){for(var n=!0,r=3;r<t.table.length&&n;r+=4)t.table[r]<255&&(n=!1);t.opaqueFlag=n,t.opaqueFlagBuildTime.modified()}return t.opaqueFlag},e.linearIndexLookup=function(e,t){var n=0;return e<t.range[0]?n=t.maxIndex+p+1.5:e>t.range[1]?n=t.maxIndex+g+1.5:(n=(e+t.shift)*t.scale,n=n<t.maxIndex?n:t.maxIndex),Math.floor(n)},e.linearLookup=function(t,n,r){var a=e.linearIndexLookup(t,r);return[n[4*a],n[4*a+1],n[4*a+2],n[4*a+3]]},e.lookupShiftAndScale=function(e,t){t.shift=-e[0],t.scale=Number.MAX_VALUE,e[1]>e[0]&&(t.scale=(t.maxIndex+1)/(e[1]-e[0]))},e.mapScalarsThroughTable=function(n,r,a){var o=e.getTableRange(),i={maxIndex:e.getNumberOfColors()-1,range:o,shift:0,scale:0};e.lookupShiftAndScale(o,i);var u=e.getAlpha(),s=n.getNumberOfTuples(),l=n.getNumberOfComponents(),c=r.getData(),d=n.getData();if(u>=1){if("VTK_RGBA"===a)for(var f=0;f<s;f++){var p=e.linearLookup(d[f*l],t.table,i);c[4*f]=p[0],c[4*f+1]=p[1],c[4*f+2]=p[2],c[4*f+3]=p[3]}}else if("VTK_RGBA"===a)for(var g=0;g<s;g++){var v=e.linearLookup(d[g*l],t.table,i);c[4*g]=v[0],c[4*g+1]=v[1],c[4*g+2]=v[2],c[4*g+3]=Math.floor(v[3]*u+.5)}},e.forceBuild=function(){var n=0,r=0,a=0,o=0,i=t.numberOfColors-1;i&&(n=(t.hueRange[1]-t.hueRange[0])/i,r=(t.saturationRange[1]-t.saturationRange[0])/i,a=(t.valueRange[1]-t.valueRange[0])/i,o=(t.alphaRange[1]-t.alphaRange[0])/i);for(var u=[],s=[],l=0;l<=i;l++)u[0]=t.hueRange[0]+l*n,u[1]=t.saturationRange[0]+l*r,u[2]=t.valueRange[0]+l*a,f["default"].hsv2rgb(u,s),s[3]=t.alphaRange[0]+l*o,t.table[4*l]=255*s[0]+.5,t.table[4*l+1]=255*s[1]+.5,t.table[4*l+2]=255*s[2]+.5,t.table[4*l+3]=255*s[3]+.5;e.buildSpecialColors(),t.buildTime.modified()},e.buildSpecialColors=function(){},e.build=function(){(t.table.length<1||e.getMTime()>t.buildTime.getMTime())&&e.forceBuild()}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,v,n),c["default"].extend(e,t),t.table=[],t.buildTime={},s.obj(t.buildTime),t.opaqueFlagBuildTime={},s.obj(t.opaqueFlagBuildTime),s.obj(e,t),s.get(e,t,["buildTime"]),s.setGet(e,t,["numberOfColors"]),s.setArray(e,t,["alphaRange","hueRange","saturationRange","valueRange","tableRange"],2),s.getArray(e,t,["hueRange","saturationRange","valueRange","tableRange","alphaRange"]),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=n(13),s=a(u),l=n(34),c=r(l),d=n(22),f=r(d),p=0,g=1,v={numberOfColors:256,table:null,hueRange:[0,.66667],saturationRange:[1,1],valueRange:[1,1],alphaRange:[1,1],tableRange:[0,1],alpha:1,buildTime:null,opaqueFlagBuildTime:null},m=t.newInstance=s.newInstance(i);t["default"]=Object.assign({newInstance:m,extend:i})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e}function i(e){return Math.floor(255*e+.5)}function u(e,t){t.classHierarchy.push("vtkScalarsToColors"),e.mapScalars=function(t,n,r){var a=t.getNumberOfComponents(),o=null;if(n===f.VTK_COLOR_MODE.DEFAULT&&t.getDataType()===p.VTK_DATATYPES.UNSIGNED_CHAR||n===f.VTK_COLOR_MODE.DIRECT_SCALARS&&t)o=e.convertToRGBA(t,a,t.getNumberOfTuples());else{for(var i={type:"vtkDataArray",name:"temp",tuple:4,dataType:"Uint8ClampedArray"},u=new window[i.dataType](4*t.getNumberOfTuples()),s=0;s<u.length;s++)u[s]=Math.random();i.values=u,i.size=u.length,o=v["default"].newInstance(i),e.mapScalarsThroughTable(t,o,"VTK_RGBA")}return o},e.luminanceToRGBA=function(e,t,n,r){for(var a=r(n),o=t.getData(),i=e.getData(),u=o.length,s=0,l=1,c=0,d=s;d<u;d+=l){var f=r(o[d]);i[4*c]=f,i[4*c+1]=f,i[4*c+2]=f,i[4*c+3]=a,c++}},e.luminanceAlphaToRGBA=function(e,t,n,r){for(var a=t.getData(),o=e.getData(),i=a.length,u=0,s=2,l=0,c=u;c<i;c+=s){var d=r(a[c]);o[l]=d,o[l+1]=d,o[l+2]=d,o[l+3]=r(a[c+1])*n,l+=4}},e.rGBToRGBA=function(e,t,n,r){for(var a=i(n),o=t.getData(),u=e.getData(),s=o.length,l=0,c=3,d=0,f=l;f<s;f+=c)u[4*d]=r(o[f]),u[4*d+1]=r(o[f+1]),u[4*d+2]=r(o[f+2]),u[4*d+3]=a,d++},e.rGBAToRGBA=function(e,t,n,r){for(var a=t.getData(),o=e.getData(),i=a.length,u=0,s=4,l=0,c=u;c<i;c+=s)o[4*l]=r(a[c]),o[4*l+1]=r(a[c+1]),o[4*l+2]=r(a[c+2]),e[4*l+3]=r(a[c+3])*n,l++},e.convertToRGBA=function(n,r,a){if(4===r&&t.alpha>=1&&n.getDataType()===p.VTK_DATATYPES.UNSIGNED_CHAR)return n;var u=v["default"].newInstance({tuple:4,empty:!0,size:4*a,dataType:p.VTK_DATATYPES.UNSIGNED_CHAR});if(a<=0)return u;var s=t.alpha;s=s>0?s:0,s=s<1?s:1;var l=o;switch(n.getDataType()!==p.VTK_DATATYPES.FLOAT&&n.getDataType()!==p.VTK_DATATYPES.DOUBLE||(l=i),r){case 1:e.luminanceToRGBA(u,n,s,l);break;case 2:e.luminanceAlphaToRGBA(u,n,l);break;case 3:e.rGBToRGBA(u,n,s,l);break;case 4:e.rGBAToRGBA(u,n,s,l);break;default:return console.error("Cannot convert colors"),null}return u},e.setRange=function(t,n){return e.setInputRange(t,n)}}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,m,n),c.obj(e,t),c.setGet(e,t,["vectorComponent","alpha"]),u(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=s;var l=n(13),c=a(l),d=n(35),f=n(36),p=n(29),g=n(28),v=r(g),m={alpha:1,vectorComponent:0,vectorSize:-1,vectorMode:d.VECTOR_MODE.COMPONENT,inputRange:[0,255]},h=t.newInstance=c.newInstance(s);t["default"]=Object.assign({newInstance:h,extend:s})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.VECTOR_MODE={MAGNITUDE:0,COMPONENT:1,RGBCOLORS:2};t["default"]={VECTOR_MODE:n}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.VTK_COLOR_MODE={DEFAULT:0,MAP_SCALARS:1,DIRECT_SCALARS:2},r=t.VTK_SCALAR_MODE={DEFAULT:0,USE_POINT_DATA:1,USE_CELL_DATA:2,USE_POINT_FIELD_DATA:3,USE_CELL_FIELD_DATA:4,USE_FIELD_DATA:5},a=t.VTK_MATERIALMODE={DEFAULT:0,AMBIENT:1,DIFFUSE:2,AMBIENT_AND_DIFFUSE:3},o=t.VTK_GET_ARRAY={BY_ID:0,BY_NAME:1};t["default"]={VTK_COLOR_MODE:n,VTK_MATERIALMODE:a,VTK_GET_ARRAY:o,VTK_SCALAR_MODE:r}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){function n(){t.renderable&&(t.canvas.setAttribute("width",t.size[0]),t.canvas.setAttribute("height",t.size[1])),t.canvas.style.display=t.useOffScreen?"none":"block",t.el&&(t.el.style.cursor=t.cursorVisibility?t.cursor:"none")}t.classHierarchy.push("vtkOpenGLRenderWindow"),e.onModified(n),e.build=function(n){if(n){if(!t.renderable)return;e.prepareNodes(),e.addMissingNodes(t.renderable.getRenderers()),e.removeUnusedNodes()}},e.initialize=function(){t.initialized||(t.context=e.get3DContext(),t.textureUnitManager=m["default"].newInstance(),t.textureUnitManager.setContext(t.context),t.shaderCache.setContext(t.context),t.initialized=!0)},e.makeCurrent=function(){t.context.makeCurrent()},e.frame=function(){},e.render=function(n){n?(e.initialize(),t.children.forEach(function(e){e.setContext(t.context)})):e.frame()},e.setContainer=function(n){t.el&&t.el!==n&&(t.canvas.parentNode===t.el?t.el.removeChild(t.canvas):console.log("Error: canvas parent node does not match container")),t.el!==n&&(t.el=n,t.el.appendChild(t.canvas),e.modified())},e.isInViewport=function(e,n,r){var a=r.getViewport(),o=t.size;return a[0]*o[0]<=e&&a[2]*o[0]>=e&&a[1]*o[1]<=n&&a[3]*o[1]>=n},e.getViewportSize=function(e){var n=e.getViewport(),r=t.size;return[(n[2]-n[0])*r[0],(n[3]-n[1])*r[1]]},e.getViewportCenter=function(t){var n=e.getViewportSize(t);return[.5*n[0],.5*n[1]]},e.displayToNormalizedDisplay=function(e,n,r){return[e/(t.size[0]-1),n/(t.size[1]-1),r]},e.normalizedDisplayToDisplay=function(e,n,r){return[e*(t.size[0]-1),n*(t.size[1]-1),r]},e.get2DContext=function(){return t.canvas.getContext("2d")},e.get3DContext=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{preserveDrawingBuffer:!0,premultipliedAlpha:!1};return t.canvas.getContext("webgl",e)||t.canvas.getContext("experimental-webgl",e)},e.activateTexture=function(n){var r=t.textureResourceIds.get(n);if(void 0!==r)return void t.context.activeTexture(t.context.TEXTURE0+r);var a=e.getTextureUnitManager().allocate();return a<0?void console.error("Hardware does not support the number of textures defined."):(t.textureResourceIds.set(n,a),void t.context.activeTexture(t.context.TEXTURE0+a))},e.deactivateTexture=function(n){var r=t.textureResourceIds.get(n);void 0!==r&&(e.getTextureUnitManager().free(r),delete t.textureResourceIds["delete"](n))},e.getTextureUnitForTexture=function(e){var n=t.textureResourceIds.get(e);return void 0!==n?n:-1},e.getDefaultTextureInternalFormat=function(e,n,r){switch(n){case 1:return t.context.LUMINANCE;case 2:return t.context.LUMINANCE_ALPHA;case 3:return t.context.RGB;case 4:default:return t.context.RGBA}},e.captureImage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png";return t.canvas.toDataURL(e)}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,h,n),t.canvas=document.createElement("canvas"),t.textureResourceIds=new Map,g["default"].extend(e,t),t.myFactory=c["default"].newInstance(),t.shaderCache=f["default"].newInstance(),s.get(e,t,["shaderCache","textureUnitManager"]),s.setGet(e,t,["initialized","context"]),s.setGetArray(e,t,["size"],2),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.vtkOpenGLRenderWindow=o,t.extend=i;var u=n(13),s=a(u),l=n(38),c=r(l),d=n(61),f=r(d),p=n(41),g=r(p),v=n(63),m=r(v),h={shaderCache:null,initialized:!1,context:null,canvas:null,size:[300,300],cursorVisibility:!0,cursor:"pointer",textureUnitManager:null,textureResourceIds:null},T=t.newInstance=s.newInstance(i);t["default"]={newInstance:T,extend:i}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkOpenGLViewNodeFactory")}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,I,n),c["default"].extend(e,t),o(e,t),e.registerOverride("vtkActor",f["default"].newInstance),e.registerOverride("vtkActor2D",g["default"].newInstance),e.registerOverride("vtkCamera",m["default"].newInstance),e.registerOverride("vtkImageMapper",T["default"].newInstance),e.registerOverride("vtkImageSlice",M["default"].newInstance),e.registerOverride("vtkMapper",C["default"].newInstance),e.registerOverride("vtkRenderWindow",A["default"].newInstance),e.registerOverride("vtkRenderer",O["default"].newInstance),e.registerOverride("vtkTexture",E["default"].newInstance)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.vtkOpenGLViewNodeFactory=o,t.extend=i;var u=n(13),s=a(u),l=n(39),c=r(l),d=n(40),f=r(d),p=n(42),g=r(p),v=n(43),m=r(v),h=n(44),T=r(h),y=n(58),M=r(y),b=n(59),C=r(b),x=n(37),A=r(x),P=n(60),O=r(P),S=n(53),E=r(S),I={},w=t.newInstance=s.newInstance(i);t["default"]={newInstance:w,extend:i}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e,t){t.classHierarchy.push("vtkViewNodeFactory"),e.createNode=function(n){if(Object.keys(t.overrides).indexOf(n.getClassName())===-1)return null;var r=t.overrides[n.getClassName()]();return r.setMyFactory(e),r},e.registerOverride=function(e,n){t.overrides[e]=n}}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,s,n),u.obj(e,t),a(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=o;var i=n(13),u=r(i),s={overrides:{}},l=t.newInstance=u.newInstance(o);t["default"]={newInstance:l,extend:o}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkOpenGLActor"),e.build=function(n){if(n){if(!t.renderable)return;e.prepareNodes(),e.addMissingNodes(t.renderable.getTextures()),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes()}},e.traverse=function(n){e.apply(n,!0),t.activeTextures=[],t.children.forEach(function(e){e.apply(n,!0),e.isA("vtkOpenGLTexture")&&"Render"===n&&t.activeTextures.push(e)}),t.children.forEach(function(e){e.apply(n,!1)}),e.apply(n,!1)},e.render=function(n){if(n)t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),e.preRender();else{t.children.forEach(function(e){e.isA("vtkOpenGLTexture")&&e.deactivate()});var r=0!==t.renderable.getIsOpaque();r||t.context.depthMask(!0)}},e.preRender=function(){var e=0!==t.renderable.getIsOpaque();e?t.context.depthMask(!0):t.context.depthMask(!1)},e.getKeyMatrices=function(){return t.renderable.getMTime()>t.keyMatrixTime.getMTime()&&(t.renderable.computeMatrix(),u.mat4.copy(t.MCWCMatrix,t.renderable.getMatrix()),u.mat4.transpose(t.MCWCMatrix,t.MCWCMatrix),t.renderable.getIsIdentity()?u.mat3.identity(t.normalMatrix):(u.mat3.fromMat4(t.normalMatrix,t.MCWCMatrix),u.mat3.invert(t.normalMatrix,t.normalMatrix)),t.keyMatrixTime.modified()),{mcwc:t.MCWCMatrix,normalMatrix:t.normalMatrix}}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,f,n),d["default"].extend(e,t),t.keyMatrixTime={},l.obj(t.keyMatrixTime),t.normalMatrix=u.mat3.create(),t.MCWCMatrix=u.mat4.create(),l.setGet(e,t,["context"]),l.get(e,t,["activeTextures"]),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=n(3),s=n(13),l=a(s),c=n(41),d=r(c),f={context:null,keyMatrixTime:null,normalMatrix:null,MCWCMatrix:null,activeTextures:[]},p=t.newInstance=l.newInstance(i);t["default"]={newInstance:p,extend:i}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e,t){t.classHierarchy.push("vtkViewNode"),e.build=function(e){},e.render=function(e){},e.getViewNodeFor=function(n){return t.renderable===n?e:t.children.find(function(e){var t=e.getViewNodeFor(n);return!!t})},e.getFirstAncestorOfType=function(e){return t.parent?t.parent.isA(e)?t.parent:t.parent.getFirstAncestorOfType(e):null},e.traverse=function(n){e.apply(n,!0),t.children.forEach(function(e){e.traverse(n)}),e.apply(n,!1)},e.traverseAllPasses=function(){e.traverse("Build"),e.traverse("Render")},e.apply=function(t,n){switch(t){case"Build":e.build(n);break;case"Render":e.render(n);break;default:console.log("UNKNOWN OPERATION  "+t)}},e.addMissingNode=function(t){t&&e.addMissingNodes([t])},e.addMissingNodes=function(n){if(n&&n.length){t.preparedNodes=t.preparedNodes.concat(n);var r=t.children.map(function(e){return e.getRenderable()}),a=n.filter(function(e){return e&&r.indexOf(e)===-1}).map(function(t){var n=e.createViewNode(t);return n&&(n.setParent(e),n.setRenderable(t)),n});t.children=t.children.concat(a)}},e.prepareNodes=function(){t.preparedNodes=[]},e.removeUnusedNodes=function(){t.children=t.children.filter(function(e){return t.preparedNodes.indexOf(e.getRenderable())!==-1}),e.prepareNodes()},e.createViewNode=function(e){if(!t.myFactory)return console.log("Can not create view nodes without my own factory"),null;var n=t.myFactory.createNode(e);return n&&n.setRenderable(e),n}}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,l,n),u.obj(e,t),u.event(e,t,"event"),u.setGet(e,t,["parent","renderable","myFactory"]),u.getArray(e,t,["children"]),a(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=t.PASS_TYPES=void 0,t.extend=o;var i=n(13),u=r(i),s=t.PASS_TYPES=["Build","Render"],l={parent:null,renderable:null,myFactory:null,children:[],preparedNodes:[]},c=t.newInstance=u.newInstance(o);t["default"]={newInstance:c,extend:o,PASS_TYPES:s}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkOpenGLActor2D"),e.build=function(n){if(n){if(!t.renderable)return;e.prepareNodes(),e.addMissingNodes(t.renderable.getTextures()),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes()}},e.traverse=function(n){e.apply(n,!0),t.activeTextures=[],t.children.forEach(function(e){e.apply(n,!0),e.isA("vtkOpenGLTexture")&&"Render"===n&&t.activeTextures.push(e)}),t.children.forEach(function(e){e.apply(n,!1)}),e.apply(n,!1)},e.render=function(n){if(n)t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),e.preRender();else{t.children.forEach(function(e){e.isA("vtkOpenGLTexture")&&e.deactivate()});var r=0!==t.renderable.getIsOpaque();r||t.context.depthMask(!0)}},e.preRender=function(){t.context.depthMask(!1)}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,d,n),c["default"].extend(e,t),s.setGet(e,t,["context"]),s.get(e,t,["activeTextures"]),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=n(13),s=a(u),l=n(41),c=r(l),d={context:null,activeTextures:[]},f=t.newInstance=s.newInstance(i);t["default"]={newInstance:f,extend:i}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkOpenGLCamera"),e.build=function(e){e&&!t.renderable},e.render=function(n){if(n){t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext();var r=e.getFirstAncestorOfType("vtkOpenGLRenderer");e.preRender(r)}},e.preRender=function(e){var n=e.getTiledSizeAndOrigin();t.context.viewport(n.lowerLeftU,n.lowerLeftV,n.usize,n.vsize)},e.getKeyMatrices=function(n){if(n!==t.lastRenderer||e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getMTime()>t.keyMatrixTime.getMTime()||e.getMTime()>t.keyMatrixTime.getMTime()||n.getMTime()>t.keyMatrixTime.getMTime()){t.WCVCMatrix=t.renderable.getViewTransformMatrix(),u.mat3.fromMat4(t.normalMatrix,t.WCVCMatrix),u.mat3.invert(t.normalMatrix,t.normalMatrix),u.mat4.transpose(t.WCVCMatrix,t.WCVCMatrix);var r=e.getFirstAncestorOfType("vtkOpenGLRenderer"),a=r.getAspectRatio();t.VCDCMatrix=t.renderable.getProjectionTransformMatrix(a,-1,1),u.mat4.transpose(t.VCDCMatrix,t.VCDCMatrix),t.WCDCMatrix=u.mat4.create(),u.mat4.multiply(t.WCDCMatrix,t.VCDCMatrix,t.WCVCMatrix),t.keyMatrixTime.modified(),t.lastRenderer=n}return{wcvc:t.WCVCMatrix,normalMatrix:t.normalMatrix,vcdc:t.VCDCMatrix,wcdc:t.WCDCMatrix}}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,f,n),d["default"].extend(e,t),t.keyMatrixTime={},t.normalMatrix=u.mat3.create(),l.obj(t.keyMatrixTime),l.setGet(e,t,["context","keyMatrixTime"]),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=n(3),s=n(13),l=a(s),c=n(41),d=r(c),f={context:null,lastRenderer:null,keyMatrixTime:null,normalMatrix:null},p=t.newInstance=l.newInstance(i);t["default"]={newInstance:p,extend:i}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkOpenGLImageMapper"),e.build=function(e){e&&!t.renderable},e.render=function(n){if(n){t.openGLRenderWindow=e.getFirstAncestorOfType("vtkOpenGLRenderWindow"),t.context=t.openGLRenderWindow.getContext(),t.tris.setContext(t.context),t.openGLImageSlice=e.getFirstAncestorOfType("vtkOpenGLImageSlice");var r=t.openGLImageSlice.getRenderable();t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer");var a=t.openGLRenderer.getRenderable();t.openGLCamera=t.openGLRenderer.getViewNodeFor(a.getActiveCamera()),e.renderPiece(a,r)}},e.buildShaders=function(t,n,r){e.getShaderTemplate(t,n,r),e.replaceShaderValues(t,n,r)},e.getShaderTemplate=function(e,t,n){e.Vertex=P["default"],e.Fragment=S["default"],e.Geometry=""},e.replaceShaderValues=function(e,n,r){var a=e.Vertex,o=e.Fragment;a=T["default"].substitute(a,"//VTK::Camera::Dec",["uniform mat4 MCDCMatrix;"]).result,a=T["default"].substitute(a,"//VTK::PositionVC::Impl",["  gl_Position = MCDCMatrix * vertexMC;"]).result,a=T["default"].substitute(a,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result;var i=t.openGLTexture.getComponents();switch(a=T["default"].substitute(a,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result,o=T["default"].substitute(o,"//VTK::TCoord::Dec",["varying vec2 tcoordVCVSOutput;","uniform float shift;","uniform float scale;","uniform sampler2D texture1;"]).result,i){case 1:o=T["default"].substitute(o,"//VTK::TCoord::Impl",["float intensity = texture2D(texture1, tcoordVCVSOutput).r*scale + shift;","gl_FragData[0] = vec4(intensity,intensity,intensity,1.0);"]).result;break;case 2:o=T["default"].substitute(o,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","float intensity = tcolor.r*scale + shift;","gl_FragData[0] = vec4(intensity, intensity, intensity, scale*tcolor.g + shift);"]).result;break;default:o=T["default"].substitute(o,"//VTK::TCoord::Impl","gl_FragData[0] = scale*texture2D(texture1, tcoordVCVSOutput.st) + shift;").result}e.Vertex=a,e.Fragment=o},e.getNeedToRebuildShaders=function(n,r,a){return 0===n.getProgram()||n.getShaderSourceTime().getMTime()<e.getMTime()||n.getShaderSourceTime().getMTime()<a.getMTime()||n.getShaderSourceTime().getMTime()<t.currentInput.getMTime()},e.updateShaders=function(n,r,a){if(n.getVAO().bind(),t.lastBoundBO=n,e.getNeedToRebuildShaders(n,r,a)){var o={Vertex:null,Fragment:null,Geometry:null};e.buildShaders(o,r,a);var i=t.openGLRenderWindow.getShaderCache().readyShaderProgramArray(o.Vertex,o.Fragment,o.Geometry);i!==n.getProgram()&&(n.setProgram(i),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else t.openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());e.setMapperShaderParameters(n,r,a),e.setCameraShaderParameters(n,r,a),e.setPropertyShaderParameters(n,r,a)},e.setMapperShaderParameters=function(e,n,r){e.getCABO().getElementCount()&&(t.VBOBuildTime>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())&&(e.getCABO().bind(),e.getProgram().isAttributeUsed("vertexMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"vertexMC",e.getCABO().getVertexOffset(),e.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||console.error("Error setting vertexMC in shader VAO.")),e.getProgram().isAttributeUsed("tcoordMC")&&e.getCABO().getTCoordOffset()&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"tcoordMC",e.getCABO().getTCoordOffset(),e.getCABO().getStride(),t.context.FLOAT,e.getCABO().getTCoordComponents(),t.context.FALSE)||console.error("Error setting tcoordMC in shader VAO.")));var a=t.openGLTexture.getTextureUnit();e.getProgram().setUniformi("texture1",a);var o=r.getProperty().getColorWindow(),i=r.getProperty().getColorLevel(),u=t.openGLTexture.getShiftAndScale(),s=u.scale/o,l=(u.shift-i)/o+.5;e.getProgram().setUniformf("shift",l),e.getProgram().setUniformf("scale",s)},e.setCameraShaderParameters=function(e,n,r){var a=e.getProgram(),o=t.openGLCamera.getKeyMatrices(n);a.setUniformMatrix("MCDCMatrix",o.wcdc)},e.setPropertyShaderParameters=function(e,t,n){var r=e.getProgram(),a=n.getProperty(),o=a.getOpacity();r.setUniformf("opacityUniform",o)},e.renderPieceStart=function(n,r){e.updateBufferObjects(n,r),t.lastBoundBO=null},e.renderPieceDraw=function(n,r){var a=t.context;t.openGLTexture.preRender(t.openGLRenderer),t.tris.getCABO().getElementCount()&&(e.updateShaders(t.tris,n,r),a.drawArrays(a.TRIANGLES,0,t.tris.getCABO().getElementCount())),t.openGLTexture.deactivate()},e.renderPieceFinish=function(e,n){t.LastBoundBO&&t.LastBoundBO.getVAO().release()},e.renderPiece=function(n,r){
return e.invokeEvent({type:"StartEvent"}),t.renderable.update(),t.currentInput=t.renderable.getInputData(),e.invokeEvent({type:"EndEvent"}),null===t.currentInput?void console.error("No input!"):(e.renderPieceStart(n,r),e.renderPieceDraw(n,r),void e.renderPieceFinish(n,r))},e.computeBounds=function(n,r){return e.getInput()?void(t.bounnds=e.getInput().getBounds()):void f["default"].uninitializeBounds(t.Bounds)},e.updateBufferObjects=function(t,n){e.getNeedToRebuildBufferObjects(t,n)&&e.buildBufferObjects(t,n)},e.getNeedToRebuildBufferObjects=function(n,r){return t.VBOBuildTime.getMTime()<e.getMTime()||t.VBOBuildTime.getMTime()<r.getMTime()||t.VBOBuildTime.getMTime()<r.getProperty().getMTime()||t.VBOBuildTime.getMTime()<t.currentInput.getMTime()},e.buildBufferObjects=function(n,r){var a=t.currentInput;if(null!==a){var o=a.getMTime()+"A"+a.getPointData().getScalars().getMTime()+"B"+e.getMTime();if(t.VBOBuildString!==o){t.texture.setInputData(a);for(var i=t.renderable.getBounds(),u=new Float32Array(12),s=new Float32Array(8),l=0;l<4;l++)u[3*l]=i[l%2],u[3*l+1]=i[(l>1?1:0)+2],u[3*l+2]=i[4],s[2*l]=l%2?1:0,s[2*l+1]=l>1?1:0;var c=g["default"].newInstance({tuple:3,values:u});c.setName("points");var d=g["default"].newInstance({tuple:2,values:s});d.setName("tcoords");var f=new Uint16Array(8);f[0]=3,f[1]=0,f[2]=1,f[3]=3,f[4]=3,f[5]=0,f[6]=3,f[7]=2;var p=g["default"].newInstance({tuple:1,values:f}),v=0;v+=t.tris.getCABO().createVBO(p,"polys",x.VTK_REPRESENTATION.SURFACE,{points:c,tcoords:d,cellOffset:v}),console.log("FIXME(Ken) - unused",v),t.VBOBuildTime.modified(),t.VBOBuildString=o}}}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,E,n),C["default"].extend(e,t),t.tris=c["default"].newInstance(),t.texture=M["default"].newInstance(),t.openGLTexture=m["default"].newInstance(),t.openGLTexture.setRenderable(t.texture),s.setGet(e,t,["context"]),t.VBOBuildTime={},s.obj(t.VBOBuildTime),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.vtkOpenGLImageMapper=o,t.extend=i;var u=n(13),s=a(u),l=n(45),c=r(l),d=n(22),f=r(d),p=n(28),g=r(p),v=n(53),m=r(v),h=n(50),T=r(h),y=n(55),M=r(y),b=n(41),C=r(b),x=n(20),A=n(56),P=r(A),O=n(57),S=r(O),E={context:null,VBOBuildTime:0,VBOBuildString:null,texture:null,openGLTexture:null,tris:null},I=t.newInstance=s.newInstance(i);t["default"]={newInstance:I,extend:i}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkOpenGLHelper"),e.setContext=function(e){t.program.setContext(e),t.VAO.setContext(e),t.CABO.setContext(e)}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,v,n),s.obj(e,t),t.shaderSourceTime={},s.obj(t.shaderSourceTime),t.attributeUpdateTime={},s.obj(t.attributeUpdateTime),s.setGet(e,t,["program","shaderSourceTime","VAO","attributeUpdateTime","CABO"]),t.program=f["default"].newInstance(),t.VAO=g["default"].newInstance(),t.CABO=c["default"].newInstance(),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.vtkOpenGLHelper=o,t.extend=i;var u=n(13),s=a(u),l=n(46),c=r(l),d=n(50),f=r(d),p=n(52),g=r(p),v={program:null,shaderSourceTime:null,VAO:null,attributeUpdateTime:null,CABO:null},m=t.newInstance=s.newInstance(i);t["default"]={newInstance:m,extend:i}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkOpenGLCellArrayBufferObject");var n=new f["default"]({chunkSize:65500,arrayType:"Float32Array"});e.setType(p.OBJECT_TYPE.ARRAY_BUFFER),e.createVBO=function(r,a,o,i){if(!r.getData()||!r.getData().length)return t.elementCount=0,0;t.blockSize=3,t.vertexOffset=0,t.normalOffset=0,t.tCoordOffset=0,t.tCoordComponents=0,t.colorComponents=0,t.colorOffset=0;var u=i.points.getData(),s=null,l=null,c=null,d=i.colors?i.colors.getNumberOfComponents():0,f=i.tcoords?i.tcoords.getNumberOfComponents():0;i.normals&&(t.normalOffset=4*t.blockSize,t.blockSize+=3,s=i.normals.getData()),i.tcoords&&(t.tCoordOffset=4*t.blockSize,t.tCoordComponents=f,t.blockSize+=f,l=i.tcoords.getData()),i.colors&&(t.colorComponents=i.colors.getNumberOfComponents(),t.colorOffset=4*t.blockSize,t.blockSize+=t.colorComponents,c=i.colors.getData()),t.stride=4*t.blockSize;var v=0,m=0,h=0,T=0,y=0,M=function(e){if(v=3*e,h=e*f,n.push(u[v++]),n.push(u[v++]),n.push(u[v++]),null!==s&&(m=i.haveCellNormals?3*(y+i.cellOffset):3*e,n.push(s[m++]),n.push(s[m++]),n.push(s[m++])),null!==l)for(var t=0;t<f;++t)n.push(l[h++]);if(null!==c){T=i.haveCellScalars?(y+i.cellOffset)*d:e*d;for(var r=0;r<d;++r)n.push(c[T++]/255.5)}},b={anythingToPoints:function(e,t,n){for(var r=0;r<e;++r)M(t[n+r])},linesToWireframe:function(e,t,n){for(var r=0;r<e-1;++r)M(t[n+r]),M(t[n+r+1])},polysToWireframe:function(e,t,n){for(var r=0;r<e;++r)M(t[n+r]),M(t[n+(r+1)%e])},stripsToWireframe:function(e,t,n){for(var r=0;r<e-1;++r)M(t[n+r]),M(t[n+r+1]);for(var a=0;a<e-2;a++)M(t[n+a]),M(t[n+a+2])},polysToSurface:function(e,t,n){if(e<3)console.log("skipping degenerate triangle");else for(var r=0;r<e-2;r++)M(t[n+0]),M(t[n+r+1]),M(t[n+r+2])},stripsToSurface:function(e,t,n){for(var r=0;r<e-2;r++)M(t[n+r]),M(t[n+r+1+r%2]),M(t[n+r+1+(r+1)%2])}},C=null;C=o===g.VTK_REPRESENTATION.POINTS||"verts"===a?b.anythingToPoints:o===g.VTK_REPRESENTATION.WIREFRAME||"lines"===a?b[a+"ToWireframe"]:b[a+"ToSurface"];for(var x=0,A=r.getData(),P=A.length,O=0;O<P;O++)O===x&&(C(A[O],A,x+1),x+=A[O]+1,y++);t.elementCount=n.getNumberOfElements()/t.blockSize;var S=n.getFrozenArray();return e.upload(S,p.OBJECT_TYPE.ARRAY_BUFFER),n.reset(),y},e.setCoordShiftAndScaleMethod=function(e){console.log("coordinate shift and scale not yet implemented")},e.setCoordShift=function(e){console.log("coordinate shift and scale not yet implemented")},e.setCoordScale=function(e){console.log("coordinate shift and scale not yet implemented")}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,v,n),c["default"].extend(e,t),s.get(e,t,["elementCount","stride","vertexOffset","normalOffset","tCoordOffset","tCoordComponents","colorOffset","colorComponents"]),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=n(13),s=a(u),l=n(47),c=r(l),d=n(49),f=r(d),p=n(48),g=n(20),v={elementCount:0,stride:0,vertexOffset:0,normalOffset:0,tCoordOffset:0,tCoordComponents:0,colorOffset:0,colorComponents:0},m=t.newInstance=s.newInstance(i);t["default"]={newInstance:m,extend:i}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e,t){function n(e){switch(e){case s.OBJECT_TYPE.ELEMENT_ARRAY_BUFFER:return t.context.ELEMENT_ARRAY_BUFFER;case s.OBJECT_TYPE.TEXTURE_BUFFER:if("TEXTURE_BUFFER"in t.context)return t.context.TEXTURE_BUFFER;default:case s.OBJECT_TYPE.ARRAY_BUFFER:return t.context.ARRAY_BUFFER}}t.classHierarchy.push("vtkOpenGLBufferObject");var r=null,a=null,o=!0,i="";e.getType=function(){return r},e.setType=function(e){r=e},e.getHandle=function(){return a},e.isReady=function(){return o===!1},e.generateBuffer=function(e){var o=n(e);return null===a&&(a=t.context.createBuffer(),r=e),n(r)===o},e.upload=function(u,s){var l=e.generateBuffer(s);return l?(t.context.bindBuffer(n(r),a),t.context.bufferData(n(r),u,t.context.STATIC_DRAW),o=!1,!0):(i="Trying to upload array buffer to incompatible buffer.",!1)},e.bind=function(){return!!a&&(t.context.bindBuffer(n(r),a),!0)},e.release=function(){return!!a&&(t.context.bindBuffer(n(r),null),!0)},e.releaseGraphicsResources=function(){null!==a&&(t.context.bindBuffer(n(r),null),t.context.deleteBuffers(a),a=null)},e.getError=function(){return i}}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,c,n),u.obj(e,t),u.setGet(e,t,["context"]),a(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=t.STATIC=void 0,t.extend=o;var i=n(13),u=r(i),s=n(48),l=t.STATIC={},c={objectType:s.OBJECT_TYPE.ARRAY_BUFFER,context:null},d=t.newInstance=u.newInstance(o);t["default"]=Object.assign({newInstance:d,extend:o},l)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.OBJECT_TYPE={ARRAY_BUFFER:0,ELEMENT_ARRAY_BUFFER:1,TEXTURE_BUFFER:2};t["default"]={OBJECT_TYPE:n}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.chunkSize,a=void 0===r?65536:r,o=t.arrayType,i=void 0===o?"Int32Array":o;n(this,e),this.ArrayConstructor=window[i],this.chunkSize=a,this.reset()}return r(e,[{key:"reset",value:function(){this.chunkContainer=[],this.chunkContainer.push(new this.ArrayConstructor(this.chunkSize)),this.lastChunkItemCount=0}},{key:"push",value:function(e){this.lastChunkItemCount===this.chunkSize&&(this.chunkContainer.push(new this.ArrayConstructor(this.chunkSize)),this.lastChunkItemCount=0),this.chunkContainer[this.chunkContainer.length-1][this.lastChunkItemCount]=e,this.lastChunkItemCount+=1}},{key:"getNumberOfElements",value:function(){return(this.chunkContainer.length-1)*this.chunkSize+this.lastChunkItemCount}},{key:"getFrozenArray",value:function(){for(var e=new this.ArrayConstructor(this.getNumberOfElements()),t=0;t<this.chunkContainer.length-1;++t)e.set(this.chunkContainer[t],t*this.chunkSize);var n=this.chunkContainer.length-1;if(this.lastChunkItemCount<this.chunkSize){var r=this.chunkContainer[n].buffer,a=this.lastChunkItemCount,o=new this.ArrayConstructor(r,0,a);e.set(o,n*this.chunkSize)}else e.set(this.chunkContainer[n],n*this.chunkSize);return e}}]),e}();t["default"]=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=Array.isArray(n)?n.join("\n"):n,o=!1;e.search(t)!==-1&&(o=!0);var i="";r&&(i="g");var u=new RegExp(t,i),s=e.replace(u,a);return{replace:o,result:s}}function i(e,t){t.classHierarchy.push("vtkShaderProgram"),e.compileShader=function(){return t.vertexShader.compile()?t.fragmentShader.compile()?e.attachShader(t.vertexShader)&&e.attachShader(t.fragmentShader)?e.link()?(e.setCompiled(!0),1):(console.log("Links failed: "+t.error),0):(console.log(t.error),0):(console.log(t.fragmentShader.getSource().split("\n").map(function(e,t){return t+": "+e}).join("\n")),console.log(t.fragmentShader.getError()),0):(console.log(t.vertexShader.getSource().split("\n").map(function(e,t){return t+": "+e}).join("\n")),console.log(t.vertexShader.getError()),0)},e.cleanup=function(){"Unknown"!==t.shaderType&&0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0)},e.bind=function(){return!(!t.linked&&!t.link())&&(t.context.useProgram(t.handle),e.setBound(!0),!0)},e.isBound=function(){return!!t.bound},e.release=function(){t.context.useProgram(null),e.setBound(!1)},e.setContext=function(e){t.vertexShader.setContext(e),t.fragmentShader.setContext(e),t.geometryShader.setContext(e)},e.link=function(){if(t.inked)return!0;if(0===t.handle)return t.error="Program has not been initialized, and/or does not have shaders.",!1;t.uniformLocs={},t.context.linkProgram(t.handle);var n=t.context.getProgramParameter(t.handle,t.context.LINK_STATUS);if(!n){var r=t.context.getProgramInfoLog(t.handle);return console.error("Error linking shader "+r),t.handle=0,!1}return e.setLinked(!0),t.attributeLocs={},!0},e.setUniformf=function(n,r){var a=e.findUniform(n);return a===-1?(t.error="Could not set uniform "+n+" . No such uniform.",!1):(t.context.uniform1f(a,r),!0)},e.setUniformi=function(n,r){var a=e.findUniform(n);return a===-1?(t.error="Could not set uniform "+n+" . No such uniform.",!1):(t.context.uniform1i(a,r),!0)},e.setUniformMatrix=function(n,r){var a=e.findUniform(n);return a===-1?(t.error="Could not set uniform "+n+" . No such uniform.",!1):(t.context.uniformMatrix4fv(a,!1,r),!0)},e.setUniformMatrix3x3=function(n,r){var a=e.findUniform(n);return a===-1?(t.error="Could not set uniform "+n+" . No such uniform.",!1):(t.context.uniformMatrix3fv(a,!1,r),!0)},e.setUniform3f=function(n,r){var a=e.findUniform(n);return a===-1?(t.error="Could not set uniform "+n+" . No such uniform.",!1):(t.context.uniform3f(a,r[0],r[1],r[2]),!0)},e.setUniform3fv=function(n,r,a){var o=e.findUniform(n);return o===-1?(t.error="Could not set uniform "+n+" . No such uniform.",!1):(t.context.uniform3fv(o,r,a),!0)},e.findUniform=function(e){if(!e||!t.linked)return-1;var n=Object.keys(t.uniformLocs).indexOf(e);return n!==-1?t.uniformLocs[e]:(n=t.context.getUniformLocation(t.handle,e),null===n&&(t.error="Uniform "+e+" not found in current shader program."),t.uniformLocs[e]=n,n)},e.isUniformUsed=function(e){if(!e)return!1;var n=Object.keys(t.uniformLocs).indexOf(e);return n!==-1||(t.linked?(n=t.context.getUniformLocation(t.handle,e),null!==n&&(t.uniformLocs[e]=n,!0)):(console.log("attempt to find uniform when the shader program is not linked"),!1))},e.isAttributeUsed=function(e){if(!e)return!1;var n=Object.keys(t.attributeLocs).indexOf(e);return n!==-1||(t.linked?(n=t.context.getAttribLocation(t.handle,e),n!==-1&&(t.attributeLocs[e]=n,!0)):(console.log("attempt to find uniform when the shader program is not linked"),!1))},e.attachShader=function(n){if(0===n.getHandle())return t.error="Shader object was not initialized, cannot attach it.",!1;if("Unknown"===n.getShaderType())return t.error="Shader object is of type Unknown and cannot be used.",!1;if(0===t.handle){var r=t.context.createProgram();if(0===r)return t.error="Could not create shader program.",!1;t.handle=r,t.linked=!1}return"Vertex"===n.getShaderType()&&(0!==t.vertexShaderHandle&&t.comntext.detachShader(t.handle,t.vertexShaderHandle),t.vertexShaderHandle=n.getHandle()),"Fragment"===n.getShaderType()&&(0!==t.fragmentShaderHandle&&t.context.detachShader(t.handle,t.fragmentShaderHandle),t.fragmentShaderHandle=n.getHandle()),t.context.attachShader(t.handle,n.getHandle()),e.setLinked(!1),!0},e.detachShader=function(e){if(0===e.getHandle())return t.error="shader object was not initialized, cannot attach it.",!1;if("Unknown"===e.getShaderType())return t.error="Shader object is of type Unknown and cannot be used.",!1;switch(0===t.handle&&(t.errror="This shader prorgram has not been initialized yet."),e.getShaderType()){case"Vertex":return t.vertexShaderHandle!==e.getHandle()?(t.error="The supplied shader was not attached to this program.",!1):(t.context.detachShader(t.handle,e.getHandle()),t.vertexShaderHandle=0,t.linked=!1,!0);case"Fragment":return t.fragmentShaderHandle!==e.getHandle()?(t.error="The supplied shader was not attached to this program.",!1):(t.context.detachShader(t.handle,e.getHandle()),t.fragmentShaderHandle=0,t.linked=!1,!0);default:return!1}},e.setContext=function(e){t.context=e,t.vertexShader.setContext(e),t.fragmentShader.setContext(e),t.geometryShader.setContext(e)}}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,f,n),t.attributesLocs={},t.uniformLocs={},t.vertexShader=d["default"].newInstance(),t.vertexShader.setShaderType("Vertex"),t.fragmentShader=d["default"].newInstance(),t.fragmentShader.setShaderType("Fragment"),t.geometryShader=d["default"].newInstance(),t.geometryShader.setShaderType("Geometry"),l.obj(e,t),l.setGet(e,t,["error","handle","compiled","bound","md5Hash","vertexShader","fragmentShader","geometryShader","linked"]),i(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.substitute=o,t.vtkShaderProgram=i,t.extend=u;var s=n(13),l=a(s),c=n(51),d=r(c),f={vertexShaderHandle:0,fragmentShaderHandle:0,geometryShaderHandle:0,vertexShader:null,fragmentShader:null,geometryShader:null,linked:!1,bound:!1,compiled:!1,error:"",handle:0,numberOfOutputs:0,attributesLocs:null,uniformLocs:null,md5Hash:0,context:null},p=t.newInstance=l.newInstance(u);t["default"]={newInstance:p,extend:u,substitute:o}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e,t){t.classHierarchy.push("vtkShader"),e.compile=function(){var e=t.context.VERTEX_SHADER;if(!t.source||!t.source.length||"Unknown"===t.shaderType)return!1;switch(0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0),t.shaderType){case"Fragment":e=t.context.FRAGMENT_SHADER;break;case"Vertex":default:e=t.context.VERTEX_SHADER}t.handle=t.context.createShader(e),t.context.shaderSource(t.handle,t.source),t.context.compileShader(t.handle);var n=t.context.getShaderParameter(t.handle,t.context.COMPILE_STATUS);if(!n){var r=t.context.getShaderInfoLog(t.handle);return console.error("Error compiling shader '"+t.source+"': "+r),t.context.deleteShader(t.handle),t.handle=0,!1}return!0},e.cleanup=function(){"Unknown"!==t.shaderType&&0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0,t.dirty=!0)}}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,s,n),u.obj(e,t),u.setGet(e,t,["shaderType","source","error","handle","context"]),a(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.vtkShader=a,t.extend=o;var i=n(13),u=r(i),s={shaderType:"Unknown",source:"",error:"",handle:0,dirty:!1,context:null},l=t.newInstance=u.newInstance(o);t["default"]={newInstance:l,extend:o}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){t.classHierarchy.push("vtkOpenGLVertexArrayObject"),e.exposedMethod=function(){},e.initialize=function(){t.extension=t.context.getExtension("OES_vertex_array_object"),!t.forceEmulation&&t.extension?(t.supported=!0,t.handleVAO=t.extension.createVertexArrayOES()):t.supported=!1},e.isReady=function(){return 0!==t.handleVAO||t.supported===!1},e.bind=function(){e.isReady()||e.initialize(),e.isReady()&&t.supported?t.extension.bindVertexArrayOES(t.handleVAO):e.isReady()&&!function(){var e=t.context;Object.keys(t.buffers).map(function(e){return t.buffers[e]}).forEach(function(n){t.context.bindBuffer(e.ARRAY_BUFFER,n.buffer),Object.keys(n.attributes).map(function(e){return n.attributes[e]}).forEach(function(t){for(var n=t.isMatrix?t.size:1,r=0;r<n;++r)e.enableVertexAttribArray(t.index+r),e.vertexAttribPointer(t.index+r,t.size,t.type,t.normalize,t.stride,t.offset+t.stride*r/t.size),t.divisor>0&&e.vertexAttribDivisor(t.index+r,1)})})}()},e.release=function(){e.isReady()&&t.supported?t.extension.bindVertexArrayOES(null):e.isReady()&&!function(){var e=t.context;Object.keys(t.buffers).map(function(e){return t.buffers[e]}).forEach(function(t){Object.keys(t.attributes).map(function(e){return t.attributes[e]}).forEach(function(t){for(var n=t.isMatrix?t.size:1,r=0;r<n;++r)e.enableVertexAttribArray(t.index+r),e.vertexAttribPointer(t.index+r,t.size,t.type,t.normalize,t.stride,t.offset+t.stride*r/t.size),t.divisor>0&&e.vertexAttribDivisor(t.index+r,0),e.disableVertexAttribArray(t.index+r)})})}()},e.shaderProgramChanged=function(){e.release(),t.handleVAO&&t.extension.deleteVertexArrayOES(t.handleVAO),t.handleVAO=0,t.handleProgram=0},e.releaseGraphicsResources=function(){e.shaderProgramChanged(),t.handleVAO&&t.extension.deleteVertexArrayOES(t.handleVAO),t.handleVAO=0,t.supported=!0,t.handleProgram=0},e.addAttributeArray=function(t,n,r,a,o,i,u,s){return e.addAttributeArrayWithDivisor(t,n,r,a,o,i,u,s,0,!1)},e.addAttributeArrayWithDivisor=function(n,r,o,i,u,s,c,d,f,p){if(!n)return!1;if(!n.isBound()||0===r.getHandle()||r.getType()!==l.OBJECT_TYPE.ARRAY_BUFFER)return!1;if(0===t.handleProgram&&(t.handleProgram=n.getHandle()),e.isReady()||e.initialize(),!e.isReady()||t.handleProgram!==n.getHandle())return!1;var g=t.context,v={};if(v.index=g.getAttribLocation(t.handleProgram,o),v.offset=i,v.stride=u,v.type=s,v.size=c,v.normalize=d,v.isMatrix=p,v.divisor=f,v.Index===-1)return!1;if(r.bind(),g.enableVertexAttribArray(v.index),g.vertexAttribPointer(v.index,v.size,v.type,v.normalize,v.stride,v.offset),f>0&&g.vertexAttribDivisor(v.index,1),!t.supported){var m=r.getHandle();Object.keys(t.buffers).indexOf(m)!==-1?(t.buffers[m].attributes[v.index]=v,t.buffers[m].buffer=m):t.buffers[m]={buffer:m,attributes:a({},v.index,v)}}return!0},e.addAttributeMatrixWithDivisor=function(n,r,a,o,i,u,s,l,c){var d=e.addAttributeArrayWithDivisor(n,r,a,o,i,u,s,l,c,!0);if(!d)return d;for(var f=t.context,p=f.getAttribLocation(t.handleProgram,a),g=1;g<s;g++)f.enableVertexAttribArray(p+g),f.vertexAttribPointer(p+g,s,u,l,i,o+i*g/s),c>0&&f.vertexAttribDivisor(p+g,1);return!0},e.removeAttributeArray=function(n){if(!e.isReady()||0===t.handleProgram)return!1;var r=t.context,a=r.getAttribLocation(t.handleProgram,n);return a!==-1&&(r.disableVertexAttribArray(a),t.supported||Object.keys(t.buffers).map(function(e){return t.buffers[e]}).forEach(function(e){delete e.attributes[a]}),!0)}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,c,n),t.buffers={},s.obj(e,t),s.get(e,t,["supported"]),s.setGet(e,t,["context","forceEmulation"]),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=n(13),s=r(u),l=n(48),c={forceEmulation:!1,handleVAO:0,handleProgram:0,supported:!0,buffers:null,context:null},d=t.newInstance=s.newInstance(i);t["default"]={newInstance:d,extend:i}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){var n=this;t.classHierarchy.push("vtkOpenGLTexture"),e.build=function(e){e&&!t.renderable},e.render=function(t){if(t){var n=e.getFirstAncestorOfType("vtkOpenGLRenderer");e.preRender(n)}},e.preRender=function(n){if(t.window=n.getParent(),t.context=t.window.getContext(),t.renderable.getInterpolate()?(t.generateMipmap?e.setMinificationFilter(l.VTK_FILTER.LINEAR_MIPMAP_LINEAR):e.setMinificationFilter(l.VTK_FILTER.LINEAR),e.setMagnificationFilter(l.VTK_FILTER.LINEAR)):(e.setMinificationFilter(l.VTK_FILTER.NEAREST),e.setMagnificationFilter(l.VTK_FILTER.NEAREST)),t.handle)e.activate();else{var r=t.renderable.getInputData(),a=r.getExtent(),o=r.getPointData().getScalars();t.renderable.getInterpolate()&&(t.generateMipmap=!0,e.setMinificationFilter(l.VTK_FILTER.LINEAR_MIPMAP_LINEAR)),e.create2DFromRaw(a[1]-a[0]+1,a[3]-a[2]+1,o.getNumberOfComponents(),o.getDataType(),o.getData()),e.activate(),e.sendParameters()}},e.destroyTexture=function(){e.deactivate(),t.context&&t.handle&&t.context.deleteTexture(t.handle),t.handle=0,t.numberOfDimensions=0,t.target=0,t.components=0,t.width=0,t.height=0,t.depth=0,e.resetFormatAndType()},e.createTexture=function(){t.handle||(t.handle=t.context.createTexture(),t.target&&(t.context.bindTexture(t.target,t.handle),t.context.texParameteri(t.target,t.context.TEXTURE_MIN_FILTER,e.getOpenGLFilterMode(t.minificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_MAG_FILTER,e.getOpenGLFilterMode(t.magnificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_S,e.getOpenGLWrapMode(t.wrapS)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_T,e.getOpenGLWrapMode(t.wrapT)),t.context.bindTexture(t.target,null)))},e.getTextureUnit=function(){return t.window?t.window.getTextureUnitForTexture(e):-1},e.activate=function(){t.window.activateTexture(e),e.bind()},e.deactivate=function(){t.window&&(t.window.activateTexture(e),e.unBind(),t.window.deactivateTexture(e))},e.releaseGraphicsResources=function(n){n&&t.handle&&(n.makeCurrent(),n.activateTexture(e),e.unBind(),n.deactivateTexture(e),t.context.deleteTexture(t.handle),t.handle=0,t.numberOfDimensions=0,t.target=0,t.internalFormat=0,t.format=0,t.openGLDataType=0,t.components=0,t.width=0,t.height=0,t.depth=0),t.shaderProgram&&(t.shaderProgram.releaseGraphicsResources(n),t.shaderProgram=null)},e.bind=function(){t.context.bindTexture(t.target,t.handle),t.autoParameters&&e.getMTime()>t.sendParametersTime.getMTime()&&e.sendParameters()},e.unBind=function(){t.target&&t.context.bindTexture(t.target,null)},e.isBound=function(){var e=!1;if(t.context&&t.handle){var n=0;switch(t.target){case t.context.TEXTURE_2D:n=t.context.TEXTURE_BINDING_2D;break;default:console.warn("impossible case")}var r=t.context.getIntegerv(n);e=r===t.handle}return e},e.sendParameters=function(){t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_S,e.getOpenGLWrapMode(t.wrapS)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_T,e.getOpenGLWrapMode(t.wrapT)),t.context.texParameteri(t.target,t.context.TEXTURE_MIN_FILTER,e.getOpenGLFilterMode(t.minificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_MAG_FILTER,e.getOpenGLFilterMode(t.magnificationFilter)),t.sendParametersTime.modified()},e.getInternalFormat=function(n,r){return t.internalFormat?t.internalFormat:(t.internalFormat=e.getDefaultInternalFormat(n,r),t.internalFormat||console.debug("Unable to find suitable internal format for T="+n+" NC= "+r),t.internalFormat)},e.getDefaultInternalFormat=function(e,r){var a=0;return(a=t.window.getDefaultTextureInternalFormat(e,r,!1))?a:(a=n.window.getDefaultTextureInternalFormat(e,r,!0),a||(console.debug("Unsupported internal texture type!"),console.debug("Unable to find suitable internal format for T="+e+" NC= "+r)),a)},e.setInternalFormat=function(n){n!==t.context.InternalFormat&&(t.internalFormat=n,e.modified())},e.getFormat=function(n,r){return t.format||(t.format=e.getDefaultFormat(n,r)),t.format},e.getDefaultFormat=function(e,n){switch(n){case 1:return t.context.LUMINANCE;case 2:return t.context.LUMINANCE_ALPHA;case 3:return t.context.RGB;case 4:return t.context.RGBA;default:return t.context.RGB}},e.resetFormatAndType=function(){t.format=0,t.internalFormat=0,t.openGLDataType=0},e.getDefaultDataType=function(e){switch(e){case c.VTK_DATATYPES.UNSIGNED_CHAR:return t.context.UNSIGNED_BYTE;case c.VTK_DATATYPES.FLOAT:case c.VTK_DATATYPES.VOID:default:return t.context.getExtension("OES_texture_float")?t.context.FLOAT:t.context.UNSIGNED_BYTE}},e.getOpenGLDataType=function(n){return t.openGLDataType||(t.openGLDataType=e.getDefaultDataType(n)),t.openGLDataType},e.getShiftAndScale=function(){var e=0,n=1;switch(t.openGLDataType){case t.context.BYTE:n=127.5,e=n-128;break;case t.context.UNSIGNED_BYTE:n=255,e=0;break;case t.context.SHORT:n=32767.5,e=n-32768;break;case t.context.UNSIGNED_SHORT:n=65536,e=0;break;case t.context.INT:n=2147483647.5,e=n-2147483648;break;case t.context.UNSIGNED_INT:n=4294967295,e=0;break;case t.context.FLOAT:}return{shift:e,scale:n}},e.getOpenGLFilterMode=function(e){switch(e){case l.VTK_FILTER.NEAREST:return t.context.NEAREST;case l.VTK_FILTER.LINEAR:return t.context.LINEAR;case l.VTK_FILTER.NEAREST_MIPMAP_NEAREST:return t.context.NEAREST_MIPMAP_NEAREST;case l.VTK_FILTER.NEAREST_MIPMAP_LINEAR:return t.context.NEAREST_MIPMAP_LINEAR;case l.VTK_FILTER.LINEAR_MIPMAP_NEAREST:return t.context.LINEAR_MIPMAP_NEAREST;case l.VTK_FILTER.LINEAR_MIPMAP_LINEAR:return t.context.LINEAR_MIPMAP_LINEAR;default:return t.context.NEAREST}},e.getOpenGLWrapMode=function(e){switch(e){case l.VTK_WRAP.CLAMP_TO_EDGE:return t.context.CLAMP_TO_EDGE;case l.VTK_WRAP.REPEAT:return t.context.REPEAT;case l.VTK_WRAP.MIRRORED_REPEAT:return t.context.MIRRORED_REPEAT;default:return t.context.CLAMP_TO_EDGE}},e.create2DFromRaw=function(n,r,a,o,i){if(e.getOpenGLDataType(o),e.getInternalFormat(o,a),e.getFormat(o,a),!t.internalFormat||!t.format||!t.openGLDataType)return console.error("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=a,t.width=n,t.height=r,t.depth=1,t.numberOfDimensions=2,t.window.activateTexture(e),e.createTexture(),e.bind();var u=i;if(o!==c.VTK_DATATYPES.FLOAT&&t.openGLDataType===t.context.FLOAT){for(var s=t.width*t.height*t.components,l=new Float32Array(s),d=0;d<s;d++)l[d]=i[d];u=l}if(o!==c.VTK_DATATYPES.UNSIGNED_CHAR&&t.openGLDataType===t.context.UNSIGNED_BYTE){for(var f=t.width*t.height*t.components,p=new Uint8Array(f),g=0;g<f;g++)p[g]=i[g];u=p}return t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,u),t.generateMipmap&&t.context.generateMipmap(t.target),e.deactivate(),!0},e.getMaximumTextureSize=function(e){return e&&e.isCurrent()?e.getIntegerv(e.MAX_TEXTURE_SIZE):-1}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,p,n),f["default"].extend(e,t),t.sendParametersTime={},s.obj(t.sendParametersTime),s.set(e,t,["format","openGLDataType"]),s.setGet(e,t,["context","keyMatrixTime","minificationFilter","magnificationFilter"]),s.get(e,t,["components"]),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=n(13),s=a(u),l=n(54),c=n(29),d=n(41),f=r(d),p={context:null,handle:0,sendParametersTime:null,numberOfDimensions:0,target:0,format:0,openGLDataType:0,components:0,width:0,height:0,depth:0,autoParameters:!0,wrapS:l.VTK_WRAP.CLAMP_TO_EDGE,wrapT:l.VTK_WRAP.CLAMP_TO_EDGE,wrapR:l.VTK_WRAP.CLAMP_TO_EDGE,minificationFilter:l.VTK_FILTER.NEAREST,magnificationFilter:l.VTK_FILTER.NEAREST,minLOD:-1e3,maxLOD:1e3,baseLevel:0,maxLevel:0,generateMipmap:!1},g=t.newInstance=s.newInstance(i);t["default"]={newInstance:g,extend:i}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.VTK_WRAP={CLAMP_TO_EDGE:0,REPEAT:1,MIRRORED_REPEAT:2},r=t.VTK_FILTER={NEAREST:0,LINEAR:1,NEAREST_MIPMAP_NEAREST:2,NEAREST_MIPMAP_LINEAR:3,LINEAR_MIPMAP_NEAREST:4,LINEAR_MIPMAP_LINEAR:5};t["default"]={VTK_WRAP:n,VTK_FILTER:r}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e,t){t.classHierarchy.push("vtkTexture")}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,s,n),u.obj(e,t),u.algo(e,t,1,0),u.setGet(e,t,["repeat","edgeClamp","interpolate"]),a(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=o;var i=n(13),u=r(i),s={repeat:!1,interpolate:!1,edgeClamp:!1},l=t.newInstance=u.newInstance(o);t["default"]={newInstance:l,extend:o}},function(e,t){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\nattribute vec4 vertexMC;\n\n// frag position in VC\n//VTK::PositionVC::Dec\n\n// optional normal declaration\n//VTK::Normal::Dec\n\n// extra lighting parameters\n//VTK::Light::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// material property values\n//VTK::Color::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// camera and actor matrix values\n//VTK::Camera::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\nvoid main()\n{\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Clip::Impl\n\n  //VTK::PrimID::Impl\n\n  //VTK::PositionVC::Impl\n\n  //VTK::Light::Impl\n}\n";
},function(e,t){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// Template for the polydata mappers fragment shader\n\nuniform int PrimitiveIDOffset;\n\n// VC position of this fragment\n//VTK::PositionVC::Dec\n\n// optional color passed in from the vertex shader, vertexColor\n//VTK::Color::Dec\n\n// optional surface normal declaration\n//VTK::Normal::Dec\n\n// extra lighting parameters\n//VTK::Light::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// picking support\n//VTK::Picking::Dec\n\n// Depth Peeling Support\n//VTK::DepthPeeling::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// the output of this shader\n//VTK::Output::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\n// handle coincident offsets\n//VTK::Coincident::Dec\n\nvoid main()\n{\n  // VC position of this fragment. This should not branch/return/discard.\n  //VTK::PositionVC::Impl\n\n  // Place any calls that require uniform flow (e.g. dFdx) here.\n  //VTK::UniformFlow::Impl\n\n  // Early depth peeling abort:\n  //VTK::DepthPeeling::PreColor\n\n  // Apple Bug\n  //VTK::PrimID::Impl\n\n  //VTK::Clip::Impl\n\n  //VTK::Color::Impl\n\n  // Generate the normal if we are not passed in one\n  //VTK::Normal::Impl\n\n  //VTK::Light::Impl\n\n  //VTK::TCoord::Impl\n\n  if (gl_FragData[0].a <= 0.0)\n    {\n    discard;\n    }\n\n  //VTK::DepthPeeling::Impl\n\n  //VTK::Picking::Impl\n\n  // handle coincident offsets\n  //VTK::Coincident::Impl\n}\n"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkOpenGLImageSlice"),e.build=function(n){if(n){if(!t.renderable)return;e.prepareNodes(),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes()}},e.render=function(n){if(n)t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),e.preRender();else{var r=0!==t.renderable.getIsOpaque();r||t.context.depthMask(!0)}},e.preRender=function(){var e=0!==t.renderable.getIsOpaque();e?t.context.depthMask(!0):t.context.depthMask(!1)},e.getKeyMatrices=function(){return t.renderable.getMTime()>t.keyMatrixTime.getMTime()&&(t.renderable.computeMatrix(),u.mat4.copy(t.MCWCMatrix,t.renderable.getMatrix()),u.mat4.transpose(t.MCWCMatrix,t.MCWCMatrix),t.renderable.getIsIdentity()?u.mat3.identity(t.normalMatrix):(u.mat3.fromMat4(t.normalMatrix,t.MCWCMatrix),u.mat3.invert(t.normalMatrix,t.normalMatrix)),t.keyMatrixTime.modified()),{mcwc:t.MCWCMatrix,normalMatrix:t.normalMatrix}}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,f,n),d["default"].extend(e,t),t.keyMatrixTime={},l.obj(t.keyMatrixTime),t.normalMatrix=u.mat3.create(),t.MCWCMatrix=u.mat4.create(),l.setGet(e,t,["context"]),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=n(3),s=n(13),l=a(s),c=n(41),d=r(c),f={context:null,keyMatrixTime:null,normalMatrix:null,MCWCMatrix:null},p=t.newInstance=l.newInstance(i);t["default"]={newInstance:p,extend:i}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkOpenGLPolyDataMapper"),e.build=function(e){e&&!t.renderable},e.render=function(n){if(n){t.openGLRenderWindow=e.getFirstAncestorOfType("vtkOpenGLRenderWindow"),t.context=t.openGLRenderWindow.getContext(),t.points.setContext(t.context),t.lines.setContext(t.context),t.tris.setContext(t.context),t.triStrips.setContext(t.context),t.openGLActor=e.getFirstAncestorOfType("vtkOpenGLActor");var r=t.openGLActor.getRenderable(),a=e.getFirstAncestorOfType("vtkOpenGLRenderer"),o=a.getRenderable();t.openGLCamera=a.getViewNodeFor(o.getActiveCamera()),e.renderPiece(o,r)}},e.buildShaders=function(t,n,r){e.getShaderTemplate(t,n,r),e.replaceShaderValues(t,n,r)},e.getShaderTemplate=function(e,t,n){e.Vertex=b["default"],e.Fragment=x["default"],e.Geometry=""},e.replaceShaderColor=function(e,n,r){var a=e.Vertex,o=e.Geometry,i=e.Fragment,u=t.lastLightComplexity.get(t.lastBoundBO),s=["uniform float opacityUniform; // the fragment opacity","uniform vec3 ambientColorUniform; // intensity weighted color","uniform vec3 diffuseColorUniform; // intensity weighted color"];u&&(s=s.concat(["uniform vec3 specularColorUniform; // intensity weighted color","uniform float specularPowerUniform;"]));var l=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];u&&(l=l.concat(["  vec3 specularColor;","  float specularPower;"])),l=l.concat(["  ambientColor = ambientColorUniform;","  diffuseColor = diffuseColorUniform;","  opacity = opacityUniform;"]),u&&(l=l.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),0!==t.lastBoundBO.getCABO().getColorComponents()&&(s=s.concat(["varying vec4 vertexColorVSOutput;"]),a=v["default"].substitute(a,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,a=v["default"].substitute(a,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,o=v["default"].substitute(o,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,o=v["default"].substitute(o,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result);var c=t.renderable.getScalarMaterialMode();i=0!==t.lastBoundBO.getCABO().getColorComponents()?c===y.VTK_MATERIALMODE.AMBIENT||c===y.VTK_MATERIALMODE.DEFAULT&&r.getProperty().getAmbient()>r.getProperty().getDiffuse()?v["default"].substitute(i,"//VTK::Color::Impl",l.concat(["  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result:c===y.VTK_MATERIALMODE.DIFFUSE||c===y.VTK_MATERIALMODE.DEFAULT&&r.getProperty().getAmbient()<=r.getProperty().getDiffuse()?v["default"].substitute(i,"//VTK::Color::Impl",l.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result:v["default"].substitute(i,"//VTK::Color::Impl",l.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result:v["default"].substitute(i,"//VTK::Color::Impl",l).result,i=v["default"].substitute(i,"//VTK::Color::Dec",s).result,e.Vertex=a,e.Geometry=o,e.Fragment=i},e.replaceShaderLight=function(e,n,r){var a=e.Fragment,o="",i=t.lastLightComplexity.get(t.lastBoundBO);switch(i){case 0:a=v["default"].substitute(a,"//VTK::Light::Impl",["  gl_FragData[0] = vec4(ambientColor + diffuseColor, opacity);","  //VTK::Light::Impl"],!1).result;break;case 1:a=v["default"].substitute(a,"//VTK::Light::Impl",["  float df = max(0.0, normalVCVSOutput.z);","  float sf = pow(df, specularPower);","  vec3 diffuse = df * diffuseColor;","  vec3 specular = sf * specularColor;","  gl_FragData[0] = vec4(ambientColor + diffuse + specular, opacity);","  //VTK::Light::Impl"],!1).result;break;case 2:a=v["default"].substitute(a,"//VTK::Light::Dec",["uniform int numberOfLights;","uniform vec3 lightColor[6];","uniform vec3 lightDirectionVC[6]; // normalized","uniform vec3 lightHalfAngleVC[6]; // normalized"]).result,a=v["default"].substitute(a,"//VTK::Light::Impl",["vec3 diffuse = vec3(0,0,0);","  vec3 specular = vec3(0,0,0);","  for (int lightNum = 0; lightNum < numberOfLights; lightNum++)","    {","    float df = max(0.0, dot(normalVCVSOutput, -lightDirectionVC[lightNum]));","    diffuse += ((df"+o+") * lightColor[lightNum]);","    if (dot(normalVCVSOutput, lightDirectionVC[lightNum]) < 0.0)","      {","      float sf = pow( max(0.0, dot(lightHalfAngleVC[lightNum],normalVCVSOutput)), specularPower);","      specular += ((sf"+o+") * lightColor[lightNum]);","      }","    }","  diffuse = diffuse * diffuseColor;","  specular = specular * specularColor;","  gl_FragData[0] = vec4(ambientColor + diffuse + specular, opacity);","  //VTK::Light::Impl"],!1).result;break;case 3:a=v["default"].substitute(a,"//VTK::Light::Dec",["uniform int numberOfLights;","uniform vec3 lightColor[6];","uniform vec3 lightDirectionVC[6]; // normalized","uniform vec3 lightHalfAngleVC[6]; // normalized","uniform vec3 lightPositionVC[6];","uniform vec3 lightAttenuation[6];","uniform float lightConeAngle[6];","uniform float lightExponent[6];","uniform int lightPositional[6];"]).result,a=v["default"].substitute(a,"//VTK::Light::Impl",["  vec3 diffuse = vec3(0,0,0);","  vec3 specular = vec3(0,0,0);","  vec3 vertLightDirectionVC;","  for (int lightNum = 0; lightNum < numberOfLights; lightNum++)","    {","    float attenuation = 1.0;","    if (lightPositional[lightNum] == 0)","      {","      vertLightDirectionVC = lightDirectionVC[lightNum];","      }","    else","      {","      vertLightDirectionVC = vertexVC.xyz - lightPositionVC[lightNum];","      float distanceVC = length(vertLightDirectionVC);","      vertLightDirectionVC = normalize(vertLightDirectionVC);","      attenuation = 1.0 /","        (lightAttenuation[lightNum].x","         + lightAttenuation[lightNum].y * distanceVC","         + lightAttenuation[lightNum].z * distanceVC * distanceVC);","      // per OpenGL standard cone angle is 90 or less for a spot light","      if (lightConeAngle[lightNum] <= 90.0)","        {","        float coneDot = dot(vertLightDirectionVC, lightDirectionVC[lightNum]);","        // if inside the cone","        if (coneDot >= cos(radians(lightConeAngle[lightNum])))","          {","          attenuation = attenuation * pow(coneDot, lightExponent[lightNum]);","          }","        else","          {","          attenuation = 0.0;","          }","        }","      }","    float df = max(0.0, attenuation*dot(normalVCVSOutput, -vertLightDirectionVC));","    diffuse += ((df"+o+") * lightColor[lightNum]);","    if (dot(normalVCVSOutput, vertLightDirectionVC) < 0.0)","      {","      float sf = attenuation*pow( max(0.0, dot(lightHalfAngleVC[lightNum],normalVCVSOutput)), specularPower);","      specular += ((sf"+o+") * lightColor[lightNum]);","      }","    }","  diffuse = diffuse * diffuseColor;","  specular = specular * specularColor;","  gl_FragData[0] = vec4(ambientColor + diffuse + specular, opacity);","  //VTK::Light::Impl"],!1).result;break;default:console.error("bad light complexity")}e.Fragment=a},e.replaceShaderNormal=function(e,n,r){if(t.lastLightComplexity.get(t.lastBoundBO)>0){var a=e.Vertex,o=e.Geometry,i=e.Fragment;t.lastBoundBO.getCABO().getNormalOffset()?(a=v["default"].substitute(a,"//VTK::Normal::Dec",["attribute vec3 normalMC;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,a=v["default"].substitute(a,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * normalMC;"]).result,o=v["default"].substitute(o,"//VTK::Normal::Dec",["in vec3 normalVCVSOutput[];","out vec3 normalVCGSOutput;"]).result,o=v["default"].substitute(o,"//VTK::Normal::Impl",["normalVCGSOutput = normalVCVSOutput[i];"]).result,i=v["default"].substitute(i,"//VTK::Normal::Dec",["varying vec3 normalVCVSOutput;"]).result,i=v["default"].substitute(i,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalVCVSOutput);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):t.haveCellNormals?(i=v["default"].substitute(i,"//VTK::Normal::Dec",["uniform mat3 normalMatrix;","uniform samplerBuffer textureN;"]).result,i=v["default"].substitute(i,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalMatrix *","    texelFetchBuffer(textureN, gl_PrimitiveID + PrimitiveIDOffset).xyz);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):r.getProperty().getRepresentation()===T.VTK_REPRESENTATION.WIREFRAME?(i=v["default"].substitute(i,"//VTK::UniformFlow::Impl",["  vec3 fdx = vec3(dFdx(vertexVC.x),dFdx(vertexVC.y),dFdx(vertexVC.z));","  vec3 fdy = vec3(dFdy(vertexVC.x),dFdy(vertexVC.y),dFdy(vertexVC.z));","  //VTK::UniformFlow::Impl"]).result,i=v["default"].substitute(i,"//VTK::Normal::Impl",["vec3 normalVCVSOutput;","  fdx = normalize(fdx);","  fdy = normalize(fdy);","  if (abs(fdx.x) > 0.0)","    { normalVCVSOutput = normalize(cross(vec3(fdx.y, -fdx.x, 0.0), fdx)); }","  else { normalVCVSOutput = normalize(cross(vec3(fdy.y, -fdy.x, 0.0), fdy));}"]).result):(i=v["default"].substitute(i,"//VTK::Normal::Dec",["uniform int cameraParallel;"]).result,i=v["default"].substitute(i,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,i=v["default"].substitute(i,"//VTK::Normal::Impl",["  fdx = normalize(fdx);","  fdy = normalize(fdy);","  vec3 normalVCVSOutput = normalize(cross(fdx,fdy));","  if (cameraParallel == 1 && normalVCVSOutput.z < 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }","  if (cameraParallel == 0 && dot(normalVCVSOutput,vertexVC.xyz) > 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }"]).result),e.Vertex=a,e.Geometry=o,e.Fragment=i}},e.replaceShaderPositionVC=function(e,n,r){var a=e.Vertex,o=e.Geometry,i=e.Fragment;r.getProperty().getRepresentation()===T.VTK_REPRESENTATION.POINTS&&(a=v["default"].substitute(a,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl","  gl_PointSize = "+r.getProperty().getPointSize().toFixed(1)+";"],!1).result),t.lastLightComplexity.get(t.lastBoundBO)>0?(a=v["default"].substitute(a,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,a=v["default"].substitute(a,"//VTK::PositionVC::Impl",["vertexVCVSOutput = MCVCMatrix * vertexMC;","  gl_Position = MCDCMatrix * vertexMC;"]).result,a=v["default"].substitute(a,"//VTK::Camera::Dec",["uniform mat4 MCDCMatrix;","uniform mat4 MCVCMatrix;"]).result,o=v["default"].substitute(o,"//VTK::PositionVC::Dec",["in vec4 vertexVCVSOutput[];","out vec4 vertexVCGSOutput;"]).result,o=v["default"].substitute(o,"//VTK::PositionVC::Impl",["vertexVCGSOutput = vertexVCVSOutput[i];"]).result,i=v["default"].substitute(i,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,i=v["default"].substitute(i,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;"]).result):(a=v["default"].substitute(a,"//VTK::Camera::Dec",["uniform mat4 MCDCMatrix;"]).result,a=v["default"].substitute(a,"//VTK::PositionVC::Impl",["  gl_Position = MCDCMatrix * vertexMC;"]).result),e.Vertex=a,e.Geometry=o,e.Fragment=i},e.replaceShaderTCoord=function(e,n,r){if(t.lastBoundBO.getCABO().getTCoordOffset()){var a=e.Vertex,o=e.Geometry,i=e.Fragment;a=v["default"].substitute(a,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result;var u=t.openGLActor.getActiveTextures(),s=u[0].getComponents();switch(a=v["default"].substitute(a,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result,o=v["default"].substitute(o,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];","out vec2 tcoordVCGSOutput;"]).result,o=v["default"].substitute(o,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,i=v["default"].substitute(i,"//VTK::TCoord::Dec",["varying vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,s){case 1:i=v["default"].substitute(i,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*","  vec4(tcolor.r,tcolor.r,tcolor.r,1.0);"]).result;break;case 2:i=v["default"].substitute(i,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*","  vec4(tcolor.r,tcolor.r,tcolor.r,tcolor.g);"]).result;break;default:i=v["default"].substitute(i,"//VTK::TCoord::Impl","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*texture2D(texture1, tcoordVCVSOutput.st);").result}e.Vertex=a,e.Geometry=o,e.Fragment=i}},e.replaceShaderValues=function(t,n,r){e.replaceShaderColor(t,n,r),e.replaceShaderNormal(t,n,r),e.replaceShaderLight(t,n,r),e.replaceShaderTCoord(t,n,r),e.replaceShaderPositionVC(t,n,r)},e.getNeedToRebuildShaders=function(n,r,a){var o=0,i=!1,u=!1;if(a.getProperty().getRepresentation()===T.VTK_REPRESENTATION.POINTS)i=a.getProperty().getInterpolation()!==T.VTK_SHADING.FLAT&&u;else{var s=n===t.tris||n===t.triStrips;i=s||!s&&a.getProperty().getInterpolation()!==T.VTK_SHADING.FLAT&&u}return a.getProperty().getLighting()&&i&&!function(){o=0;var e=0;r.getLights().forEach(function(t){var n=t.getSwitch();n>0&&(e++,0===o&&(o=1)),1===o&&(e>1||1!==t.getIntensity()||!t.lightTypeIsHeadLight())&&(o=2),o<3&&t.getPositional()&&(o=3)})}(),t.lastLightComplexity.get(n)!==o&&(t.lightComplexityChanged.get(n).modified(),t.lastLightComplexity.set(n,o)),0===n.getProgram()||n.getShaderSourceTime().getMTime()<e.getMTime()||n.getShaderSourceTime().getMTime()<a.getMTime()||n.getShaderSourceTime().getMTime()<t.currentInput.getMTime()||n.getShaderSourceTime().getMTime()<t.lightComplexityChanged.get(n).getMTime()},e.updateShaders=function(n,r,a){if(n.getVAO().bind(),t.lastBoundBO=n,e.getNeedToRebuildShaders(n,r,a)){var o={Vertex:null,Fragment:null,Geometry:null};e.buildShaders(o,r,a);var i=t.openGLRenderWindow.getShaderCache().readyShaderProgramArray(o.Vertex,o.Fragment,o.Geometry);i!==n.getProgram()&&(n.setProgram(i),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else t.openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());e.setMapperShaderParameters(n,r,a),e.setPropertyShaderParameters(n,r,a),e.setCameraShaderParameters(n,r,a),e.setLightingShaderParameters(n,r,a)},e.setMapperShaderParameters=function(e,n,r){e.getProgram().setUniformi("PrimitiveIDOffset",t.primitiveIDOffset),e.getCABO().getElementCount()&&(t.VBOBuildTime>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())&&(e.getCABO().bind(),e.getProgram().isAttributeUsed("vertexMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"vertexMC",e.getCABO().getVertexOffset(),e.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||console.error("Error setting vertexMC in shader VAO.")),e.getProgram().isAttributeUsed("normalMC")&&e.getCABO().getNormalOffset()&&t.lastLightComplexity.get(e)>0&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"normalMC",e.getCABO().getNormalOffset(),e.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||console.error("Error setting normalMC in shader VAO.")),e.getProgram().isAttributeUsed("tcoordMC")&&e.getCABO().getTCoordOffset()&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"tcoordMC",e.getCABO().getTCoordOffset(),e.getCABO().getStride(),t.context.FLOAT,e.getCABO().getTCoordComponents(),t.context.FALSE)||console.error("Error setting tcoordMC in shader VAO.")),e.getProgram().isAttributeUsed("scalarColor")&&e.getCABO().getColorComponents()&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"scalarColor",e.getCABO().getColorOffset(),e.getCABO().getStride(),t.context.FLOAT,e.getCABO().getColorComponents(),!0)||console.error("Error setting scalarColor in shader VAO.")));var a=t.openGLActor.getActiveTextures();a.forEach(function(t){var n=t.getTextureUnit(),r="texture"+(n+1);e.getProgram().isUniformUsed(r)&&e.getProgram().setUniformi(r,n)})},e.setLightingShaderParameters=function(e,n,r){if(!(t.lastLightComplexity.get(e)<2)){var a=e.getProgram(),o=0,i=[],u=n.getLights();Object.keys(u).map(function(e){return u[e]}).forEach(function(e){var t=e.getSwitch();if(t>0){var n=e.getDiffuseColor(),r=e.getIntensity();i[o][0]=n[0]*r,i[o][1]=n[1]*r,i[o][2]=n[2]*r,o++}}),a.setUniform3fv("lightColor",o,i),a.setUniformi("numberOfLights",o),t.lastLightComplexity.get(e)<3}},e.setCameraShaderParameters=function(e,n,r){var a=e.getProgram(),o=t.openGLCamera.getKeyMatrices(n),i=n.getActiveCamera();if(r.getIsIdentity())a.setUniformMatrix("MCDCMatrix",o.wcdc),a.isUniformUsed("MCVCMatrix")&&a.setUniformMatrix("MCVCMatrix",o.wcvc),a.isUniformUsed("normalMatrix")&&a.setUniformMatrix3x3("normalMatrix",o.normalMatrix);else{var s=t.openGLActor.getKeyMatrices();if(a.isUniformUsed("normalMatrix")){var l=u.mat3.create();u.mat3.multiply(l,o.normalMatrix,s.normalMatrix),a.setUniformMatrix3x3("normalMatrix",l)}var c=u.mat4.create();u.mat4.multiply(c,o.wcdc,s.mcwc),a.setUniformMatrix("MCDCMatrix",c),a.isUniformUsed("MCVCMatrix")&&(u.mat4.multiply(c,o.wcvc,s.mcwc),a.setUniformMatrix("MCVCMatrix",c))}a.isUniformUsed("cameraParallel")&&a.setUniformi("cameraParallel",i.getParallelProjection())},e.setPropertyShaderParameters=function(e,n,r){var a=e.getProgram(),o=r.getProperty(),i=o.getOpacity(),u=o.getAmbientColor(),s=o.getAmbient(),l=[u[0]*s,u[1]*s,u[2]*s],c=o.getDiffuseColor(),d=o.getDiffuse(),f=[c[0]*d,c[1]*d,c[2]*d];if(a.setUniformf("opacityUniform",i),a.setUniform3f("ambientColorUniform",l),a.setUniform3f("diffuseColorUniform",f),!(t.lastLightComplexity.get(e)<1)){var p=o.getSpecularColor(),g=o.getSpecular(),v=[p[0]*g,p[1]*g,p[2]*g];a.setUniform3f("specularColorUniform",v);var m=o.getSpecularPower();a.setUniformf("specularPowerUniform",m)}},e.renderPieceStart=function(n,r){t.primitiveIDOffset=0,t.context.lineWidth(r.getProperty().getLineWidth()),e.updateBufferObjects(n,r),t.lastBoundBO=null},e.renderPieceDraw=function(n,r){var a=r.getProperty().getRepresentation(),o=t.context;if(t.points.getCABO().getElementCount()&&(e.updateShaders(t.points,n,r),o.drawArrays(o.POINTS,0,t.points.getCABO().getElementCount()),t.primitiveIDOffset+=t.points.getCABO().getElementCount()),t.lines.getCABO().getElementCount()&&(e.updateShaders(t.lines,n,r),a===T.VTK_REPRESENTATION.POINTS?o.drawArrays(o.POINTS,0,t.lines.getCABO().getElementCount()):o.drawArrays(o.LINES,0,t.lines.getCABO().getElementCount()),t.primitiveIDOffset+=t.lines.getCABO().getElementCount()/2),t.tris.getCABO().getElementCount()){e.updateShaders(t.tris,n,r);var i=o.POINTS;a===T.VTK_REPRESENTATION.WIREFRAME&&(i=o.LINES),a===T.VTK_REPRESENTATION.SURFACE&&(i=o.TRIANGLES),o.drawArrays(i,0,t.tris.getCABO().getElementCount()),t.primitiveIDOffset+=t.tris.getCABO().getElementCount()/3}t.triStrips.getCABO().getElementCount()&&(e.updateShaders(t.triStrips,n,r),a===T.VTK_REPRESENTATION.POINTS&&o.drawArrays(o.POINTS,0,t.triStrips.getCABO().getElementCount()),a===T.VTK_REPRESENTATION.WIREFRAME&&o.drawArrays(o.LINES,0,t.triStrips.getCABO().getElementCount()),a===T.VTK_REPRESENTATION.SURFACE&&o.drawArrays(o.TRIANGLES,0,t.triStrips.getCABO().getElementCount()),t.primitiveIDOffset+=t.triStrips.getCABO().getElementCount()/3)},e.renderPieceFinish=function(e,n){t.LastBoundBO&&t.LastBoundBO.getVAO().release()},e.renderPiece=function(n,r){return e.invokeEvent({type:"StartEvent"}),t.currentInput=t.renderable.getInputData(),t.renderable.getStatic()||(t.renderable.update(),t.currentInput=t.renderable.getInputData()),e.invokeEvent({type:"EndEvent"}),null===t.currentInput?void console.error("No input!"):void(t.currentInput.getPoints&&t.currentInput.getPoints().getNumberOfValues()&&(e.renderPieceStart(n,r),e.renderPieceDraw(n,r),e.renderPieceFinish(n,r)))},e.computeBounds=function(n,r){return e.getInput()?void(t.bounnds=e.getInput().getBounds()):void p["default"].uninitializeBounds(t.Bounds)},e.updateBufferObjects=function(t,n){e.getNeedToRebuildBufferObjects(t,n)&&e.buildBufferObjects(t,n)},e.getNeedToRebuildBufferObjects=function(n,r){return t.VBOBuildTime.getMTime()<e.getMTime()||t.VBOBuildTime.getMTime()<r.getMTime()||t.VBOBuildTime.getMTime()<r.getProperty().getMTime()||t.VBOBuildTime.getMTime()<t.currentInput.getMTime()},e.buildBufferObjects=function(e,n){var r=t.currentInput;if(null!==r){t.renderable.mapScalars(r,1);var a=t.renderable.getColorMapColors();t.haveCellScalars=!1;var o=t.renderable.getScalarMode();t.renderable.getScalarVisibility()&&(o!==y.VTK_SCALAR_MODE.USE_CELL_DATA&&o!==y.VTK_SCALAR_MODE.USE_CELL_FIELD_DATA&&o!==y.VTK_SCALAR_MODE.USE_FIELD_DATA&&r.getPointData().getScalars()||o===y.VTK_SCALAR_MODE.USE_POINT_FIELD_DATA||!a||(t.haveCellScalars=!0));var i=n.getProperty().getInterpolation()!==T.VTK_SHADING.FLAT?r.getPointData().getNormals():null;null===i&&r.getCellData().getNormals()&&(t.haveCellNormals=!0,i=r.getCelData().getNormals());var u=n.getProperty().getRepresentation(),s=r.getMTime()+"A"+u+"B"+r.getMTime()+"C"+(i?i.getMTime():1)+"C"+(t.colors?t.colors.getMTime():1),l=r.getPointData().getTCoords();if(t.openGLActor.getActiveTextures().length||(l=null),t.VBOBuildString!==s){var c=r.getPoints(),d=0;d+=t.points.getCABO().createVBO(r.getVerts(),"verts",u,{points:c,normals:i,tcoords:l,colors:a,cellOffset:d,haveCellScalars:t.haveCellScalars,haveCellNormals:t.haveCellNormals}),d+=t.lines.getCABO().createVBO(r.getLines(),"lines",u,{points:c,normals:i,tcoords:l,colors:a,cellOffset:d,haveCellScalars:t.haveCellScalars,haveCellNormals:t.haveCellNormals}),d+=t.tris.getCABO().createVBO(r.getPolys(),"polys",u,{points:c,normals:i,tcoords:l,colors:a,cellOffset:d,haveCellScalars:t.haveCellScalars,haveCellNormals:t.haveCellNormals}),d+=t.triStrips.getCABO().createVBO(r.getStrips(),"strips",u,{points:c,normals:i,tcoords:l,colors:a,cellOffset:d,haveCellScalars:t.haveCellScalars,haveCellNormals:t.haveCellNormals}),console.log("FIXME(Ken):",d),t.VBOBuildTime.modified(),t.VBOBuildString=s}}}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,A,n),h["default"].extend(e,t),t.points=d["default"].newInstance(),t.lines=d["default"].newInstance(),t.tris=d["default"].newInstance(),t.triStrips=d["default"].newInstance(),l.setGet(e,t,["context"]),t.VBOBuildTime={},l.obj(t.VBOBuildTime),t.lightComplexityChanged=new Map,t.lightComplexityChanged.set(t.points,{}),l.obj(t.lightComplexityChanged.get(t.points)),t.lightComplexityChanged.set(t.lines,{}),l.obj(t.lightComplexityChanged.get(t.lines)),t.lightComplexityChanged.set(t.tris,{}),l.obj(t.lightComplexityChanged.get(t.tris)),t.lightComplexityChanged.set(t.triStrips,{}),l.obj(t.lightComplexityChanged.get(t.triStrips)),t.lastLightComplexity=new Map,t.lastLightComplexity.set(t.points,0),t.lastLightComplexity.set(t.lines,0),t.lastLightComplexity.set(t.tris,0),t.lastLightComplexity.set(t.triStrips,0),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.vtkOpenGLPolyDataMapper=o,t.extend=i;var u=n(3),s=n(13),l=a(s),c=n(45),d=r(c),f=n(22),p=r(f),g=n(50),v=r(g),m=n(41),h=r(m),T=n(20),y=n(36),M=n(56),b=r(M),C=n(57),x=r(C),A={context:null,VBOBuildTime:0,VBOBuildString:null,lightComplexityChanged:null,lastLightComplexity:null},P=t.newInstance=l.newInstance(i);t["default"]={newInstance:P,extend:i}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkOpenGLRenderer"),e.build=function(n){if(n){if(!t.renderable)return;t.renderable.isActiveCameraCreated()||t.renderable.resetCamera(),e.updateLights(),e.prepareNodes(),e.addMissingNode(t.renderable.getActiveCamera()),e.addMissingNodes(t.renderable.getActors()),e.addMissingNodes(t.renderable.getActors2D()),e.addMissingNodes(t.renderable.getVolumes()),e.removeUnusedNodes()}},e.updateLights=function(){var e=0;return t.renderable.getLights().forEach(function(t){t.getSwitch()>0&&e++}),e||(console.debug("No lights are on, creating one."),t.renderable.createLight()),e},e.render=function(n){n&&(t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),e.clear())},e.getAspectRatio=function(){var e=t.parent.getSize(),n=t.renderable.getViewport();return e[0]*(n[2]-n[0])/((n[3]-n[1])*e[1])},e.getTiledSizeAndOrigin=function(){var e=t.renderable.getViewport(),n=[0,0,1,1],r=f["default"].clampValue(e[0]-n[0],0,1),a=f["default"].clampValue(e[1]-n[1],0,1),o=t.parent.normalizedDisplayToDisplay(r,a),i=Math.round(o[0]),u=Math.round(o[1]),s=f["default"].clampValue(e[2]-n[0],0,1),l=f["default"].clampValue(e[3]-n[1],0,1);s>n[2]-n[0]&&(s=n[2]-n[0]),l>n[3]-n[1]&&(l=n[3]-n[1]);var c=t.parent.normalizedDisplayToDisplay(s,l),d=Math.round(c[0])-i,p=Math.round(c[1])-u;return d<0&&(d=0),p<0&&(p=0),{usize:d,vsize:p,lowerLeftU:i,lowerLeftV:u}},e.clear=function(){var e=0,n=t.context;if(!t.renderable.getTransparent()){var r=t.renderable.getBackground();t.context.clearColor(r[0],r[1],r[2],1),e|=n.COLOR_BUFFER_BIT}t.renderable.getPreserveDepthBuffer()||(n.clearDepth(1),e|=n.DEPTH_BUFFER_BIT,n.depthMask(!0)),n.colorMask(!0,!0,!0,!0),n.clear(e),n.enable(n.DEPTH_TEST)}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,p,n),c["default"].extend(e,t),s.get(e,t,["shaderCache"]),s.setGet(e,t,["context"]),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.vtkOpenGLRenderer=o,t.extend=i;var u=n(13),s=a(u),l=n(41),c=r(l),d=n(22),f=r(d),p={context:null},g=t.newInstance=s.newInstance(i);t["default"]={newInstance:g,extend:i}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){t.classHierarchy.push("vtkShaderCache"),e.replaceShaderValues=function(e,n,r){t.context.getExtension("OES_standard_derivatives");var a=n;r.length>0&&(a=f["default"].substitute(a,"VSOut","GSOut").result);var o="#version 100\n",i=f["default"].substitute(e,"//VTK::System::Dec",o).result;a=f["default"].substitute(a,"//VTK::System::Dec",[o+"\n#extension GL_OES_standard_derivatives : enable\n","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif"]).result;var u=f["default"].substitute(r,"//VTK::System::Dec",o).result;return{VSSource:i,FSSource:a,GSSource:u}},e.readyShaderProgramArray=function(t,n,r){var a=e.replaceShaderValues(t,n,r),o=e.getShaderProgram(a.VSSource,a.FSSource,a.GSSource);return e.readyShaderProgram(o)},e.readyShaderProgram=function(t){return t&&(t.getCompiled()||t.compileShader())&&e.bindShader(t)?t:null},e.getShaderProgram=function(e,n,r){var a=""+e+n+r,o=(0,s["default"])(a),i=Object.keys(t.shaderPrograms).indexOf(o);if(i===-1){var u=f["default"].newInstance();return u.setContext(t.context),u.getVertexShader().setSource(e),u.getFragmentShader().setSource(n),r&&u.getGeometryShader().setSource(r),u.setMd5Hash(o),t.shaderPrograms[o]=u,u}return t.shaderPrograms[o]},e.releaseGraphicsResources=function(n){e.releaseCurrentShader(),Object.keys(t.shaderPrograms).map(function(e){return t.shaderPrograms[e]}).forEach(function(e){return e.releaseGraphicsResources(n)})},e.releaseGraphicsResources=function(){t.astShaderBound&&(t.lastShaderBound.release(),t.lastShaderBound=null)},e.bindShader=function(e){return t.lastShaderBound===e?1:(t.lastShaderBound&&t.lastShaderBound.release(),e.bind(),t.lastShaderBound=e,1)}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.assign(t,g,n),t.shaderPrograms={},c.obj(e,t),c.setGet(e,t,p),o(e,t),Object.freeze(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=n(62),s=a(u),l=n(13),c=r(l),d=n(50),f=a(d),p=["lastShaderBound","context"],g={lastShaderBound:null,shaderPrograms:null,context:null},v=t.newInstance=c.newInstance(i);t["default"]={newInstance:v,extend:i}},function(e,t,n){var r;!function(a){"use strict";function o(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n;
}function i(e,t){return e<<t|e>>>32-t}function u(e,t,n,r,a,u){return o(i(o(o(t,e),o(r,u)),a),n)}function s(e,t,n,r,a,o,i){return u(t&n|~t&r,e,t,a,o,i)}function l(e,t,n,r,a,o,i){return u(t&r|n&~r,e,t,a,o,i)}function c(e,t,n,r,a,o,i){return u(t^n^r,e,t,a,o,i)}function d(e,t,n,r,a,o,i){return u(n^(t|~r),e,t,a,o,i)}function f(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;var n,r,a,i,u,f=1732584193,p=-271733879,g=-1732584194,v=271733878;for(n=0;n<e.length;n+=16)r=f,a=p,i=g,u=v,f=s(f,p,g,v,e[n],7,-680876936),v=s(v,f,p,g,e[n+1],12,-389564586),g=s(g,v,f,p,e[n+2],17,606105819),p=s(p,g,v,f,e[n+3],22,-1044525330),f=s(f,p,g,v,e[n+4],7,-176418897),v=s(v,f,p,g,e[n+5],12,1200080426),g=s(g,v,f,p,e[n+6],17,-1473231341),p=s(p,g,v,f,e[n+7],22,-45705983),f=s(f,p,g,v,e[n+8],7,1770035416),v=s(v,f,p,g,e[n+9],12,-1958414417),g=s(g,v,f,p,e[n+10],17,-42063),p=s(p,g,v,f,e[n+11],22,-1990404162),f=s(f,p,g,v,e[n+12],7,1804603682),v=s(v,f,p,g,e[n+13],12,-40341101),g=s(g,v,f,p,e[n+14],17,-1502002290),p=s(p,g,v,f,e[n+15],22,1236535329),f=l(f,p,g,v,e[n+1],5,-165796510),v=l(v,f,p,g,e[n+6],9,-1069501632),g=l(g,v,f,p,e[n+11],14,643717713),p=l(p,g,v,f,e[n],20,-373897302),f=l(f,p,g,v,e[n+5],5,-701558691),v=l(v,f,p,g,e[n+10],9,38016083),g=l(g,v,f,p,e[n+15],14,-660478335),p=l(p,g,v,f,e[n+4],20,-405537848),f=l(f,p,g,v,e[n+9],5,568446438),v=l(v,f,p,g,e[n+14],9,-1019803690),g=l(g,v,f,p,e[n+3],14,-187363961),p=l(p,g,v,f,e[n+8],20,1163531501),f=l(f,p,g,v,e[n+13],5,-1444681467),v=l(v,f,p,g,e[n+2],9,-51403784),g=l(g,v,f,p,e[n+7],14,1735328473),p=l(p,g,v,f,e[n+12],20,-1926607734),f=c(f,p,g,v,e[n+5],4,-378558),v=c(v,f,p,g,e[n+8],11,-2022574463),g=c(g,v,f,p,e[n+11],16,1839030562),p=c(p,g,v,f,e[n+14],23,-35309556),f=c(f,p,g,v,e[n+1],4,-1530992060),v=c(v,f,p,g,e[n+4],11,1272893353),g=c(g,v,f,p,e[n+7],16,-155497632),p=c(p,g,v,f,e[n+10],23,-1094730640),f=c(f,p,g,v,e[n+13],4,681279174),v=c(v,f,p,g,e[n],11,-358537222),g=c(g,v,f,p,e[n+3],16,-722521979),p=c(p,g,v,f,e[n+6],23,76029189),f=c(f,p,g,v,e[n+9],4,-640364487),v=c(v,f,p,g,e[n+12],11,-421815835),g=c(g,v,f,p,e[n+15],16,530742520),p=c(p,g,v,f,e[n+2],23,-995338651),f=d(f,p,g,v,e[n],6,-198630844),v=d(v,f,p,g,e[n+7],10,1126891415),g=d(g,v,f,p,e[n+14],15,-1416354905),p=d(p,g,v,f,e[n+5],21,-57434055),f=d(f,p,g,v,e[n+12],6,1700485571),v=d(v,f,p,g,e[n+3],10,-1894986606),g=d(g,v,f,p,e[n+10],15,-1051523),p=d(p,g,v,f,e[n+1],21,-2054922799),f=d(f,p,g,v,e[n+8],6,1873313359),v=d(v,f,p,g,e[n+15],10,-30611744),g=d(g,v,f,p,e[n+6],15,-1560198380),p=d(p,g,v,f,e[n+13],21,1309151649),f=d(f,p,g,v,e[n+4],6,-145523070),v=d(v,f,p,g,e[n+11],10,-1120210379),g=d(g,v,f,p,e[n+2],15,718787259),p=d(p,g,v,f,e[n+9],21,-343485551),f=o(f,r),p=o(p,a),g=o(g,i),v=o(v,u);return[f,p,g,v]}function p(e){var t,n="";for(t=0;t<32*e.length;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function g(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function v(e){return p(f(g(e),8*e.length))}function m(e,t){var n,r,a=g(e),o=[],i=[];for(o[15]=i[15]=void 0,a.length>16&&(a=f(a,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^a[n],i[n]=1549556828^a[n];return r=f(o.concat(g(t)),512+8*t.length),p(f(i.concat(r),640))}function h(e){var t,n,r="0123456789abcdef",a="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),a+=r.charAt(t>>>4&15)+r.charAt(15&t);return a}function T(e){return unescape(encodeURIComponent(e))}function y(e){return v(T(e))}function M(e){return h(y(e))}function b(e,t){return m(T(e),T(t))}function C(e,t){return h(b(e,t))}function x(e,t,n){return t?n?b(t,e):C(t,e):n?y(e):M(e)}r=function(){return x}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(this)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e,t){t.classHierarchy.push("vtkOpenGLTextureUnitManager"),e.deleteTable=function(){t.textureUnits.length&&console.error("some texture units  were not properly released"),t.textureUnits=[],t.numberOfTextureUnits=0},e.setContext=function(n){t.context!==n&&(0!==t.context&&e.deleteTable(),t.context=n,t.context&&(t.numberOfTextureUnits=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),e.modified())},e.allocate=function(){for(var n=0;n<t.numberOfTextureUnits;n++)if(!e.isAllocated(n))return t.textureUnits[n]=!0,n;return-1},e.allocateUnit=function(n){return e.isAllocated(n)?-1:(t.textureUnits[n]=!0,n)},e.isAllocated=function(e){return!!t.textureUnits.filter(function(t){return t===e}).length},e.free=function(e){var n=t.textureUnits.filter(function(t){return t===e});t.textureUnits.length!==n.length&&(t.textureUnits=n)}}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,s,n),u.obj(e,t),u.get(e,t,["numberOfTextureUnits"]),u.setGet(e,t,["context","keyMatrixTime"]),a(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=o;var i=n(13),u=r(i),s={context:null,numberOfTextureUnits:0,textureUnits:0},l=t.newInstance=u.newInstance(o);t["default"]={newInstance:l,extend:o}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return function(){return console.log("vtkRenderer::"+e+" - NOT IMPLEMENTED")}}function i(e,t){t.classHierarchy.push("vtkRenderer"),e.updateCamera=function(){return t.activeCamera||(console.debug("No cameras are on, creating one."),e.getActiveCameraAndResetIfCreated()),t.activeCamera.render(e),!0},e.updateLightsGeometryToFollowCamera=function(){var n=e.getActiveCameraAndResetIfCreated(),r=n.getCameraLightTransformMatrix();t.lights.forEach(function(e){e.lightTypeIsSceneLight()||(e.lightTypeIsHeadLight()?(e.setPosition(n.getPosition()),e.setFocalPoint(n.getFocalPoint())):e.lightTypeIsCameraLight()?e.setTransformMatrix(r):console.error("light has unknown light type",e))})},e.updateLightGeometry=function(){return!t.lightFollowCamera||e.updateLightsGeometryToFollowCamera()},e.allocateTime=o("allocateTime"),e.updateGeometry=o("updateGeometry"),e.getVTKWindow=function(){return t.renderWindow},e.setLayer=function(n){console.debug(e.getClassName(),e,"setting Layer to ",n),t.layer!==n&&(t.layer=n,e.modified()),e.setPreserveColorBuffer(!!n)},e.setActiveCamera=function(n){return t.activeCamera!==n&&(t.activeCamera=n,e.modified(),e.invokeEvent({type:"ActiveCameraEvent",camera:n}),!0)},e.makeCamera=function(){var t=f["default"].newInstance();return e.invokeEvent({type:"CreateCameraEvent",camera:t}),t},e.getActiveCamera=function(){return t.activeCamera||(t.activeCamera=e.makeCamera()),t.activeCamera},e.getActiveCameraAndResetIfCreated=function(){return t.activeCamera||(e.getActiveCamera(),e.resetCamera()),t.activeCamera},e.addActor=e.addViewProp,e.addVolume=e.addViewProp,e.removeActor=function(n){t.actors=t.actors.filter(function(e){return e!==n}),e.removeViewProp(n)},e.removeVolume=function(n){t.volumes=t.volumes.filter(function(e){return e!==n}),e.removeViewProp(n)},e.addLight=function(n){t.lights=[].concat(t.lights,n),e.modified()},e.getActors=function(){return t.actors=[],t.props.forEach(function(e){t.actors=t.actors.concat(e.getActors())}),t.actors},e.getVolumes=function(){return t.volumes=[],t.props.forEach(function(e){t.volumes=t.volumes.concat(e.getVolumes())}),t.volumes},e.removeLight=function(n){t.lights=t.lights.filter(function(e){return e!==n}),e.modified()},e.removeAllLights=function(){t.lights=[]},e.addCuller=o("addCuller"),e.removeCuller=o("removeCuller"),e.setLightCollection=function(n){t.lights=n,e.modified()},e.makeLight=g["default"].newInstance,e.createLight=function(){t.automaticLightCreation&&(t.createdLight&&(e.removeLight(t.createdLight),t.createdLight["delete"](),t.createdLight=null),t.createdLight=e.makeLight(),e.addLight(t.createdLight),t.createdLight.setLightTypeToHeadLight(),t.createdLight.setPosition(e.getActiveCamera().getPosition()),t.createdLight.setFocalPoint(e.getActiveCamera().getFocalPoint()))},e.normalizedDisplayToWorld=function(t,n,r){var a=e.normalizedDisplayToView(t,n,r);return e.viewToWorld(a[0],a[1],a[2])},e.worldToNormalizedDisplay=function(t,n,r){var a=e.worldToView(t,n,r);return e.viewToNormalizedDisplay(a[0],a[1],a[2])},e.viewToWorld=function(e,n,r){if(null===t.activeCamera)return console.error("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];var a=t.activeCamera.getCompositeProjectionTransformMatrix(1,0,1);s.mat4.invert(a,a),s.mat4.transpose(a,a);var o=s.vec3.fromValues(e,n,r);return s.vec3.transformMat4(o,o,a),[o[0],o[1],o[2]]},e.worldToView=function(e,n,r){if(null===t.activeCamera)return console.error("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];var a=t.activeCamera.getCompositeProjectionTransformMatrix(1,0,1);s.mat4.transpose(a,a);var o=s.vec3.fromValues(e,n,r);return s.vec3.transformMat4(o,o,a),[o[0],o[1],o[2]]},e.computeVisiblePropBounds=function(){var n=[].concat(y.INIT_BOUNDS),r=!0;return e.invokeEvent({type:"ComputeVisiblePropBoundsEvent",renderer:e}),t.props.filter(function(e){return e.getVisibility()&&e.getUseBounds()}).forEach(function(e){var t=e.getBounds();t&&m["default"].areBoundsInitialized(t)&&(r=!1,t[0]<n[0]&&(n[0]=t[0]),t[1]>n[1]&&(n[1]=t[1]),t[2]<n[2]&&(n[2]=t[2]),t[3]>n[3]&&(n[3]=t[3]),t[4]<n[4]&&(n[4]=t[4]),t[5]>n[5]&&(n[5]=t[5]))}),r&&(m["default"].uninitializeBounds(n),console.debug("Can't compute bounds, no 3D props are visible")),n},e.resetCamera=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=n||e.computeVisiblePropBounds(),a=[0,0,0];if(!m["default"].areBoundsInitialized(r))return console.debug("Cannot reset camera!"),!1;var o=null;if(!e.getActiveCamera())return console.error("Trying to reset non-existant camera"),!1;o=t.activeCamera.getViewPlaneNormal(),t.activeCamera.setViewAngle(30),a[0]=(r[0]+r[1])/2,a[1]=(r[2]+r[3])/2,a[2]=(r[4]+r[5])/2;var i=r[1]-r[0],u=r[3]-r[2],s=r[5]-r[4];i*=i,u*=u,s*=s;var l=i+u+s;l=0===l?1:l,l=.5*Math.sqrt(l);var c=m["default"].radiansFromDegrees(t.activeCamera.getViewAngle()),d=l,f=l/Math.sin(.5*c),p=t.activeCamera.getViewUp();return Math.abs(m["default"].dot(p,o))>.999&&(console.warn("Resetting view-up since view plane normal is parallel"),t.activeCamera.setViewUp(-p[2],p[0],p[1])),t.activeCamera.setFocalPoint(a[0],a[1],a[2]),t.activeCamera.setPosition(a[0]+f*o[0],a[1]+f*o[1],a[2]+f*o[2]),e.resetCameraClippingRange(r),t.activeCamera.setParallelScale(d),e.invokeEvent({type:"ResetCameraEvent",renderer:e}),!0},e.resetCameraClippingRange=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=n||e.computeVisiblePropBounds();if(!m["default"].areBoundsInitialized(r))return console.debug("Cannot reset camera clipping range!"),!1;if(e.getActiveCameraAndResetIfCreated(),!t.activeCamera)return console.error("Trying to reset clipping range of non-existant camera"),!1;var a=null,o=null;a=t.activeCamera.getViewPlaneNormal(),o=t.activeCamera.getPosition();for(var i=-a[0],u=-a[1],s=-a[2],l=-(i*o[0]+u*o[1]+s*o[2]),c=[i*r[0]+u*r[2]+s*r[4]+l,1e-18],d=0;d<2;d++)for(var f=0;f<2;f++)for(var p=0;p<2;p++){var g=i*r[p]+u*r[2+f]+s*r[4+d]+l;c[0]=g<c[0]?g:c[0],c[1]=g>c[1]?g:c[1]}var v=0;if(t.activeCamera.getParallelProjection())v=.1*t.activeCamera.getParallelScale();else{var h=m["default"].radiansFromDegrees(t.activeCamera.getViewAngle());v=.2*Math.tan(h/2)*c[1]}return c[1]-c[0]<v&&(v=v-c[1]+c[0],c[1]+=v/2,c[0]-=v/2),c[0]<0&&(c[0]=0),c[0]=.99*c[0]-(c[1]-c[0])*t.clippingRangeExpansion,c[1]=1.01*c[1]+(c[1]-c[0])*t.clippingRangeExpansion,c[0]=c[0]>=c[1]?.01*c[1]:c[0],t.nearClippingPlaneTolerance||(t.nearClippingPlaneTolerance=.01),c[0]<t.nearClippingPlaneTolerance*c[1]&&(c[0]=t.nearClippingPlaneTolerance*c[1]),t.activeCamera.setClippingRange(c[0],c[1]),e.invokeEvent({type:"ResetCameraClippingRangeEvent",renderer:e}),!1},e.setRenderWindow=function(e){e!==t.renderWindow&&(t.vtkWindow=e,t.renderWindow=e)},e.visibleActorCount=function(){return t.props.filter(function(e){return e.getVisibility()}).length},e.visibleVolumeCount=e.visibleActorCount,e.getMTime=function(){return Math.max(t.mtime,t.activeCamera?t.activeCamera.getMTime():0,t.createdLight?t.createdLight.getMTime():0)},e.pickProp=o("pickProp"),e.pickRender=o("PickRender"),e.pickGeometry=o("PickGeometry"),e.getTransparent=function(){return!!t.preserveColorBuffer},e.getTiledAspectRatio=o("GetTiledAspectRatio"),e.isActiveCameraCreated=function(){return!!t.activeCamera}}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,M,n),T["default"].extend(e,t,n),c.get(e,t,["renderWindow","allocatedRenderTime","timeFactor","lastRenderTimeInSeconds","numberOfPropsRendered","lastRenderingUsedDepthPeeling","selector"]),c.setGet(e,t,["twoSidedLighting","lightFollowCamera","automaticLightCreation","erase","draw","nearClippingPlaneTolerance","clippingRangeExpansion","backingStore","interactive","layer","preserveColorBuffer","preserveDepthBuffer","useDepthPeeling","occlusionRatio","maximumNumberOfPeels","delegate","backgroundTexture","texturedBackground","useShadows","pass"]),c.getArray(e,t,["actors","volumes","lights"]),c.setGetArray(e,t,["background"],3),i(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=u;var s=n(3),l=n(13),c=a(l),d=n(21),f=r(d),p=n(65),g=r(p),v=n(22),m=r(v),h=n(66),T=r(h),y=n(16),M={pickedProp:null,activeCamera:null,ambient:[1,1,1],allocatedRenderTime:100,timeFactor:1,createdLight:null,automaticLightCreation:!0,twoSidedLighting:!0,lastRenderTimeInSeconds:-1,renderWindow:null,lights:[],actors:[],volumes:[],lightFollowCamera:!0,numberOfPropsRendered:0,propArray:null,pathArray:null,layer:1,preserveColorBuffer:!1,preserveDepthBuffer:!1,computeVisiblePropBounds:m["default"].createUninitializedBouds(),interactive:!0,nearClippingPlaneTolerance:0,clippingRangeExpansion:.05,erase:!0,draw:!0,useShadows:!1,useDepthPeeling:!1,occlusionRatio:0,maximumNumberOfPeels:4,selector:null,delegate:null,texturedBackground:!1,backgroundTexture:null,pass:0},b=t.newInstance=c.newInstance(u);t["default"]={newInstance:b,extend:u}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkLight"),e.getTransformedPosition=function(){return t.transformMatrix?[]:[].concat(t.position)},e.getTransformedFocalPoint=function(){return t.transformMatrix?[]:[].concat(t.focalPoint)},e.setDirectionAngle=function(t,n){var r=c["default"].radiansFromDegrees(t),a=c["default"].radiansFromDegrees(n);e.setPosition(Math.cos(r)*Math.sin(a),Math.sin(r),Math.cos(r)*Math.cos(a)),e.setFocalPoint(0,0,0),e.setPositional(0)},e.setLightTypeToHeadLight=function(){e.setLightType("HeadLight")},e.setLightTypeToCameraLight=function(){e.setLightType("CameraLight")},e.setLightTypeToSceneLight=function(){e.setTransformMatrix(null),e.setLightType("SceneLight")},e.lightTypeIsHeadLight=function(){return"HeadLight"===t.lightType},e.lightTypeIsSceneLight=function(){return"SceneLight"===t.lightType},e.lightTypeIsCameraLight=function(){return"CameraLight"===t.lightType}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,f,n),s.obj(e,t),s.setGet(e,t,["intensity","switch","positional","exponent","coneAngle","transformMatrix","lightType","shadowAttenuation"]),s.setGetArray(e,t,["ambientColor","diffuseColor","specularColor","position","focalPoint","attenuationValues"],3),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=t.LIGHT_TYPES=void 0,t.vtkLight=o,t.extend=i;var u=n(13),s=a(u),l=n(22),c=r(l),d=t.LIGHT_TYPES=["HeadLight","CameraLight","SceneLight"],f={"switch":!0,intensity:1,ambientColor:[0,0,0],diffuseColor:[1,1,1],specularColor:[1,1,1],position:[0,0,1],focalPoint:[0,0,0],positional:!1,exponent:1,coneAngle:30,attenuationValues:[1,0,0],transformMatrix:null,lightType:"SceneLight",shadowAttenuation:1},p=t.newInstance=s.newInstance(i);t["default"]={newInstance:p,extend:i,LIGHT_TYPES:d}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){return function(){return console.log("vtkViewport::"+e+" - NOT IMPLEMENTED")}}function o(e,t){t.classHierarchy.push("vtkViewport"),e.getViewProps=function(){return t.props},e.hasViewProp=function(e){return!!t.props.filter(function(t){return t===e}).length},e.addViewProp=function(n){n&&!e.hasViewProp(n)&&(t.props=t.props.concat(n))},e.removeViewProp=function(e){var n=t.props.filter(function(t){return t===e});t.props.length!==n.length&&(t.props=n)},e.removeAllViewProps=function(){t.props=[]},e.addActor2D=e.addViewProp,e.removeActor2D=function(t){e.removeViewProp(t)},e.getActors2D=function(){return t.actors2D=[],t.props.forEach(function(e){t.actors2D=t.actors2D.concat(e.getActors2D())}),t.actors2D},e.displayToView=function(){return console.error("call displayToView on your view instead")},e.viewToDisplay=function(){return console.error("callviewtodisplay on your view instead")},e.getSize=function(){return console.error("call getSize on your View instead")},e.normalizedDisplayToView=function(t,n,r){var a=e.normalizedDisplayToNormalizedViewport(t,n,r);return e.normalizedViewportToView(a[0],a[1],a[2])},e.normalizedDisplayToNormalizedViewport=function(e,n,r){var a=[t.viewport[2]-t.viewport[0],t.viewport[3]-t.viewport[1]];return[(e-t.viewport[0])/a[0],(n-t.viewport[1])/a[1],r]},e.normalizedViewportToView=function(e,t,n){return[2*e-1,2*t-1,2*n-1]},e.viewToNormalizedDisplay=function(t,n,r){var a=e.viewToNormalizedViewport(t,n,r);return e.normalizedViewportToNormalizedDisplay(a[0],a[1],a[2])},e.normalizedViewportToNormalizedDisplay=function(e,n,r){var a=[t.viewport[2]-t.viewport[0],t.viewport[3]-t.viewport[1]];return[(e-t.viewport[0])/a[0],(n-t.viewport[1])/a[1],r]},e.viewToNormalizedViewport=function(e,t,n){return[.5*(e+1),.5*(t+1),.5*(n+1)]},e.PickPropFrom=a("PickPropFrom")}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,l,n),s.obj(e,t),s.event(e,t,"event"),s.setGetArray(e,t,["viewport"],4),s.setGetArray(e,t,["background","background2"],3),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=n(13),s=r(u),l={vtkWindow:null,background:[0,0,0],background2:[.2,.2,.2],gradientBackground:!1,viewport:[0,0,1,1],aspect:[1,1],pixelAspect:[1,1],props:[],actors2D:[]},c=t.newInstance=s.newInstance(i);t["default"]={newInstance:c,extend:i}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e,t){t.classHierarchy.push("vtkRenderWindow"),e.addRenderer=function(n){e.hasRenderer(n)||(n.setRenderWindow(e),t.renderers.push(n),e.modified())},e.removeRenderer=function(n){t.renderers=t.renderers.filter(function(e){return e!==n}),e.modified()},e.hasRenderer=function(e){return t.renderers.indexOf(e)!==-1},e.addView=function(n){e.hasView(n)||(n.setRenderable(e),t.views.push(n),e.modified())},e.removeView=function(n){t.views=t.views.filter(function(e){return e!==n}),e.modified()},e.hasView=function(e){return t.views.indexOf(e)!==-1},e.render=function(){t.views.forEach(function(e){return e.traverseAllPasses()})},e.captureImages=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png";return e.render(),t.views.map(function(e){return e.captureImage?e.captureImage(n):void 0}).filter(function(e){return!!e})}}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,s,n),u.obj(e,t),u.setGet(e,t,["interactor","numberOfLayers","views"]),u.get(e,t,["neverRendered"]),u.getArray(e,t,["renderers"]),u.event(e,t,"completion"),a(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=t.DEFAULT_VALUES=void 0,t.vtkRenderWindow=a,t.extend=o;var i=n(13),u=r(i),s=t.DEFAULT_VALUES={renderers:[],views:[],interactor:null,neverRendered:!0,numberOfLayers:1},l=t.newInstance=u.newInstance(o);t["default"]={newInstance:l,extend:o}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkRenderWindowInteractor"),e.start=function(){(t.initialized||(e.initialize(),t.initialized))&&e.startEventLoop()},e.setRenderWindow=function(e){console.error("you want to call setView(view) instead of setRenderWindow on a vtk.js  interactor")},e.setInteractorStyle=function(n){t.interactorStyle!==n&&(null!=t.interactorStyle&&t.interactorStyle.setInteractor(null),t.interactorStyle=n,null!=t.interactorStyle&&t.interactorStyle.getInteractor()!==e&&t.interactorStyle.setInteractor(e))},e.initialize=function(){t.initialized=!0,e.enable(),e.render()},e.enable=function(){return e.setEnabled(!0)},e.disable=function(){return e.setEnabled(!1)},e.startEventLoop=function(){return console.log("empty event loop")},e.setEventPosition=function(e,n,r,a){t.pointerIndex=a,t.lastEventPositions[a]=t.eventPositions[a],t.eventPositions[a]={x:e,y:n,z:r}},e.getEventPosition=function(e){return t.eventPositions[e]},e.getLastEventPosition=function(e){return t.lastEventPositions[e]},e.bindEvents=function(n,r){t.canvas=n,n.addEventListener("mousedown",e.handleMouseDown),r.querySelector("body").addEventListener("keypress",e.handleKeyPress),n.addEventListener("mouseup",e.handleMouseUp),n.addEventListener("mousemove",e.handleMouseMove),n.addEventListener("touchstart",e.handleTouchStart,!1),n.addEventListener("touchend",e.handleTouchEnd,!1),n.addEventListener("touchcancel",e.handleTouchEnd,!1),n.addEventListener("touchmove",e.handleTouchMove,!1)},e.unbindEvents=function(t,n){t.removeEventListener("mousedown",e.handleMouseDown),n.querySelector("body").removeEventListener("keypress",e.handleKeyPress),t.removeEventListener("mouseup",e.handleMouseUp),t.removeEventListener("mousemove",e.handleMouseMove),t.removeEventListener("touchstart",e.handleTouchStart),t.removeEventListener("touchend",e.handleTouchEnd),t.removeEventListener("touchcancel",e.handleTouchEnd),t.removeEventListener("touchmove",e.handleTouchMove)},e.handleKeyPress=function(n){e.setEventPosition(n.clientX,t.canvas.clientHeight-n.clientY+1,0,0),t.controlKey=n.ctrlKey,t.altKey=n.altKey,t.shiftKey=n.shiftKey,t.keyCode=String.fromCharCode(n.charCode),e.charEvent()},e.handleMouseDown=function(n){switch(e.setEventPosition(n.clientX,t.canvas.clientHeight-n.clientY+1,0,0),t.controlKey=n.ctrlKey,t.altKey=n.altKey,t.shiftKey=n.shiftKey,n.which){case 1:e.leftButtonPressEvent()}},e.handleMouseMove=function(n){e.setEventPosition(n.clientX,t.canvas.clientHeight-n.clientY+1,0,0),e.mouseMoveEvent()},e.handleMouseUp=function(n){switch(e.setEventPosition(n.clientX,t.canvas.clientHeight-n.clientY+1,0,0),n.which){case 1:e.leftButtonReleaseEvent()}},e.handleTouchStart=function(n){n.stopPropagation(),n.preventDefault(),console.log("touch down");for(var r=n.changedTouches,a=0;a<r.length;a++){var o=r[a];e.setEventPosition(o.clientX,t.canvas.clientHeight-o.clientY+1,0,o.identifier),e.setPointerIndex(o.identifier),e.startTouchEvent()}},e.handleTouchMove=function(n){n.stopPropagation(),n.preventDefault();for(var r=n.changedTouches,a=0;a<r.length;a++){var o=r[a];e.setEventPosition(o.clientX,t.canvas.clientHeight-o.clientY+1,0,o.identifier),e.setPointerIndex(o.identifier),e.mouseMoveEvent()}},e.handleTouchEnd=function(n){n.stopPropagation(),n.preventDefault();for(var r=n.changedTouches,a=0;a<r.length;a++){var o=r[a];e.setEventPosition(o.clientX,t.canvas.clientHeight-o.clientY+1,0,o.identifier),e.setPointerIndex(o.identifier),e.endTouchEvent()}},e.findPokedRenderer=function(e,n){var r=t.view.getRenderable().getRenderers(),a=null,o=null,i=null;return r.forEach(function(r){t.view.isInViewport(e,n,r)&&r.getInteractive()&&(i=r),null===a&&r.getInteractive()&&(a=r),null===o&&t.view.isInViewport(e,n,r)&&(o=r)}),null===i&&(i=a),null===i&&(i=o),null==i&&(i=r[0]),i},e.render=function(){t.view&&t.enabled&&t.enableRender&&t.view.traverseAllPasses(),e.invokeRenderEvent()},p.forEach(function(n){var r=n.charAt(0).toLowerCase()+n.slice(1);e[r+"Event"]=function(){t.enabled&&e["invoke"+n]({type:n})}}),e.mouseMoveEvent=function(){t.enabled&&(t.recognizeGestures&&t.pointersDownCount>1?e.recognizeGesture("MouseMove"):e.invokeMouseMove({type:"MouseMove"}))},e.recognizeGesture=function(n){if(!(t.pointersDownCount>2)){if("LeftButtonPress"===n)return Object.keys(t.pointersDown).forEach(function(e){t.startingEventPositions[e]=t.eventPositions[e]}),void(t.currentGesture="Start");if("LeftButtonRelease"===n)return"Pinch"===t.currentGesture&&e.endPinchEvent(),"Rotate"===t.currentGesture&&e.endRotateEvent(),"Pan"===t.currentGesture&&e.endPanEvent(),void(t.currentGesture="Start");var r=0,a=[],o=[];if(Object.keys(t.pointersDown).forEach(function(e){a[r]=t.eventPositions[e],o[r]=t.startingEventPositions[e],r++}),"MouseMove"===n){var i=Math.sqrt((o[0].x-o[1].x)*(o[0].x-o[1].x)+(o[0].y-o[1].y)*(o[0].y-o[1].y)),u=Math.sqrt((a[0].x-a[1].x)*(a[0].x-a[1].x)+(a[0].y-a[1].y)*(a[0].y-a[1].y)),s=c["default"].degreesFromRadians(Math.atan2(o[1].y-o[0].y,o[1].x-o[0].x)),l=c["default"].degreesFromRadians(Math.atan2(a[1].y-a[0].y,a[1].x-a[0].x)),d=l-s;l=l+180>=360?l-180:l+180,s=s+180>=360?s-180:s+180,Math.abs(l-s)<Math.abs(d)&&(d=l-s);var f=[];if(f[0]=(a[0].x-o[0].x+a[1].x-o[1].x)/2,f[1]=(a[0].y-o[0].y+a[1].y-o[1].y)/2,"Start"===t.currentGesture){var p=.01*Math.sqrt(t.canvas.clientWidth*t.canvas.clientWidth+t.canvas.clientHeight*t.canvas.clientHeight);p<15&&(p=15);var g=Math.abs(u-i),v=3.1415926*u*Math.abs(d)/360,m=Math.sqrt(f[0]*f[0]+f[1]*f[1]);g>p&&g>v&&g>m?(t.currentGesture="Pinch",t.scale=1,e.startPinchEvent()):v>p&&v>m?(t.currentGesture="Rotate",t.rotation=0,e.startRotateEvent()):m>p&&(t.currentGesture="Pan",t.translation[0]=0,t.translation[1]=0,e.startPanEvent())}"Rotate"===t.currentGesture&&(e.setRotation(d),e.rotateEvent()),"Pinch"===t.currentGesture&&(e.setScale(u/i),e.pinchEvent()),"Pan"===t.currentGesture&&(e.setTranslation(f),e.panEvent())}}},e.setScale=function(n){t.lastScale=t.scale,t.scale!==n&&(t.scale=n,e.modified())},e.setRotation=function(n){t.lastRotation=t.rotation,t.rotation!==n&&(t.rotation=n,e.modified())},e.setTranslation=function(n){t.lastTranslation=t.translation,t.translation!==n&&(t.translation=n,e.modified())},e.startTouchEvent=function(){if(t.enabled)return t.recognizeGestures&&(t.pointersDown[t.pointerIndex]||(t.pointersDown[t.pointerIndex]=1,t.pointersDownCount++),t.pointersDownCount>1)?(2===t.pointersDownCount&&e.invokeLeftButtonRelease({type:"LeftButtonRelease"}),void e.recognizeGesture("LeftButtonPress")):void e.invokeLeftButtonPress({type:"LeftButtonPress"})},e.endTouchEvent=function(){t.enabled&&(t.recognizeGestures?t.pointersDown[t.pointerIndex]&&(t.pointersDownCount>1&&e.recognizeGesture("LeftButtonRelease"),delete t.pointersDown[t.pointerIndex],t.startingEventPositions[t.pointerIndex]&&delete t.startingEventPositions[t.pointerIndex],t.eventPositions[t.pointerIndex]&&delete t.eventPositions[t.pointerIndex],t.lastEventPositions[t.pointerIndex]&&delete t.lastEventPositions[t.pointerIndex],t.pointersDownCount--,e.invokeLeftButtonRelease({type:"LeftButtonRelease"})):e.invokeLeftButtonRelease({type:"LeftButtonRelease"}))}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,g,n),t.eventPositions={},t.lastEventPositions={},t.pointersDown={},t.startingEventPositions={},s.obj(e,t),s.event(e,t,"RenderEvent"),p.forEach(function(n){return s.event(e,t,n)}),s.get(e,t,["initialized","enabled","enableRender","scale","lastScale","rotation","lastRotation"]),s.setGet(e,t,["pointerIndex","lightFollowCamera","enabled","shiftKey","controlKey","altKey","keyCode","view","recognizeGestures"]),s.getArray(e,t,["translation","lastTranslation"]),o(e,t),e.setInteractorStyle(f["default"].newInstance())}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=n(13),s=a(u),l=n(22),c=r(l),d=n(69),f=r(d),p=["Enter","Leave","MouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","MouseWheelForward","MouseWheelBackward","Expose","Configure","Timer","KeyPress","KeyRelease","Char","Delete","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Tap","LongTap","Swipe"],g={eventPositions:null,lastEventPositions:null,startingEventPositions:null,pointersDown:null,pointersDownCount:0,pointerIndex:0,renderWindow:null,interactorStyle:null,picker:null,pickingManager:null,initialized:!1,enabled:!1,enableRender:!0,lightFollowCamera:!0,desiredUpdateRate:10,stillUpdateRate:.5,shiftKey:!1,altKey:!1,controlKey:!1,keyCode:0,canvas:null,view:null,recognizeGestures:!0,currentGesture:"Start",scale:1,lastScale:1,translation:[],lastTranslation:[],rotation:0,lastRotation:0},v=t.newInstance=s.newInstance(i);t["default"]=Object.assign({newInstance:v,extend:i})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkInteractorStyleTrackballCamera"),e.handleMouseMove=function(){var n=t.interactor.getEventPosition(t.interactor.getPointerIndex());switch(t.state){case p.STATES.VTKIS_ROTATE:e.findPokedRenderer(n.x,n.y),e.rotate(),e.invokeInteractionEvent({type:"InteractionEvent"});break;case p.STATES.VTKIS_PAN:e.findPokedRenderer(n.x,n.y),e.pan(),e.invokeInteractionEvent({type:"InteractionEvent"});break;case p.STATES.VTKIS_DOLLY:e.findPokedRenderer(n.x,n.y),e.dolly(),e.invokeInteractionEvent({type:"InteractionEvent"});break;case p.STATES.VTKIS_SPIN:e.findPokedRenderer(n.x,n.y),e.spin(),e.invokeInteractionEvent({type:"InteractionEvent"})}},e.handleLeftButtonPress=function(){var n=t.interactor.getEventPosition(t.interactor.getPointerIndex());e.findPokedRenderer(n.x,n.y),null!==t.currentRenderer&&(e.grabFocus(t.eventCallbackCommand),t.interactor.getShiftKey()?t.interactor.getControlKey()||t.interactor.getAltKey()?e.startDolly():e.startPan():t.interactor.getControlKey()||t.interactor.getAltKey()?e.startSpin():e.startRotate())},e.handleLeftButtonRelease=function(){switch(t.state){case p.STATES.VTKIS_DOLLY:e.endDolly();break;case p.STATES.VTKIS_PAN:e.endPan();break;case p.STATES.VTKIS_SPIN:e.endSpin();break;case p.STATES.VTKIS_ROTATE:e.endRotate()}t.interactor&&e.releaseFocus()},e.handlePinch=function(){var n=t.interactor.getEventPosition(t.interactor.getPointerIndex());if(e.findPokedRenderer(n.x,n.y),null!==t.currentRenderer){var r=t.currentRenderer.getActiveCamera(),a=t.interactor.getScale()/t.interactor.getLastScale();r.getParallelProjection()?r.setParallelScale(r.getParallelScale()/a):(r.dolly(a),t.autoAdjustCameraClippingRange&&t.currentRenderer.resetCameraClippingRange()),t.interactor.getLightFollowCamera()&&t.currentRenderer.updateLightsGeometryToFollowCamera(),t.interactor.render()}},e.handlePan=function(){var n=t.interactor.getEventPosition(t.interactor.getPointerIndex());if(e.findPokedRenderer(n.x,n.y),null!==t.currentRenderer){var r=t.currentRenderer.getActiveCamera(),a=t.interactor,o=r.getFocalPoint();o=e.computeWorldToDisplay(o[0],o[1],o[2]);var i=o[2],u=e.computeDisplayToWorld(n.x,n.y,i),s=a.getTranslation(),l=a.getLastTranslation();u=e.computeDisplayToWorld(o[0]+s[0]-l[0],o[1]+s[1]-l[1],i);var c=e.computeDisplayToWorld(o[0],o[1],i),d=[];d[0]=c[0]-u[0],d[1]=c[1]-u[1],
d[2]=c[2]-u[2],o=r.getFocalPoint();var f=r.getPosition();r.setFocalPoint(d[0]+o[0],d[1]+o[1],d[2]+o[2]),r.setPosition(d[0]+f[0],d[1]+f[1],d[2]+f[2]),t.interactor.getLightFollowCamera()&&t.currentRenderer.updateLightsGeometryToFollowCamera(),r.orthogonalizeViewUp(),t.interactor.render()}},e.handleRotate=function(){var n=t.interactor.getEventPosition(t.interactor.getPointerIndex());if(e.findPokedRenderer(n.x,n.y),null!==t.currentRenderer){var r=t.currentRenderer.getActiveCamera();r.roll(t.interactor.getRotation()-t.interactor.getLastRotation()),r.orthogonalizeViewUp(),t.interactor.render()}},e.rotate=function(){if(null!==t.currentRenderer){var e=t.interactor,n=t.interactor.getPointerIndex(),r=t.interactor.getEventPosition(n),a=t.interactor.getLastEventPosition(n),o=r.x-a.x,i=r.y-a.y,u=e.getView().getViewportSize(t.currentRenderer),s=-20/u[1],l=-20/u[0],c=o*l*t.motionFactor,d=i*s*t.motionFactor,f=t.currentRenderer.getActiveCamera();f.azimuth(c),f.elevation(d),f.orthogonalizeViewUp(),t.autoAdjustCameraClippingRange&&t.currentRenderer.resetCameraClippingRange(),e.getLightFollowCamera()&&t.currentRenderer.updateLightsGeometryToFollowCamera(),e.render()}},e.spin=function(){if(null!==t.currentRenderer){var e=t.interactor,n=t.interactor.getPointerIndex(),r=t.interactor.getEventPosition(n),a=t.interactor.getLastEventPosition(n),o=t.currentRenderer.getActiveCamera(),i=e.getView().getViewportCenter(t.currentRenderer),u=f["default"].degreesFromRadians(Math.atan2(r.y-i[1],r.x-i[0])),s=f["default"].degreesFromRadians(Math.atan2(a.y-i[1],a.x-i[0]));o.roll(u-s),o.orthogonalizeViewUp(),e.render()}},e.pan=function(){if(null!==t.currentRenderer){var n=t.interactor,r=t.interactor.getPointerIndex(),a=t.interactor.getEventPosition(r),o=t.interactor.getLastEventPosition(r),i=t.currentRenderer.getActiveCamera(),u=i.getFocalPoint();u=e.computeWorldToDisplay(u[0],u[1],u[2]);var s=u[2],l=e.computeDisplayToWorld(a.x,a.y,s),c=e.computeDisplayToWorld(o.x,o.y,s),d=[];d[0]=c[0]-l[0],d[1]=c[1]-l[1],d[2]=c[2]-l[2],u=i.getFocalPoint();var f=i.getPosition();i.setFocalPoint(d[0]+u[0],d[1]+u[1],d[2]+u[2]),i.setPosition(d[0]+f[0],d[1]+f[1],d[2]+f[2]),n.getLightFollowCamera()&&t.currentRenderer.updateLightsGeometryToFollowCamera(),n.render()}},e.dolly=function(){if(null!==t.currentRenderer){var n=t.interactor.getPointerIndex(),r=t.interactor.getEventPosition(n),a=t.interactor.getLastEventPosition(n),o=r.y-a.y,i=t.interactor,u=i.getView().getViewportCenter(t.currentRenderer),s=t.motionFactor*o/u[1];e.dollyByFactor(Math.pow(1.1,s))}},e.dollyByFactor=function(e){if(null!==t.currentRenderer){var n=t.interactor,r=t.currentRenderer.getActiveCamera();r.getParallelProjection()?r.setParallelScale(r.getParallelScale()/e):(r.dolly(e),t.autoAdjustCameraClippingRange&&t.currentRenderer.resetCameraClippingRange()),n.getLightFollowCamera()&&t.currentRenderer.updateLightsGeometryToFollowCamera(),n.render()}}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,g,n),c["default"].extend(e,t),s.obj(e,t),s.setGet(e,t,["motionFactor"]),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=n(13),s=a(u),l=n(70),c=r(l),d=n(22),f=r(d),p=n(72),g={motionFactor:10},v=t.newInstance=s.newInstance(i);t["default"]=Object.assign({newInstance:v,extend:i})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkInteractorStyle"),e.setInteractor=function(n){n!==t.interactor&&(t.interactor&&(t.unsubscribes.forEach(function(e){return e.unsubscribe()}),t.unsubscribes.clear()),t.interactor=n,n&&p.forEach(function(r){t.unsubscribes.set(r,n["on"+r](function(){e["handle"+r]&&e["handle"+r]()}))}))},Object.keys(f).forEach(function(n){e["start"+n]=function(){t.state===d.STATES.VTKIS_NONE&&e.startState(f[n])},e["end"+n]=function(){t.state===f[n]&&e.stopState()}}),e.handleChar=function(){var n=t.interactor,r=null;switch(n.getKeyCode()){case"r":case"R":r=t.interactor.getEventPosition(n.getPointerIndex()),e.findPokedRenderer(r.x,r.y),0!==t.currentRenderer?t.currentRenderer.resetCamera():console.warn("no current renderer on the interactor style."),n.render();break;case"w":case"W":if(r=t.interactor.getEventPosition(n.getPointerIndex()),e.findPokedRenderer(r.x,r.y),0!==t.currentRenderer){var a=t.currentRenderer.getActors();a.forEach(function(e){e.getProperty().setRepresentationToWireframe()})}else console.warn("no current renderer on the interactor style.");n.render();break;case"s":case"S":if(r=t.interactor.getEventPosition(n.getPointerIndex()),e.findPokedRenderer(r.x,r.y),0!==t.currentRenderer){var o=t.currentRenderer.getActors();o.forEach(function(e){e.getProperty().setRepresentationToSurface()})}else console.warn("no current renderer on the interactor style.");n.render()}},e.findPokedRenderer=function(n,r){e.setCurrentRenderer(t.interactor.findPokedRenderer(n,r))},e.startState=function(e){if(t.state=e,t.animationState===d.STATES.VTKIS_ANIM_OFF){var n=t.interactor;n.getRenderWindow().setDesiredUpdateRate(n.getDesiredUpdateRate()),t.invokeStartInteractionEvent({type:"StartInteractionEvent"})}},e.stopState=function(){if(t.state=d.STATES.VTKIS_NONE,t.animationState===d.STATES.VTKIS_ANIM_OFF){var n=t.interactor;n.getRenderWindow().setDesiredUpdateRate(n.getStillUpdateRate()),e.invokeEndInteractionEvent({type:"EndInteractionEvent"}),n.render()}}}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,g,n),c["default"].extend(e,t),s.obj(e,t),t.unsubscribes=new Map,o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=n(13),s=a(u),l=n(71),c=r(l),d=n(72),f={Rotate:d.STATES.VTKIS_ROTATE,Pan:d.STATES.VTKIS_PAN,Spin:d.STATES.VTKIS_SPIN,Dolly:d.STATES.VTKIS_DOLLY,Zoom:d.STATES.VTKIS_ZOOM,Timer:d.STATES.VTKIS_TIMER,TwoPointer:d.STATES.VTKIS_TWO_POINTER,UniformScale:d.STATES.VTKIS_USCALE},p=["Enter","Leave","MouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","MouseWheelForward","MouseWheelBackward","Expose","Configure","Timer","KeyPress","KeyRelease","Char","Delete","Pinch","Pan","Rotate","Tap","LongTap","Swipe"],g={state:d.STATES.VTKIS_NONE,animState:d.STATES.VTKIS_ANIM_OFF,handleObservers:1,autoAdjustCameraClippingRange:1,unsubscribes:null},v=t.newInstance=s.newInstance(i);t["default"]=Object.assign({newInstance:v,extend:i})},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e,t){t.classHierarchy.push("vtkInteractorObserver"),e.setInteractor=function(n){n!==t.interactor&&(t.interactor&&(e.setEnabled(!1),t.charObserverTag(),t.charObserverTag=null,t.deleteObserverTag(),t.deleteObserverTag=null),t.interactor=n,n&&(t.charObserverTag=n.onCharEvent(e.keyPressCallbackCommand),t.deleteObserverTag=n.onDeleteEvent(e.keyPressCallbackCommand)),e.modified())},e.computeDisplayToWorld=function(e,n,r){if(!t.currentRenderer)return null;var a=t.interactor.getView().displayToNormalizedDisplay(e,n,r);return t.currentRenderer.normalizedDisplayToWorld(a[0],a[1],a[2])},e.computeWorldToDisplay=function(e,n,r){if(!t.currentRenderer)return null;var a=t.currentRenderer.worldToNormalizedDisplay(e,n,r);return t.interactor.getView().normalizedDisplayToDisplay(a[0],a[1],a[2])},e.grabFocus=function(){},e.releaseFocus=function(){}}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,s,n),u.obj(e,t),u.event(e,t,"InteractionEvent"),u.event(e,t,"StartInteractionEvent"),u.event(e,t,"EndInteractionEvent"),u.get(e,t,["interactor"]),u.setGet(e,t,["priority","currentRenderer"]),a(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=o;var i=n(13),u=r(i),s={enabled:!1,interactor:null,currentRenderer:null,defaultRenderer:null,priority:0,keyPressActivationValue:"i",charObserverTag:null,deleteObserverTag:null},l=t.newInstance=u.newInstance(o);t["default"]=Object.assign({newInstance:l,extend:o})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.STATES={VTKIS_START:0,VTKIS_NONE:0,VTKIS_ROTATE:1,VTKIS_PAN:2,VTKIS_SPIN:3,VTKIS_DOLLY:4,VTKIS_ZOOM:5,VTKIS_USCALE:6,VTKIS_TIMER:7,VTKIS_FORWARDFLY:8,VTKIS_REVERSEFLY:9,VTKIS_TWO_POINTER:10,VTKIS_ANIM_OFF:0,VTKIS_ANIM_ON:1,VTKIS_WINDOW_LEVEL:1024,VTKIS_PICK:1025,VTKIS_SLICE:1026};t["default"]={STATES:n}},function(e,t){e.exports="<table style=width:400px> <tr> <td>Radius</td> <td> <input class=radius type=range min=0.5 max=2.0 step=0.1 value=1.0 /> </td> </tr> <tr> <td>Theta Resolution</td> <td> <input class=thetaResolution type=range min=4 max=100 step=1 value=8 /> </td> </tr> <tr> <td>Start Theta</td> <td> <input class=startTheta type=range min=0 max=360 step=1 value=0 /> </td> </tr> <tr> <td>End Theta</td> <td> <input class=endTheta type=range min=0 max=360 step=1 value=360 /> </td> </tr> <tr> <td>Phi Resolution</td> <td> <input class=phiResolution type=range min=4 max=100 step=1 value=8 /> </td> </tr> <tr> <td>Start Phi</td> <td> <input class=startPhi type=range min=0 max=180 step=1 value=0 /> </td> </tr> <tr> <td>End Phi</td> <td> <input class=endPhi type=range min=0 max=180 step=1 value=180 /> </td> </tr> </table> <div class=renderwidow style=width:400px></div> "}]);