!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){(function(t){e.exports=t.EmptyRenderer=r(1)}).call(t,function(){return this}())},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(){g.traverseAllPasses(),m&&window.requestAnimationFrame(o)}var a=r(2),i=n(a),u=r(46),s=n(u),l=r(47),c=n(l),d=s["default"].newInstance(),f=c["default"].newInstance();d.addRenderer(f),f.setBackground(.7,1,.7);var g=i["default"].newInstance();g.setContainer(document.querySelector("body")),g.setRenderable(d),g.traverseAllPasses();var m=!1,p=document.createElement("button");p.setAttribute("type","input"),p.innerHTML="start",document.getElementsByTagName("body")[0].appendChild(p),p.addEventListener("click",function(){m=!m,p.innerHTML=m?"stop":"start",m&&window.requestAnimationFrame(o)}),o()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e,t){function r(){t.renderable&&(t.canvas.setAttribute("width",t.size[0]),t.canvas.setAttribute("height",t.size[1])),t.canvas.style.display=t.useOffScreen?"none":"block",t.el&&(t.el.style.cursor=t.cursorVisibility?t.cursor:"none")}t.classHierarchy.push("vtkOpenGLRenderWindow"),e.onModified(r),e.build=function(r){if(r){if(!t.renderable)return;e.prepareNodes(),e.addMissingNodes(t.renderable.getRenderers()),e.removeUnusedNodes()}},e.initialize=function(){if(!t.initialized){t.context=e.get3DContext(),t.textureUnitManager=v["default"].newInstance(),t.textureUnitManager.setContext(t.context),t.shaderCache.setContext(t.context);var r=t.context;r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA),r.enable(r.BLEND),t.initialized=!0}},e.makeCurrent=function(){t.context.makeCurrent()},e.frame=function(){},e.render=function(r){r?(e.initialize(),t.children.forEach(function(e){e.setContext(t.context)})):e.frame()},e.setContainer=function(r){t.el&&t.el!==r&&(t.canvas.parentNode===t.el?t.el.removeChild(t.canvas):console.log("Error: canvas parent node does not match container")),t.el!==r&&(t.el=r,t.el.appendChild(t.canvas),e.modified())},e.isInViewport=function(e,r,n){var o=n.getViewport(),a=t.size;return o[0]*a[0]<=e&&o[2]*a[0]>=e&&o[1]*a[1]<=r&&o[3]*a[1]>=r},e.getViewportSize=function(e){var r=e.getViewport(),n=t.size;return[(r[2]-r[0])*n[0],(r[3]-r[1])*n[1]]},e.getViewportCenter=function(t){var r=e.getViewportSize(t);return[.5*r[0],.5*r[1]]},e.displayToNormalizedDisplay=function(e,r,n){return[e/(t.size[0]-1),r/(t.size[1]-1),n]},e.normalizedDisplayToDisplay=function(e,r,n){return[e*(t.size[0]-1),r*(t.size[1]-1),n]},e.get2DContext=function(){return t.canvas.getContext("2d")},e.get3DContext=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{preserveDrawingBuffer:!0,premultipliedAlpha:!1};return t.canvas.getContext("webgl",e)||t.canvas.getContext("experimental-webgl",e)},e.activateTexture=function(r){var n=t.textureResourceIds.get(r);if(void 0!==n)return void t.context.activeTexture(t.context.TEXTURE0+n);var o=e.getTextureUnitManager().allocate();return o<0?void console.error("Hardware does not support the number of textures defined."):(t.textureResourceIds.set(r,o),void t.context.activeTexture(t.context.TEXTURE0+o))},e.deactivateTexture=function(r){var n=t.textureResourceIds.get(r);void 0!==n&&(e.getTextureUnitManager().free(n),delete t.textureResourceIds["delete"](r))},e.getTextureUnitForTexture=function(e){var r=t.textureResourceIds.get(e);return void 0!==r?r:-1},e.getDefaultTextureInternalFormat=function(e,r,n){switch(r){case 1:return t.context.LUMINANCE;case 2:return t.context.LUMINANCE_ALPHA;case 3:return t.context.RGB;case 4:default:return t.context.RGBA}},e.captureImage=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png";return e.traverseAllPasses(),t.canvas.toDataURL(r)}}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,h,r),t.canvas=document.createElement("canvas"),t.textureResourceIds=new Map,m["default"].extend(e,t),t.myFactory=c["default"].newInstance(),t.shaderCache=f["default"].newInstance(),s.get(e,t,["shaderCache","textureUnitManager"]),s.setGet(e,t,["initialized","context"]),s.setGetArray(e,t,["size"],2),a(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.vtkOpenGLRenderWindow=a,t.extend=i;var u=r(3),s=o(u),l=r(5),c=n(l),d=r(43),f=n(d),g=r(18),m=n(g),p=r(45),v=n(p),h={shaderCache:null,initialized:!1,context:null,canvas:null,size:[300,300],cursorVisibility:!0,cursor:"pointer",textureUnitManager:null,textureResourceIds:null},T=t.newInstance=s.newInstance(i);t["default"]={newInstance:T,extend:i}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e){return e.charAt(0).toUpperCase()+e.slice(1)}function i(e,t){return Object.keys(e).find(function(r){return e[r]===t})}function u(e){function t(e){i[e]=null}function r(e){function r(){t(e)}return Object.freeze({unsubscribe:r})}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=[];n.mtime=n.mtime||M,n.classHierarchy=["vtkObject"],e.modified=function(){return n.deleted?void console.log("instance deleted - can not call any method"):(n.mtime=++M,void i.forEach(function(t){return t&&t(e)}))},e.onModified=function(e){if(n.deleted)return console.log("instance deleted - can not call any method"),null;var t=i.length;return i.push(e),r(t)},e.getMTime=function(){return n.mtime},e.isA=function(e){return n.classHierarchy.indexOf(e)!==-1},e.getClassName=function(){return n.classHierarchy.slice(-1)[0]},e.set=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t).forEach(function(r){Array.isArray(t[r])?e["set"+a(r)].apply(e,o(t[r])):e["set"+a(r)]?e["set"+a(r)](t[r]):(["mtime"].indexOf(r)===-1&&console.log("Warning: Set value to model directly",r,t[r]),n[r]=t[r])})},e.get=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t)return n;var o={};return t.forEach(function(e){o[e]=n[e]}),o},e["delete"]=function(){Object.keys(n).forEach(function(e){return delete n[e]}),i.forEach(function(e,r){return t(r)}),n.deleted=!0}}function s(e,t,r){r.forEach(function(r){"object"===("undefined"==typeof r?"undefined":T(r))?e["get"+a(r.name)]=function(){return t[r]}:e["get"+a(r)]=function(){return t[r]}})}function l(e){if("object"===("undefined"==typeof e?"undefined":T(e))){var t=function(){var t=b[e.type];return t?{v:function(r,n){return t(r,n,e)}}:void console.error("No setter for field",e)}();if("object"===("undefined"==typeof t?"undefined":T(t)))return t.v}return function(t,r){return function(n){return r.deleted?(console.log("instance deleted - can not call any method"),!1):r[e]!==n&&(r[e]=n,t.modified(),!0)}}}function c(e,t,r){r.forEach(function(r){e["set"+a(r)]=l(r)(e,t)})}function d(e,t,r){s(e,t,r),c(e,t,r)}function f(e,t,r){r.forEach(function(r){e["get"+a(r)]=function(){return[].concat(t[r])}})}function g(e,t,r,n){r.forEach(function(r){e["set"+a(r)]=function(){for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];if(t.deleted)return void console.log("instance deleted - can not call any method");var i=!1;t[r].forEach(function(e,t){if(e!==o[t]){if(i)return;i=!0}}),i&&(t[r]=[].concat(o),e.modified())}})}function m(e,t,r,n){f(e,t,r),g(e,t,r,n)}function p(e,t,r,n){function o(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.deleted?void console.log("instance deleted - can not call any method"):(t.inputData[r]=e,void(t.inputConnection[r]=null))}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.inputConnection[e]&&(t.inputData[e]=t.inputConnection[e]()),t.inputData[e]}function i(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.deleted?void console.log("instance deleted - can not call any method"):(t.inputData[r]=null,void(t.inputConnection[r]=e))}function u(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.deleted?(console.log("instance deleted - can not call any method"),null):(e.update(),t.output[r])}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){return u(e)}}if(t.inputData=[],t.inputConnection=[],t.output=[],t.inputArrayToProcess=[],r){for(var l=r;l--;)t.inputData.push(null),t.inputConnection.push(null);e.setInputData=o,e.setInputConnection=i,e.getInputData=a}n&&(e.getOutputData=u,e.getOutputPort=s),e.update=function(){var n=[];if(r)for(var o=0;o<r;)n[o]=e.getInputData(o),o++;e.requestData(n,t.output)},e.getNumberOfInputPorts=function(){return r},e.getNumberOfOutputPorts=function(){return n},e.getInputArrayToProcess=function(e){var r=t.inputArrayToProcess[e],n=t.inputData[e];return r&&n?n["get"+r.fieldAssociation]().getArray(r.arrayName):null},e.setInputArrayToProcess=function(e,r,n){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Scalars";t.inputArrayToProcess.length<e;)t.inputArrayToProcess.push(null);t.inputArrayToProcess[e]={arrayName:r,fieldAssociation:n,attributeType:o}}}function v(e,t,r){function n(e){i[e]=null}function o(e){function t(){n(e)}return Object.freeze({unsubscribe:t})}var i=[],u=e["delete"];e["invoke"+a(r)]=function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return t.deleted?void console.log("instance deleted - can not call any method"):void i.forEach(function(t){return t&&t.apply(e,n)})},e["on"+a(r)]=function(e){if(t.deleted)return console.log("instance deleted - can not call any method"),null;var r=i.length;return i.push(e),o(r)},e["delete"]=function(){u(),i.forEach(function(e,t){return n(t)})}}function h(e,t){var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={},n={};return e(n,r,t),Object.freeze(n)};return t&&C["default"].register(t,r),r}Object.defineProperty(t,"__esModule",{value:!0});var T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.capitalize=a,t.enumToString=i,t.obj=u,t.get=s,t.set=c,t.setGet=d,t.getArray=f,t.setArray=g,t.setGetArray=m,t.algo=p,t.event=v,t.newInstance=h;var x=r(4),C=n(x),M=0,b={"enum":function(e,t,r){return function(n){if("string"==typeof n)return void 0!==t["enum"][n]?t[r.name]!==t["enum"][n]&&(t[r.name]=t["enum"][n],e.modified(),!0):(console.log("Set Enum with invalid argument",r,n),null);if("number"==typeof n){if(t[r.name]!==n){if(Object.keys(r["enum"]).map(function(e){return r["enum"][e]}).indexOf(n)!==-1)return t[r.name]=n,e.modified(),!0;console.log("Set Enum outside range",r,n)}return!1}return console.log("Set Enum with invalid argument (String/Number)",r,n),null}}}},function(e,t){"use strict";function r(e){if(e.isA)return e;if(!e.type)return console.log("Invalid VTK object"),null;var t=o[e.type];return t?t(e):(console.log("No vtk class found for Object of type",e.type),null)}function n(e,t){o[e]=t}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r,t.register=n;var o={};r.register=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e,t){t.classHierarchy.push("vtkOpenGLViewNodeFactory")}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,S,r),c["default"].extend(e,t),a(e,t),e.registerOverride("vtkActor",f["default"].newInstance),e.registerOverride("vtkActor2D",m["default"].newInstance),e.registerOverride("vtkCamera",v["default"].newInstance),e.registerOverride("vtkImageMapper",T["default"].newInstance),e.registerOverride("vtkImageSlice",C["default"].newInstance),e.registerOverride("vtkMapper",b["default"].newInstance),e.registerOverride("vtkRenderWindow",A["default"].newInstance),e.registerOverride("vtkRenderer",P["default"].newInstance),e.registerOverride("vtkTexture",w["default"].newInstance)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.vtkOpenGLViewNodeFactory=a,t.extend=i;var u=r(3),s=o(u),l=r(6),c=n(l),d=r(7),f=n(d),g=r(19),m=n(g),p=r(20),v=n(p),h=r(21),T=n(h),x=r(39),C=n(x),M=r(40),b=n(M),y=r(2),A=n(y),O=r(42),P=n(O),V=r(34),w=n(V),S={},E=t.newInstance=s.newInstance(i);t["default"]={newInstance:E,extend:i}},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkViewNodeFactory"),e.createNode=function(r){if(Object.keys(t.overrides).indexOf(r.getClassName())===-1)return null;var n=t.overrides[r.getClassName()]();return n.setMyFactory(e),n},e.registerOverride=function(e,r){t.overrides[e]=r}}function a(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,s,r),u.obj(e,t),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=a;var i=r(3),u=n(i),s={overrides:{}},l=t.newInstance=u.newInstance(a);t["default"]={newInstance:l,extend:a}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e,t){t.classHierarchy.push("vtkOpenGLActor"),e.build=function(r){r&&(e.prepareNodes(),e.addMissingNodes(t.renderable.getTextures()),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes())},e.traverse=function(r){t.renderable&&t.renderable.getVisibility()&&(e.apply(r,!0),t.activeTextures=[],t.children.forEach(function(e){e.apply(r,!0),e.isA("vtkOpenGLTexture")&&"Render"===r&&t.activeTextures.push(e)}),t.children.forEach(function(e){e.apply(r,!1)}),e.apply(r,!1))},e.render=function(r){if(r)t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),e.preRender();else{t.children.forEach(function(e){e.isA("vtkOpenGLTexture")&&e.deactivate()});var n=0!==t.renderable.getIsOpaque();n||t.context.depthMask(!0)}},e.preRender=function(){var e=0!==t.renderable.getIsOpaque();e?t.context.depthMask(!0):t.context.depthMask(!1)},e.getKeyMatrices=function(){return t.renderable.getMTime()>t.keyMatrixTime.getMTime()&&(t.renderable.computeMatrix(),u.mat4.copy(t.MCWCMatrix,t.renderable.getMatrix()),u.mat4.transpose(t.MCWCMatrix,t.MCWCMatrix),t.renderable.getIsIdentity()?u.mat3.identity(t.normalMatrix):(u.mat3.fromMat4(t.normalMatrix,t.MCWCMatrix),u.mat3.invert(t.normalMatrix,t.normalMatrix)),t.keyMatrixTime.modified()),{mcwc:t.MCWCMatrix,normalMatrix:t.normalMatrix}}}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,f,r),d["default"].extend(e,t),t.keyMatrixTime={},l.obj(t.keyMatrixTime),t.normalMatrix=u.mat3.create(),t.MCWCMatrix=u.mat4.create(),l.setGet(e,t,["context"]),l.get(e,t,["activeTextures"]),a(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=r(8),s=r(3),l=o(s),c=r(18),d=n(c),f={context:null,keyMatrixTime:null,normalMatrix:null,MCWCMatrix:null,activeTextures:[]},g=t.newInstance=l.newInstance(i);t["default"]={newInstance:g,extend:i}},function(e,t,r){t.glMatrix=r(9),t.mat2=r(10),t.mat2d=r(11),t.mat3=r(12),t.mat4=r(13),t.quat=r(14),t.vec2=r(17),t.vec3=r(15),t.vec4=r(16)},function(e,t){var r={};r.EPSILON=1e-6,r.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,r.RANDOM=Math.random,r.setMatrixArrayType=function(e){GLMAT_ARRAY_TYPE=e};var n=Math.PI/180;r.toRadian=function(e){return e*n},e.exports=r},function(e,t,r){var n=r(9),o={};o.create=function(){var e=new n.ARRAY_TYPE(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},o.clone=function(e){var t=new n.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},o.transpose=function(e,t){if(e===t){var r=t[1];e[1]=t[2],e[2]=r}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},o.invert=function(e,t){var r=t[0],n=t[1],o=t[2],a=t[3],i=r*a-o*n;return i?(i=1/i,e[0]=a*i,e[1]=-n*i,e[2]=-o*i,e[3]=r*i,e):null},o.adjoint=function(e,t){var r=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=r,e},o.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},o.multiply=function(e,t,r){var n=t[0],o=t[1],a=t[2],i=t[3],u=r[0],s=r[1],l=r[2],c=r[3];return e[0]=n*u+a*s,e[1]=o*u+i*s,e[2]=n*l+a*c,e[3]=o*l+i*c,e},o.mul=o.multiply,o.rotate=function(e,t,r){var n=t[0],o=t[1],a=t[2],i=t[3],u=Math.sin(r),s=Math.cos(r);return e[0]=n*s+a*u,e[1]=o*s+i*u,e[2]=n*-u+a*s,e[3]=o*-u+i*s,e},o.scale=function(e,t,r){var n=t[0],o=t[1],a=t[2],i=t[3],u=r[0],s=r[1];return e[0]=n*u,e[1]=o*u,e[2]=a*s,e[3]=i*s,e},o.fromRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},o.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},o.LDU=function(e,t,r,n){return e[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-e[2]*r[1],[e,t,r]},e.exports=o},function(e,t,r){var n=r(9),o={};o.create=function(){var e=new n.ARRAY_TYPE(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},o.clone=function(e){var t=new n.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},o.invert=function(e,t){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=r*a-n*o;return s?(s=1/s,e[0]=a*s,e[1]=-n*s,e[2]=-o*s,e[3]=r*s,e[4]=(o*u-a*i)*s,e[5]=(n*i-r*u)*s,e):null},o.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},o.multiply=function(e,t,r){var n=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=r[0],c=r[1],d=r[2],f=r[3],g=r[4],m=r[5];return e[0]=n*l+a*c,e[1]=o*l+i*c,e[2]=n*d+a*f,e[3]=o*d+i*f,e[4]=n*g+a*m+u,e[5]=o*g+i*m+s,e},o.mul=o.multiply,o.rotate=function(e,t,r){var n=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=Math.sin(r),c=Math.cos(r);return e[0]=n*c+a*l,e[1]=o*c+i*l,e[2]=n*-l+a*c,e[3]=o*-l+i*c,e[4]=u,e[5]=s,e},o.scale=function(e,t,r){var n=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=r[0],c=r[1];return e[0]=n*l,e[1]=o*l,e[2]=a*c,e[3]=i*c,e[4]=u,e[5]=s,e},o.translate=function(e,t,r){var n=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=r[0],c=r[1];return e[0]=n,e[1]=o,e[2]=a,e[3]=i,e[4]=n*l+a*c+u,e[5]=o*l+i*c+s,e},o.fromRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e[4]=0,e[5]=0,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},o.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},o.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},e.exports=o},function(e,t,r){var n=r(9),o={};o.create=function(){var e=new n.ARRAY_TYPE(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},o.clone=function(e){var t=new n.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.transpose=function(e,t){if(e===t){var r=t[1],n=t[2],o=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=o}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},o.invert=function(e,t){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],l=t[7],c=t[8],d=c*i-u*l,f=-c*a+u*s,g=l*a-i*s,m=r*d+n*f+o*g;return m?(m=1/m,e[0]=d*m,e[1]=(-c*n+o*l)*m,e[2]=(u*n-o*i)*m,e[3]=f*m,e[4]=(c*r-o*s)*m,e[5]=(-u*r+o*a)*m,e[6]=g*m,e[7]=(-l*r+n*s)*m,e[8]=(i*r-n*a)*m,e):null},o.adjoint=function(e,t){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],l=t[7],c=t[8];return e[0]=i*c-u*l,e[1]=o*l-n*c,e[2]=n*u-o*i,e[3]=u*s-a*c,e[4]=r*c-o*s,e[5]=o*a-r*u,e[6]=a*l-i*s,e[7]=n*s-r*l,e[8]=r*i-n*a,e},o.determinant=function(e){var t=e[0],r=e[1],n=e[2],o=e[3],a=e[4],i=e[5],u=e[6],s=e[7],l=e[8];return t*(l*a-i*s)+r*(-l*o+i*u)+n*(s*o-a*u)},o.multiply=function(e,t,r){var n=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],d=t[8],f=r[0],g=r[1],m=r[2],p=r[3],v=r[4],h=r[5],T=r[6],x=r[7],C=r[8];return e[0]=f*n+g*i+m*l,e[1]=f*o+g*u+m*c,e[2]=f*a+g*s+m*d,e[3]=p*n+v*i+h*l,e[4]=p*o+v*u+h*c,e[5]=p*a+v*s+h*d,e[6]=T*n+x*i+C*l,e[7]=T*o+x*u+C*c,e[8]=T*a+x*s+C*d,e},o.mul=o.multiply,o.translate=function(e,t,r){var n=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],d=t[8],f=r[0],g=r[1];return e[0]=n,e[1]=o,e[2]=a,e[3]=i,e[4]=u,e[5]=s,e[6]=f*n+g*i+l,e[7]=f*o+g*u+c,e[8]=f*a+g*s+d,e},o.rotate=function(e,t,r){var n=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],d=t[8],f=Math.sin(r),g=Math.cos(r);return e[0]=g*n+f*i,e[1]=g*o+f*u,e[2]=g*a+f*s,e[3]=g*i-f*n,e[4]=g*u-f*o,e[5]=g*s-f*a,e[6]=l,e[7]=c,e[8]=d,e},o.scale=function(e,t,r){var n=r[0],o=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=o*t[3],e[4]=o*t[4],e[5]=o*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},o.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},o.fromRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},o.fromQuat=function(e,t){var r=t[0],n=t[1],o=t[2],a=t[3],i=r+r,u=n+n,s=o+o,l=r*i,c=n*i,d=n*u,f=o*i,g=o*u,m=o*s,p=a*i,v=a*u,h=a*s;return e[0]=1-d-m,e[3]=c-h,e[6]=f+v,e[1]=c+h,e[4]=1-l-m,e[7]=g-p,e[2]=f-v,e[5]=g+p,e[8]=1-l-d,e},o.normalFromMat4=function(e,t){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],l=t[7],c=t[8],d=t[9],f=t[10],g=t[11],m=t[12],p=t[13],v=t[14],h=t[15],T=r*u-n*i,x=r*s-o*i,C=r*l-a*i,M=n*s-o*u,b=n*l-a*u,y=o*l-a*s,A=c*p-d*m,O=c*v-f*m,P=c*h-g*m,V=d*v-f*p,w=d*h-g*p,S=f*h-g*v,E=T*S-x*w+C*V+M*P-b*O+y*A;return E?(E=1/E,e[0]=(u*S-s*w+l*V)*E,e[1]=(s*P-i*S-l*O)*E,e[2]=(i*w-u*P+l*A)*E,e[3]=(o*w-n*S-a*V)*E,e[4]=(r*S-o*P+a*O)*E,e[5]=(n*P-r*w-a*A)*E,e[6]=(p*y-v*b+h*M)*E,e[7]=(v*C-m*y-h*x)*E,e[8]=(m*b-p*C+h*T)*E,e):null},o.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},e.exports=o},function(e,t,r){var n=r(9),o={};o.create=function(){var e=new n.ARRAY_TYPE(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.clone=function(e){var t=new n.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.transpose=function(e,t){if(e===t){var r=t[1],n=t[2],o=t[3],a=t[6],i=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=a,e[11]=t[14],e[12]=o,e[13]=i,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},o.invert=function(e,t){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],l=t[7],c=t[8],d=t[9],f=t[10],g=t[11],m=t[12],p=t[13],v=t[14],h=t[15],T=r*u-n*i,x=r*s-o*i,C=r*l-a*i,M=n*s-o*u,b=n*l-a*u,y=o*l-a*s,A=c*p-d*m,O=c*v-f*m,P=c*h-g*m,V=d*v-f*p,w=d*h-g*p,S=f*h-g*v,E=T*S-x*w+C*V+M*P-b*O+y*A;return E?(E=1/E,e[0]=(u*S-s*w+l*V)*E,e[1]=(o*w-n*S-a*V)*E,e[2]=(p*y-v*b+h*M)*E,e[3]=(f*b-d*y-g*M)*E,e[4]=(s*P-i*S-l*O)*E,e[5]=(r*S-o*P+a*O)*E,e[6]=(v*C-m*y-h*x)*E,e[7]=(c*y-f*C+g*x)*E,e[8]=(i*w-u*P+l*A)*E,e[9]=(n*P-r*w-a*A)*E,e[10]=(m*b-p*C+h*T)*E,e[11]=(d*C-c*b-g*T)*E,e[12]=(u*O-i*V-s*A)*E,e[13]=(r*V-n*O+o*A)*E,e[14]=(p*x-m*M-v*T)*E,e[15]=(c*M-d*x+f*T)*E,e):null},o.adjoint=function(e,t){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],l=t[7],c=t[8],d=t[9],f=t[10],g=t[11],m=t[12],p=t[13],v=t[14],h=t[15];return e[0]=u*(f*h-g*v)-d*(s*h-l*v)+p*(s*g-l*f),e[1]=-(n*(f*h-g*v)-d*(o*h-a*v)+p*(o*g-a*f)),e[2]=n*(s*h-l*v)-u*(o*h-a*v)+p*(o*l-a*s),e[3]=-(n*(s*g-l*f)-u*(o*g-a*f)+d*(o*l-a*s)),e[4]=-(i*(f*h-g*v)-c*(s*h-l*v)+m*(s*g-l*f)),e[5]=r*(f*h-g*v)-c*(o*h-a*v)+m*(o*g-a*f),e[6]=-(r*(s*h-l*v)-i*(o*h-a*v)+m*(o*l-a*s)),e[7]=r*(s*g-l*f)-i*(o*g-a*f)+c*(o*l-a*s),e[8]=i*(d*h-g*p)-c*(u*h-l*p)+m*(u*g-l*d),e[9]=-(r*(d*h-g*p)-c*(n*h-a*p)+m*(n*g-a*d)),e[10]=r*(u*h-l*p)-i*(n*h-a*p)+m*(n*l-a*u),e[11]=-(r*(u*g-l*d)-i*(n*g-a*d)+c*(n*l-a*u)),e[12]=-(i*(d*v-f*p)-c*(u*v-s*p)+m*(u*f-s*d)),e[13]=r*(d*v-f*p)-c*(n*v-o*p)+m*(n*f-o*d),e[14]=-(r*(u*v-s*p)-i*(n*v-o*p)+m*(n*s-o*u)),e[15]=r*(u*f-s*d)-i*(n*f-o*d)+c*(n*s-o*u),e},o.determinant=function(e){var t=e[0],r=e[1],n=e[2],o=e[3],a=e[4],i=e[5],u=e[6],s=e[7],l=e[8],c=e[9],d=e[10],f=e[11],g=e[12],m=e[13],p=e[14],v=e[15],h=t*i-r*a,T=t*u-n*a,x=t*s-o*a,C=r*u-n*i,M=r*s-o*i,b=n*s-o*u,y=l*m-c*g,A=l*p-d*g,O=l*v-f*g,P=c*p-d*m,V=c*v-f*m,w=d*v-f*p;return h*w-T*V+x*P+C*O-M*A+b*y},o.multiply=function(e,t,r){var n=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],d=t[8],f=t[9],g=t[10],m=t[11],p=t[12],v=t[13],h=t[14],T=t[15],x=r[0],C=r[1],M=r[2],b=r[3];return e[0]=x*n+C*u+M*d+b*p,e[1]=x*o+C*s+M*f+b*v,e[2]=x*a+C*l+M*g+b*h,e[3]=x*i+C*c+M*m+b*T,x=r[4],C=r[5],M=r[6],b=r[7],e[4]=x*n+C*u+M*d+b*p,e[5]=x*o+C*s+M*f+b*v,e[6]=x*a+C*l+M*g+b*h,e[7]=x*i+C*c+M*m+b*T,x=r[8],C=r[9],M=r[10],b=r[11],e[8]=x*n+C*u+M*d+b*p,e[9]=x*o+C*s+M*f+b*v,e[10]=x*a+C*l+M*g+b*h,e[11]=x*i+C*c+M*m+b*T,x=r[12],C=r[13],M=r[14],b=r[15],e[12]=x*n+C*u+M*d+b*p,e[13]=x*o+C*s+M*f+b*v,e[14]=x*a+C*l+M*g+b*h,e[15]=x*i+C*c+M*m+b*T,e},o.mul=o.multiply,o.translate=function(e,t,r){var n,o,a,i,u,s,l,c,d,f,g,m,p=r[0],v=r[1],h=r[2];return t===e?(e[12]=t[0]*p+t[4]*v+t[8]*h+t[12],e[13]=t[1]*p+t[5]*v+t[9]*h+t[13],e[14]=t[2]*p+t[6]*v+t[10]*h+t[14],e[15]=t[3]*p+t[7]*v+t[11]*h+t[15]):(n=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],d=t[8],f=t[9],g=t[10],m=t[11],e[0]=n,e[1]=o,e[2]=a,e[3]=i,e[4]=u,e[5]=s,e[6]=l,e[7]=c,e[8]=d,e[9]=f,e[10]=g,e[11]=m,e[12]=n*p+u*v+d*h+t[12],e[13]=o*p+s*v+f*h+t[13],e[14]=a*p+l*v+g*h+t[14],e[15]=i*p+c*v+m*h+t[15]),e},o.scale=function(e,t,r){var n=r[0],o=r[1],a=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.rotate=function(e,t,r,o){var a,i,u,s,l,c,d,f,g,m,p,v,h,T,x,C,M,b,y,A,O,P,V,w,S=o[0],E=o[1],I=o[2],R=Math.sqrt(S*S+E*E+I*I);return Math.abs(R)<n.EPSILON?null:(R=1/R,S*=R,E*=R,I*=R,a=Math.sin(r),i=Math.cos(r),u=1-i,s=t[0],l=t[1],c=t[2],d=t[3],f=t[4],g=t[5],m=t[6],p=t[7],v=t[8],h=t[9],T=t[10],x=t[11],C=S*S*u+i,M=E*S*u+I*a,b=I*S*u-E*a,y=S*E*u-I*a,A=E*E*u+i,O=I*E*u+S*a,P=S*I*u+E*a,V=E*I*u-S*a,w=I*I*u+i,e[0]=s*C+f*M+v*b,e[1]=l*C+g*M+h*b,e[2]=c*C+m*M+T*b,e[3]=d*C+p*M+x*b,e[4]=s*y+f*A+v*O,e[5]=l*y+g*A+h*O,e[6]=c*y+m*A+T*O,e[7]=d*y+p*A+x*O,e[8]=s*P+f*V+v*w,e[9]=l*P+g*V+h*w,e[10]=c*P+m*V+T*w,e[11]=d*P+p*V+x*w,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},o.rotateX=function(e,t,r){var n=Math.sin(r),o=Math.cos(r),a=t[4],i=t[5],u=t[6],s=t[7],l=t[8],c=t[9],d=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*o+l*n,e[5]=i*o+c*n,e[6]=u*o+d*n,e[7]=s*o+f*n,e[8]=l*o-a*n,e[9]=c*o-i*n,e[10]=d*o-u*n,e[11]=f*o-s*n,e},o.rotateY=function(e,t,r){var n=Math.sin(r),o=Math.cos(r),a=t[0],i=t[1],u=t[2],s=t[3],l=t[8],c=t[9],d=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*o-l*n,e[1]=i*o-c*n,e[2]=u*o-d*n,e[3]=s*o-f*n,e[8]=a*n+l*o,e[9]=i*n+c*o,e[10]=u*n+d*o,e[11]=s*n+f*o,e},o.rotateZ=function(e,t,r){var n=Math.sin(r),o=Math.cos(r),a=t[0],i=t[1],u=t[2],s=t[3],l=t[4],c=t[5],d=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*o+l*n,e[1]=i*o+c*n,e[2]=u*o+d*n,e[3]=s*o+f*n,e[4]=l*o-a*n,e[5]=c*o-i*n,e[6]=d*o-u*n,e[7]=f*o-s*n,e},o.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromRotation=function(e,t,r){var o,a,i,u=r[0],s=r[1],l=r[2],c=Math.sqrt(u*u+s*s+l*l);return Math.abs(c)<n.EPSILON?null:(c=1/c,u*=c,s*=c,l*=c,o=Math.sin(t),a=Math.cos(t),i=1-a,e[0]=u*u*i+a,e[1]=s*u*i+l*o,e[2]=l*u*i-s*o,e[3]=0,e[4]=u*s*i-l*o,e[5]=s*s*i+a,e[6]=l*s*i+u*o,e[7]=0,e[8]=u*l*i+s*o,e[9]=s*l*i-u*o,e[10]=l*l*i+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},o.fromXRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromYRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromZRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromRotationTranslation=function(e,t,r){var n=t[0],o=t[1],a=t[2],i=t[3],u=n+n,s=o+o,l=a+a,c=n*u,d=n*s,f=n*l,g=o*s,m=o*l,p=a*l,v=i*u,h=i*s,T=i*l;return e[0]=1-(g+p),e[1]=d+T,e[2]=f-h,e[3]=0,e[4]=d-T,e[5]=1-(c+p),e[6]=m+v,e[7]=0,e[8]=f+h,e[9]=m-v,e[10]=1-(c+g),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},o.fromRotationTranslationScale=function(e,t,r,n){var o=t[0],a=t[1],i=t[2],u=t[3],s=o+o,l=a+a,c=i+i,d=o*s,f=o*l,g=o*c,m=a*l,p=a*c,v=i*c,h=u*s,T=u*l,x=u*c,C=n[0],M=n[1],b=n[2];return e[0]=(1-(m+v))*C,e[1]=(f+x)*C,e[2]=(g-T)*C,e[3]=0,e[4]=(f-x)*M,e[5]=(1-(d+v))*M,e[6]=(p+h)*M,e[7]=0,e[8]=(g+T)*b,e[9]=(p-h)*b,e[10]=(1-(d+m))*b,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},o.fromRotationTranslationScaleOrigin=function(e,t,r,n,o){var a=t[0],i=t[1],u=t[2],s=t[3],l=a+a,c=i+i,d=u+u,f=a*l,g=a*c,m=a*d,p=i*c,v=i*d,h=u*d,T=s*l,x=s*c,C=s*d,M=n[0],b=n[1],y=n[2],A=o[0],O=o[1],P=o[2];return e[0]=(1-(p+h))*M,e[1]=(g+C)*M,e[2]=(m-x)*M,e[3]=0,e[4]=(g-C)*b,e[5]=(1-(f+h))*b,e[6]=(v+T)*b,e[7]=0,e[8]=(m+x)*y,e[9]=(v-T)*y,e[10]=(1-(f+p))*y,e[11]=0,e[12]=r[0]+A-(e[0]*A+e[4]*O+e[8]*P),e[13]=r[1]+O-(e[1]*A+e[5]*O+e[9]*P),e[14]=r[2]+P-(e[2]*A+e[6]*O+e[10]*P),e[15]=1,e},o.fromQuat=function(e,t){
var r=t[0],n=t[1],o=t[2],a=t[3],i=r+r,u=n+n,s=o+o,l=r*i,c=n*i,d=n*u,f=o*i,g=o*u,m=o*s,p=a*i,v=a*u,h=a*s;return e[0]=1-d-m,e[1]=c+h,e[2]=f-v,e[3]=0,e[4]=c-h,e[5]=1-l-m,e[6]=g+p,e[7]=0,e[8]=f+v,e[9]=g-p,e[10]=1-l-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.frustum=function(e,t,r,n,o,a,i){var u=1/(r-t),s=1/(o-n),l=1/(a-i);return e[0]=2*a*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*s,e[6]=0,e[7]=0,e[8]=(r+t)*u,e[9]=(o+n)*s,e[10]=(i+a)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=i*a*2*l,e[15]=0,e},o.perspective=function(e,t,r,n,o){var a=1/Math.tan(t/2),i=1/(n-o);return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(o+n)*i,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*o*n*i,e[15]=0,e},o.perspectiveFromFieldOfView=function(e,t,r,n){var o=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),i=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),s=2/(i+u),l=2/(o+a);return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-((i-u)*s*.5),e[9]=(o-a)*l*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e},o.ortho=function(e,t,r,n,o,a,i){var u=1/(t-r),s=1/(n-o),l=1/(a-i);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+r)*u,e[13]=(o+n)*s,e[14]=(i+a)*l,e[15]=1,e},o.lookAt=function(e,t,r,a){var i,u,s,l,c,d,f,g,m,p,v=t[0],h=t[1],T=t[2],x=a[0],C=a[1],M=a[2],b=r[0],y=r[1],A=r[2];return Math.abs(v-b)<n.EPSILON&&Math.abs(h-y)<n.EPSILON&&Math.abs(T-A)<n.EPSILON?o.identity(e):(f=v-b,g=h-y,m=T-A,p=1/Math.sqrt(f*f+g*g+m*m),f*=p,g*=p,m*=p,i=C*m-M*g,u=M*f-x*m,s=x*g-C*f,p=Math.sqrt(i*i+u*u+s*s),p?(p=1/p,i*=p,u*=p,s*=p):(i=0,u=0,s=0),l=g*s-m*u,c=m*i-f*s,d=f*u-g*i,p=Math.sqrt(l*l+c*c+d*d),p?(p=1/p,l*=p,c*=p,d*=p):(l=0,c=0,d=0),e[0]=i,e[1]=l,e[2]=f,e[3]=0,e[4]=u,e[5]=c,e[6]=g,e[7]=0,e[8]=s,e[9]=d,e[10]=m,e[11]=0,e[12]=-(i*v+u*h+s*T),e[13]=-(l*v+c*h+d*T),e[14]=-(f*v+g*h+m*T),e[15]=1,e)},o.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},e.exports=o},function(e,t,r){var n=r(9),o=r(12),a=r(15),i=r(16),u={};u.create=function(){var e=new n.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},u.rotationTo=function(){var e=a.create(),t=a.fromValues(1,0,0),r=a.fromValues(0,1,0);return function(n,o,i){var s=a.dot(o,i);return s<-.999999?(a.cross(e,t,o),a.length(e)<1e-6&&a.cross(e,r,o),a.normalize(e,e),u.setAxisAngle(n,e,Math.PI),n):s>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(a.cross(e,o,i),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=1+s,u.normalize(n,n))}}(),u.setAxes=function(){var e=o.create();return function(t,r,n,o){return e[0]=n[0],e[3]=n[1],e[6]=n[2],e[1]=o[0],e[4]=o[1],e[7]=o[2],e[2]=-r[0],e[5]=-r[1],e[8]=-r[2],u.normalize(t,u.fromMat3(t,e))}}(),u.clone=i.clone,u.fromValues=i.fromValues,u.copy=i.copy,u.set=i.set,u.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},u.setAxisAngle=function(e,t,r){r=.5*r;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e},u.add=i.add,u.multiply=function(e,t,r){var n=t[0],o=t[1],a=t[2],i=t[3],u=r[0],s=r[1],l=r[2],c=r[3];return e[0]=n*c+i*u+o*l-a*s,e[1]=o*c+i*s+a*u-n*l,e[2]=a*c+i*l+n*s-o*u,e[3]=i*c-n*u-o*s-a*l,e},u.mul=u.multiply,u.scale=i.scale,u.rotateX=function(e,t,r){r*=.5;var n=t[0],o=t[1],a=t[2],i=t[3],u=Math.sin(r),s=Math.cos(r);return e[0]=n*s+i*u,e[1]=o*s+a*u,e[2]=a*s-o*u,e[3]=i*s-n*u,e},u.rotateY=function(e,t,r){r*=.5;var n=t[0],o=t[1],a=t[2],i=t[3],u=Math.sin(r),s=Math.cos(r);return e[0]=n*s-a*u,e[1]=o*s+i*u,e[2]=a*s+n*u,e[3]=i*s-o*u,e},u.rotateZ=function(e,t,r){r*=.5;var n=t[0],o=t[1],a=t[2],i=t[3],u=Math.sin(r),s=Math.cos(r);return e[0]=n*s+o*u,e[1]=o*s-n*u,e[2]=a*s+i*u,e[3]=i*s-a*u,e},u.calculateW=function(e,t){var r=t[0],n=t[1],o=t[2];return e[0]=r,e[1]=n,e[2]=o,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-o*o)),e},u.dot=i.dot,u.lerp=i.lerp,u.slerp=function(e,t,r,n){var o,a,i,u,s,l=t[0],c=t[1],d=t[2],f=t[3],g=r[0],m=r[1],p=r[2],v=r[3];return a=l*g+c*m+d*p+f*v,a<0&&(a=-a,g=-g,m=-m,p=-p,v=-v),1-a>1e-6?(o=Math.acos(a),i=Math.sin(o),u=Math.sin((1-n)*o)/i,s=Math.sin(n*o)/i):(u=1-n,s=n),e[0]=u*l+s*g,e[1]=u*c+s*m,e[2]=u*d+s*p,e[3]=u*f+s*v,e},u.sqlerp=function(){var e=u.create(),t=u.create();return function(r,n,o,a,i,s){return u.slerp(e,n,i,s),u.slerp(t,o,a,s),u.slerp(r,e,t,2*s*(1-s)),r}}(),u.invert=function(e,t){var r=t[0],n=t[1],o=t[2],a=t[3],i=r*r+n*n+o*o+a*a,u=i?1/i:0;return e[0]=-r*u,e[1]=-n*u,e[2]=-o*u,e[3]=a*u,e},u.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},u.length=i.length,u.len=u.length,u.squaredLength=i.squaredLength,u.sqrLen=u.squaredLength,u.normalize=i.normalize,u.fromMat3=function(e,t){var r,n=t[0]+t[4]+t[8];if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var o=0;t[4]>t[0]&&(o=1),t[8]>t[3*o+o]&&(o=2);var a=(o+1)%3,i=(o+2)%3;r=Math.sqrt(t[3*o+o]-t[3*a+a]-t[3*i+i]+1),e[o]=.5*r,r=.5/r,e[3]=(t[3*a+i]-t[3*i+a])*r,e[a]=(t[3*a+o]+t[3*o+a])*r,e[i]=(t[3*i+o]+t[3*o+i])*r}return e},u.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},e.exports=u},function(e,t,r){var n=r(9),o={};o.create=function(){var e=new n.ARRAY_TYPE(3);return e[0]=0,e[1]=0,e[2]=0,e},o.clone=function(e){var t=new n.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},o.fromValues=function(e,t,r){var o=new n.ARRAY_TYPE(3);return o[0]=e,o[1]=t,o[2]=r,o},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},o.set=function(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e},o.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e},o.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e},o.sub=o.subtract,o.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e},o.mul=o.multiply,o.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e},o.div=o.divide,o.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e},o.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e},o.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e},o.scaleAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e},o.distance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(r*r+n*n+o*o)},o.dist=o.distance,o.squaredDistance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2];return r*r+n*n+o*o},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)},o.len=o.length,o.squaredLength=function(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},o.normalize=function(e,t){var r=t[0],n=t[1],o=t[2],a=r*r+n*n+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},o.cross=function(e,t,r){var n=t[0],o=t[1],a=t[2],i=r[0],u=r[1],s=r[2];return e[0]=o*s-a*u,e[1]=a*i-n*s,e[2]=n*u-o*i,e},o.lerp=function(e,t,r,n){var o=t[0],a=t[1],i=t[2];return e[0]=o+n*(r[0]-o),e[1]=a+n*(r[1]-a),e[2]=i+n*(r[2]-i),e},o.hermite=function(e,t,r,n,o,a){var i=a*a,u=i*(2*a-3)+1,s=i*(a-2)+a,l=i*(a-1),c=i*(3-2*a);return e[0]=t[0]*u+r[0]*s+n[0]*l+o[0]*c,e[1]=t[1]*u+r[1]*s+n[1]*l+o[1]*c,e[2]=t[2]*u+r[2]*s+n[2]*l+o[2]*c,e},o.bezier=function(e,t,r,n,o,a){var i=1-a,u=i*i,s=a*a,l=u*i,c=3*a*u,d=3*s*i,f=s*a;return e[0]=t[0]*l+r[0]*c+n[0]*d+o[0]*f,e[1]=t[1]*l+r[1]*c+n[1]*d+o[1]*f,e[2]=t[2]*l+r[2]*c+n[2]*d+o[2]*f,e},o.random=function(e,t){t=t||1;var r=2*n.RANDOM()*Math.PI,o=2*n.RANDOM()-1,a=Math.sqrt(1-o*o)*t;return e[0]=Math.cos(r)*a,e[1]=Math.sin(r)*a,e[2]=o*t,e},o.transformMat4=function(e,t,r){var n=t[0],o=t[1],a=t[2],i=r[3]*n+r[7]*o+r[11]*a+r[15];return i=i||1,e[0]=(r[0]*n+r[4]*o+r[8]*a+r[12])/i,e[1]=(r[1]*n+r[5]*o+r[9]*a+r[13])/i,e[2]=(r[2]*n+r[6]*o+r[10]*a+r[14])/i,e},o.transformMat3=function(e,t,r){var n=t[0],o=t[1],a=t[2];return e[0]=n*r[0]+o*r[3]+a*r[6],e[1]=n*r[1]+o*r[4]+a*r[7],e[2]=n*r[2]+o*r[5]+a*r[8],e},o.transformQuat=function(e,t,r){var n=t[0],o=t[1],a=t[2],i=r[0],u=r[1],s=r[2],l=r[3],c=l*n+u*a-s*o,d=l*o+s*n-i*a,f=l*a+i*o-u*n,g=-i*n-u*o-s*a;return e[0]=c*l+g*-i+d*-s-f*-u,e[1]=d*l+g*-u+f*-i-c*-s,e[2]=f*l+g*-s+c*-u-d*-i,e},o.rotateX=function(e,t,r,n){var o=[],a=[];return o[0]=t[0]-r[0],o[1]=t[1]-r[1],o[2]=t[2]-r[2],a[0]=o[0],a[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),a[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e},o.rotateY=function(e,t,r,n){var o=[],a=[];return o[0]=t[0]-r[0],o[1]=t[1]-r[1],o[2]=t[2]-r[2],a[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),a[1]=o[1],a[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e},o.rotateZ=function(e,t,r,n){var o=[],a=[];return o[0]=t[0]-r[0],o[1]=t[1]-r[1],o[2]=t[2]-r[2],a[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),a[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),a[2]=o[2],e[0]=a[0]+r[0],e[1]=a[1]+r[1],e[2]=a[2]+r[2],e},o.forEach=function(){var e=o.create();return function(t,r,n,o,a,i){var u,s;for(r||(r=3),n||(n=0),s=o?Math.min(o*r+n,t.length):t.length,u=n;u<s;u+=r)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],a(e,e,i),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2];return t}}(),o.angle=function(e,t){var r=o.fromValues(e[0],e[1],e[2]),n=o.fromValues(t[0],t[1],t[2]);o.normalize(r,r),o.normalize(n,n);var a=o.dot(r,n);return a>1?0:Math.acos(a)},o.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},e.exports=o},function(e,t,r){var n=r(9),o={};o.create=function(){var e=new n.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},o.clone=function(e){var t=new n.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.fromValues=function(e,t,r,o){var a=new n.ARRAY_TYPE(4);return a[0]=e,a[1]=t,a[2]=r,a[3]=o,a},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.set=function(e,t,r,n,o){return e[0]=t,e[1]=r,e[2]=n,e[3]=o,e},o.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e},o.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e},o.sub=o.subtract,o.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e},o.mul=o.multiply,o.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e},o.div=o.divide,o.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e},o.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e},o.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e},o.scaleAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e},o.distance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(r*r+n*n+o*o+a*a)},o.dist=o.distance,o.squaredDistance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2],a=t[3]-e[3];return r*r+n*n+o*o+a*a},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],r=e[1],n=e[2],o=e[3];return Math.sqrt(t*t+r*r+n*n+o*o)},o.len=o.length,o.squaredLength=function(e){var t=e[0],r=e[1],n=e[2],o=e[3];return t*t+r*r+n*n+o*o},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},o.normalize=function(e,t){var r=t[0],n=t[1],o=t[2],a=t[3],i=r*r+n*n+o*o+a*a;return i>0&&(i=1/Math.sqrt(i),e[0]=r*i,e[1]=n*i,e[2]=o*i,e[3]=a*i),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},o.lerp=function(e,t,r,n){var o=t[0],a=t[1],i=t[2],u=t[3];return e[0]=o+n*(r[0]-o),e[1]=a+n*(r[1]-a),e[2]=i+n*(r[2]-i),e[3]=u+n*(r[3]-u),e},o.random=function(e,t){return t=t||1,e[0]=n.RANDOM(),e[1]=n.RANDOM(),e[2]=n.RANDOM(),e[3]=n.RANDOM(),o.normalize(e,e),o.scale(e,e,t),e},o.transformMat4=function(e,t,r){var n=t[0],o=t[1],a=t[2],i=t[3];return e[0]=r[0]*n+r[4]*o+r[8]*a+r[12]*i,e[1]=r[1]*n+r[5]*o+r[9]*a+r[13]*i,e[2]=r[2]*n+r[6]*o+r[10]*a+r[14]*i,e[3]=r[3]*n+r[7]*o+r[11]*a+r[15]*i,e},o.transformQuat=function(e,t,r){var n=t[0],o=t[1],a=t[2],i=r[0],u=r[1],s=r[2],l=r[3],c=l*n+u*a-s*o,d=l*o+s*n-i*a,f=l*a+i*o-u*n,g=-i*n-u*o-s*a;return e[0]=c*l+g*-i+d*-s-f*-u,e[1]=d*l+g*-u+f*-i-c*-s,e[2]=f*l+g*-s+c*-u-d*-i,e[3]=t[3],e},o.forEach=function(){var e=o.create();return function(t,r,n,o,a,i){var u,s;for(r||(r=4),n||(n=0),s=o?Math.min(o*r+n,t.length):t.length,u=n;u<s;u+=r)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],e[3]=t[u+3],a(e,e,i),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2],t[u+3]=e[3];return t}}(),o.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},e.exports=o},function(e,t,r){var n=r(9),o={};o.create=function(){var e=new n.ARRAY_TYPE(2);return e[0]=0,e[1]=0,e},o.clone=function(e){var t=new n.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},o.fromValues=function(e,t){var r=new n.ARRAY_TYPE(2);return r[0]=e,r[1]=t,r},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},o.set=function(e,t,r){return e[0]=t,e[1]=r,e},o.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e},o.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e},o.sub=o.subtract,o.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e},o.mul=o.multiply,o.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e},o.div=o.divide,o.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e},o.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e},o.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e},o.scaleAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e},o.distance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)},o.dist=o.distance,o.squaredDistance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],r=e[1];return Math.sqrt(t*t+r*r)},o.len=o.length,o.squaredLength=function(e){var t=e[0],r=e[1];return t*t+r*r},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},o.normalize=function(e,t){var r=t[0],n=t[1],o=r*r+n*n;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},o.cross=function(e,t,r){var n=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=n,e},o.lerp=function(e,t,r,n){var o=t[0],a=t[1];return e[0]=o+n*(r[0]-o),e[1]=a+n*(r[1]-a),e},o.random=function(e,t){t=t||1;var r=2*n.RANDOM()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e},o.transformMat2=function(e,t,r){var n=t[0],o=t[1];return e[0]=r[0]*n+r[2]*o,e[1]=r[1]*n+r[3]*o,e},o.transformMat2d=function(e,t,r){var n=t[0],o=t[1];return e[0]=r[0]*n+r[2]*o+r[4],e[1]=r[1]*n+r[3]*o+r[5],e},o.transformMat3=function(e,t,r){var n=t[0],o=t[1];return e[0]=r[0]*n+r[3]*o+r[6],e[1]=r[1]*n+r[4]*o+r[7],e},o.transformMat4=function(e,t,r){var n=t[0],o=t[1];return e[0]=r[0]*n+r[4]*o+r[12],e[1]=r[1]*n+r[5]*o+r[13],e},o.forEach=function(){var e=o.create();return function(t,r,n,o,a,i){var u,s;for(r||(r=2),n||(n=0),s=o?Math.min(o*r+n,t.length):t.length,u=n;u<s;u+=r)e[0]=t[u],e[1]=t[u+1],a(e,e,i),t[u]=e[0],t[u+1]=e[1];return t}}(),o.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},e.exports=o},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkViewNode"),e.build=function(e){},e.render=function(e){},e.getViewNodeFor=function(r){return t.renderable===r?e:t.children.find(function(e){var t=e.getViewNodeFor(r);return!!t})},e.getFirstAncestorOfType=function(e){return t.parent?t.parent.isA(e)?t.parent:t.parent.getFirstAncestorOfType(e):null},e.traverse=function(r){e.apply(r,!0),t.children.forEach(function(e){e.traverse(r)}),e.apply(r,!1)},e.traverseAllPasses=function(){e.traverse("Build"),e.traverse("Render")},e.apply=function(t,r){switch(t){case"Build":e.build(r);break;case"Render":e.render(r);break;default:console.log("UNKNOWN OPERATION  "+t)}},e.addMissingNode=function(t){t&&e.addMissingNodes([t])},e.addMissingNodes=function(r){if(r&&r.length){t.preparedNodes=t.preparedNodes.concat(r);var n=t.children.map(function(e){return e.getRenderable()}),o=r.filter(function(e){return e&&n.indexOf(e)===-1}).map(function(t){var r=e.createViewNode(t);return r&&(r.setParent(e),r.setRenderable(t)),r});t.children=t.children.concat(o)}},e.prepareNodes=function(){t.preparedNodes=[]},e.removeUnusedNodes=function(){t.children=t.children.filter(function(e){return t.preparedNodes.indexOf(e.getRenderable())!==-1}),e.prepareNodes()},e.createViewNode=function(e){if(!t.myFactory)return console.log("Can not create view nodes without my own factory"),null;var r=t.myFactory.createNode(e);return r&&r.setRenderable(e),r}}function a(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,l,r),u.obj(e,t),u.event(e,t,"event"),u.setGet(e,t,["parent","renderable","myFactory"]),u.getArray(e,t,["children"]),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=t.PASS_TYPES=void 0,t.extend=a;var i=r(3),u=n(i),s=t.PASS_TYPES=["Build","Render"],l={parent:null,renderable:null,myFactory:null,children:[],preparedNodes:[]},c=t.newInstance=u.newInstance(a);t["default"]={newInstance:c,extend:a,PASS_TYPES:s}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e,t){t.classHierarchy.push("vtkOpenGLActor2D"),e.build=function(r){if(r){if(!t.renderable)return;e.prepareNodes(),e.addMissingNodes(t.renderable.getTextures()),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes()}},e.traverse=function(r){t.renderable&&t.renderable.getVisibility()&&(e.apply(r,!0),t.activeTextures=[],t.children.forEach(function(e){e.apply(r,!0),e.isA("vtkOpenGLTexture")&&"Render"===r&&t.activeTextures.push(e)}),t.children.forEach(function(e){e.apply(r,!1)}),e.apply(r,!1))},e.render=function(r){if(r)t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),e.preRender();else{t.children.forEach(function(e){e.isA("vtkOpenGLTexture")&&e.deactivate()});var n=0!==t.renderable.getIsOpaque();n||t.context.depthMask(!0)}},e.preRender=function(){t.context.depthMask(!1)}}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,d,r),c["default"].extend(e,t),s.setGet(e,t,["context"]),s.get(e,t,["activeTextures"]),a(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=r(3),s=o(u),l=r(18),c=n(l),d={context:null,activeTextures:[]},f=t.newInstance=s.newInstance(i);t["default"]={newInstance:f,extend:i}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e,t){t.classHierarchy.push("vtkOpenGLCamera"),e.build=function(e){e&&!t.renderable},e.render=function(r){if(r){t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext();var n=e.getFirstAncestorOfType("vtkOpenGLRenderer");e.preRender(n)}},e.preRender=function(e){var r=e.getTiledSizeAndOrigin();t.context.viewport(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize)},e.getKeyMatrices=function(r){if(r!==t.lastRenderer||e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getMTime()>t.keyMatrixTime.getMTime()||e.getMTime()>t.keyMatrixTime.getMTime()||r.getMTime()>t.keyMatrixTime.getMTime()){t.WCVCMatrix=t.renderable.getViewTransformMatrix(),u.mat3.fromMat4(t.normalMatrix,t.WCVCMatrix),u.mat3.invert(t.normalMatrix,t.normalMatrix),u.mat4.transpose(t.WCVCMatrix,t.WCVCMatrix);var n=e.getFirstAncestorOfType("vtkOpenGLRenderer"),o=n.getAspectRatio();t.VCDCMatrix=t.renderable.getProjectionTransformMatrix(o,-1,1),u.mat4.transpose(t.VCDCMatrix,t.VCDCMatrix),t.WCDCMatrix=u.mat4.create(),u.mat4.multiply(t.WCDCMatrix,t.VCDCMatrix,t.WCVCMatrix),t.keyMatrixTime.modified(),t.lastRenderer=r}return{wcvc:t.WCVCMatrix,normalMatrix:t.normalMatrix,vcdc:t.VCDCMatrix,wcdc:t.WCDCMatrix}}}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,f,r),d["default"].extend(e,t),t.keyMatrixTime={},t.normalMatrix=u.mat3.create(),l.obj(t.keyMatrixTime),l.setGet(e,t,["context","keyMatrixTime"]),a(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=r(8),s=r(3),l=o(s),c=r(18),d=n(c),f={context:null,lastRenderer:null,keyMatrixTime:null,normalMatrix:null},g=t.newInstance=l.newInstance(i);t["default"]={newInstance:g,extend:i}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e,t){t.classHierarchy.push("vtkOpenGLImageMapper"),e.build=function(e){e&&!t.renderable},e.render=function(r){if(r){t.openGLRenderWindow=e.getFirstAncestorOfType("vtkOpenGLRenderWindow"),t.context=t.openGLRenderWindow.getContext(),t.tris.setContext(t.context),t.openGLImageSlice=e.getFirstAncestorOfType("vtkOpenGLImageSlice");var n=t.openGLImageSlice.getRenderable();t.openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer");var o=t.openGLRenderer.getRenderable();t.openGLCamera=t.openGLRenderer.getViewNodeFor(o.getActiveCamera()),e.renderPiece(o,n)}},e.buildShaders=function(t,r,n){e.getShaderTemplate(t,r,n),e.replaceShaderValues(t,r,n)},e.getShaderTemplate=function(e,t,r){e.Vertex=O["default"],e.Fragment=V["default"],e.Geometry=""},e.replaceShaderValues=function(e,r,n){var o=e.Vertex,a=e.Fragment;o=T["default"].substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCDCMatrix;"]).result,o=T["default"].substitute(o,"//VTK::PositionVC::Impl",["  gl_Position = MCDCMatrix * vertexMC;"]).result,o=T["default"].substitute(o,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result;var i=t.openGLTexture.getComponents();switch(o=T["default"].substitute(o,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result,a=T["default"].substitute(a,"//VTK::TCoord::Dec",["varying vec2 tcoordVCVSOutput;","uniform float shift;","uniform float scale;","uniform sampler2D texture1;"]).result,i){case 1:a=T["default"].substitute(a,"//VTK::TCoord::Impl",["float intensity = texture2D(texture1, tcoordVCVSOutput).r*scale + shift;","gl_FragData[0] = vec4(intensity,intensity,intensity,1.0);"]).result;break;case 2:a=T["default"].substitute(a,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","float intensity = tcolor.r*scale + shift;","gl_FragData[0] = vec4(intensity, intensity, intensity, scale*tcolor.g + shift);"]).result;break;default:a=T["default"].substitute(a,"//VTK::TCoord::Impl","gl_FragData[0] = scale*texture2D(texture1, tcoordVCVSOutput.st) + shift;").result}e.Vertex=o,e.Fragment=a},e.getNeedToRebuildShaders=function(r,n,o){return 0===r.getProgram()||r.getShaderSourceTime().getMTime()<e.getMTime()||r.getShaderSourceTime().getMTime()<o.getMTime()||r.getShaderSourceTime().getMTime()<t.currentInput.getMTime()},e.updateShaders=function(r,n,o){if(r.getVAO().bind(),t.lastBoundBO=r,e.getNeedToRebuildShaders(r,n,o)){var a={Vertex:null,Fragment:null,Geometry:null};e.buildShaders(a,n,o);var i=t.openGLRenderWindow.getShaderCache().readyShaderProgramArray(a.Vertex,a.Fragment,a.Geometry);i!==r.getProgram()&&(r.setProgram(i),r.getVAO().releaseGraphicsResources()),r.getShaderSourceTime().modified()}else t.openGLRenderWindow.getShaderCache().readyShaderProgram(r.getProgram());e.setMapperShaderParameters(r,n,o),e.setCameraShaderParameters(r,n,o),e.setPropertyShaderParameters(r,n,o)},e.setMapperShaderParameters=function(e,r,n){e.getCABO().getElementCount()&&(t.VBOBuildTime>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())&&(e.getCABO().bind(),e.getProgram().isAttributeUsed("vertexMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"vertexMC",e.getCABO().getVertexOffset(),e.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||console.error("Error setting vertexMC in shader VAO.")),e.getProgram().isAttributeUsed("tcoordMC")&&e.getCABO().getTCoordOffset()&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"tcoordMC",e.getCABO().getTCoordOffset(),e.getCABO().getStride(),t.context.FLOAT,e.getCABO().getTCoordComponents(),t.context.FALSE)||console.error("Error setting tcoordMC in shader VAO.")));var o=t.openGLTexture.getTextureUnit();e.getProgram().setUniformi("texture1",o);var a=n.getProperty().getColorWindow(),i=n.getProperty().getColorLevel(),u=t.openGLTexture.getShiftAndScale(),s=u.scale/a,l=(u.shift-i)/a+.5;e.getProgram().setUniformf("shift",l),e.getProgram().setUniformf("scale",s)},e.setCameraShaderParameters=function(e,r,n){var o=e.getProgram(),a=t.openGLCamera.getKeyMatrices(r);o.setUniformMatrix("MCDCMatrix",a.wcdc)},e.setPropertyShaderParameters=function(e,t,r){var n=e.getProgram(),o=r.getProperty(),a=o.getOpacity();n.setUniformf("opacityUniform",a)},e.renderPieceStart=function(r,n){e.updateBufferObjects(r,n),t.lastBoundBO=null},e.renderPieceDraw=function(r,n){var o=t.context;t.openGLTexture.preRender(t.openGLRenderer),t.tris.getCABO().getElementCount()&&(e.updateShaders(t.tris,r,n),o.drawArrays(o.TRIANGLES,0,t.tris.getCABO().getElementCount())),t.openGLTexture.deactivate()},e.renderPieceFinish=function(e,r){t.LastBoundBO&&t.LastBoundBO.getVAO().release()},e.renderPiece=function(r,n){return e.invokeEvent({type:"StartEvent"}),t.renderable.update(),t.currentInput=t.renderable.getInputData(),e.invokeEvent({type:"EndEvent"}),null===t.currentInput?void console.error("No input!"):(e.renderPieceStart(r,n),e.renderPieceDraw(r,n),void e.renderPieceFinish(r,n))},e.computeBounds=function(r,n){return e.getInput()?void(t.bounnds=e.getInput().getBounds()):void f["default"].uninitializeBounds(t.Bounds)},e.updateBufferObjects=function(t,r){e.getNeedToRebuildBufferObjects(t,r)&&e.buildBufferObjects(t,r)},e.getNeedToRebuildBufferObjects=function(r,n){return t.VBOBuildTime.getMTime()<e.getMTime()||t.VBOBuildTime.getMTime()<n.getMTime()||t.VBOBuildTime.getMTime()<n.getProperty().getMTime()||t.VBOBuildTime.getMTime()<t.currentInput.getMTime()},e.buildBufferObjects=function(r,n){var o=t.currentInput;if(null!==o){var a=o.getMTime()+"A"+o.getPointData().getScalars().getMTime()+"B"+e.getMTime();if(t.VBOBuildString!==a){t.texture.setInputData(o);for(var i=t.renderable.getBounds(),u=new Float32Array(12),s=new Float32Array(8),l=0;l<4;l++)u[3*l]=i[l%2],u[3*l+1]=i[(l>1?1:0)+2],u[3*l+2]=i[4],s[2*l]=l%2?1:0,s[2*l+1]=l>1?1:0;var c=m["default"].newInstance({tuple:3,values:u});c.setName("points");var d=m["default"].newInstance({tuple:2,values:s});d.setName("tcoords");var f=new Uint16Array(8);f[0]=3,f[1]=0,f[2]=1,f[3]=3,f[4]=3,f[5]=0,f[6]=3,f[7]=2;var g=m["default"].newInstance({tuple:1,values:f}),p=0;p+=t.tris.getCABO().createVBO(g,"polys",y.VTK_REPRESENTATION.SURFACE,{points:c,tcoords:d,cellOffset:p}),console.log("FIXME(Ken) - unused",p),t.VBOBuildTime.modified(),t.VBOBuildString=a}}}}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,w,r),b["default"].extend(e,t),t.tris=c["default"].newInstance(),t.texture=C["default"].newInstance(),t.openGLTexture=v["default"].newInstance(),t.openGLTexture.setRenderable(t.texture),s.setGet(e,t,["context"]),t.VBOBuildTime={},s.obj(t.VBOBuildTime),a(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.vtkOpenGLImageMapper=a,t.extend=i;var u=r(3),s=o(u),l=r(22),c=n(l),d=r(31),f=n(d),g=r(32),m=n(g),p=r(34),v=n(p),h=r(28),T=n(h),x=r(36),C=n(x),M=r(18),b=n(M),y=r(27),A=r(37),O=n(A),P=r(38),V=n(P),w={context:null,VBOBuildTime:0,VBOBuildString:null,texture:null,openGLTexture:null,tris:null},S=t.newInstance=s.newInstance(i);t["default"]={newInstance:S,extend:i}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e,t){t.classHierarchy.push("vtkOpenGLHelper"),e.setContext=function(e){t.program.setContext(e),t.VAO.setContext(e),t.CABO.setContext(e)},e.releaseGraphicsResources=function(e){t.VAO.releaseGraphicsResources(),t.CABO.releaseGraphicsResources(),t.CABO.setElementCount(0)}}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,p,r),s.obj(e,t),t.shaderSourceTime={},s.obj(t.shaderSourceTime),t.attributeUpdateTime={},s.obj(t.attributeUpdateTime),s.setGet(e,t,["program","shaderSourceTime","VAO","attributeUpdateTime","CABO","primitiveType"]),t.program=f["default"].newInstance(),t.VAO=m["default"].newInstance(),t.CABO=c["default"].newInstance(),a(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.vtkOpenGLHelper=a,t.extend=i;var u=r(3),s=o(u),l=r(23),c=n(l),d=r(28),f=n(d),g=r(30),m=n(g),p={program:null,shaderSourceTime:null,VAO:null,attributeUpdateTime:null,CABO:null,primitiveType:0},v=t.newInstance=s.newInstance(i);t["default"]={newInstance:v,extend:i}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e,t){t.classHierarchy.push("vtkOpenGLCellArrayBufferObject");var r=new f["default"]({chunkSize:65500,arrayType:"Float32Array"});e.setType(g.OBJECT_TYPE.ARRAY_BUFFER),e.createVBO=function(n,o,a,i){if(!n.getData()||!n.getData().length)return t.elementCount=0,0;t.blockSize=3,t.vertexOffset=0,t.normalOffset=0,t.tCoordOffset=0,t.tCoordComponents=0,t.colorComponents=0,t.colorOffset=0;var u=i.points.getData(),s=null,l=null,c=null,d=i.colors?i.colors.getNumberOfComponents():0,f=i.tcoords?i.tcoords.getNumberOfComponents():0;i.normals&&(t.normalOffset=4*t.blockSize,t.blockSize+=3,s=i.normals.getData()),i.tcoords&&(t.tCoordOffset=4*t.blockSize,t.tCoordComponents=f,t.blockSize+=f,l=i.tcoords.getData()),i.colors&&(t.colorComponents=i.colors.getNumberOfComponents(),t.colorOffset=4*t.blockSize,t.blockSize+=t.colorComponents,c=i.colors.getData()),t.stride=4*t.blockSize;var p=0,v=0,h=0,T=0,x=0,C=function(e){if(p=3*e,h=e*f,r.push(u[p++]),r.push(u[p++]),r.push(u[p++]),null!==s&&(v=i.haveCellNormals?3*(x+i.cellOffset):3*e,r.push(s[v++]),r.push(s[v++]),r.push(s[v++])),null!==l)for(var t=0;t<f;++t)r.push(l[h++]);if(null!==c){T=i.haveCellScalars?(x+i.cellOffset)*d:e*d;for(var n=0;n<d;++n)r.push(c[T++]/255.5)}},M={anythingToPoints:function(e,t,r){for(var n=0;n<e;++n)C(t[r+n])},linesToWireframe:function(e,t,r){for(var n=0;n<e-1;++n)C(t[r+n]),C(t[r+n+1])},polysToWireframe:function(e,t,r){for(var n=0;n<e;++n)C(t[r+n]),C(t[r+(n+1)%e])},stripsToWireframe:function(e,t,r){for(var n=0;n<e-1;++n)C(t[r+n]),C(t[r+n+1]);for(var o=0;o<e-2;o++)C(t[r+o]),C(t[r+o+2])},polysToSurface:function(e,t,r){if(e<3)console.log("skipping degenerate triangle");else for(var n=0;n<e-2;n++)C(t[r+0]),C(t[r+n+1]),C(t[r+n+2])},stripsToSurface:function(e,t,r){for(var n=0;n<e-2;n++)C(t[r+n]),C(t[r+n+1+n%2]),C(t[r+n+1+(n+1)%2])}},b=null;b=a===m.VTK_REPRESENTATION.POINTS||"verts"===o?M.anythingToPoints:a===m.VTK_REPRESENTATION.WIREFRAME||"lines"===o?M[o+"ToWireframe"]:M[o+"ToSurface"];
for(var y=0,A=n.getData(),O=A.length,P=0;P<O;P++)P===y&&(b(A[P],A,y+1),y+=A[P]+1,x++);t.elementCount=r.getNumberOfElements()/t.blockSize;var V=r.getFrozenArray();return e.upload(V,g.OBJECT_TYPE.ARRAY_BUFFER),r.reset(),x},e.setCoordShiftAndScaleMethod=function(e){console.log("coordinate shift and scale not yet implemented")},e.setCoordShift=function(e){console.log("coordinate shift and scale not yet implemented")},e.setCoordScale=function(e){console.log("coordinate shift and scale not yet implemented")}}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,p,r),c["default"].extend(e,t),s.setGet(e,t,["elementCount"]),s.get(e,t,["stride","vertexOffset","normalOffset","tCoordOffset","tCoordComponents","colorOffset","colorComponents"]),a(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=r(3),s=o(u),l=r(24),c=n(l),d=r(26),f=n(d),g=r(25),m=r(27),p={elementCount:0,stride:0,vertexOffset:0,normalOffset:0,tCoordOffset:0,tCoordComponents:0,colorOffset:0,colorComponents:0},v=t.newInstance=s.newInstance(i);t["default"]={newInstance:v,extend:i}},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e,t){function r(e){switch(e){case s.OBJECT_TYPE.ELEMENT_ARRAY_BUFFER:return t.context.ELEMENT_ARRAY_BUFFER;case s.OBJECT_TYPE.TEXTURE_BUFFER:if("TEXTURE_BUFFER"in t.context)return t.context.TEXTURE_BUFFER;default:case s.OBJECT_TYPE.ARRAY_BUFFER:return t.context.ARRAY_BUFFER}}t.classHierarchy.push("vtkOpenGLBufferObject");var n=null,o=null,a=!0,i="";e.getType=function(){return n},e.setType=function(e){n=e},e.getHandle=function(){return o},e.isReady=function(){return a===!1},e.generateBuffer=function(e){var a=r(e);return null===o&&(o=t.context.createBuffer(),n=e),r(n)===a},e.upload=function(u,s){var l=e.generateBuffer(s);return l?(t.context.bindBuffer(r(n),o),t.context.bufferData(r(n),u,t.context.STATIC_DRAW),a=!1,!0):(i="Trying to upload array buffer to incompatible buffer.",!1)},e.bind=function(){return!!o&&(t.context.bindBuffer(r(n),o),!0)},e.release=function(){return!!o&&(t.context.bindBuffer(r(n),null),!0)},e.releaseGraphicsResources=function(){null!==o&&(t.context.bindBuffer(r(n),null),t.context.deleteBuffer(o),o=null)},e.getError=function(){return i}}function a(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,c,r),u.obj(e,t),u.setGet(e,t,["context"]),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=t.STATIC=void 0,t.extend=a;var i=r(3),u=n(i),s=r(25),l=t.STATIC={},c={objectType:s.OBJECT_TYPE.ARRAY_BUFFER,context:null},d=t.newInstance=u.newInstance(a);t["default"]=Object.assign({newInstance:d,extend:a},l)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.OBJECT_TYPE={ARRAY_BUFFER:0,ELEMENT_ARRAY_BUFFER:1,TEXTURE_BUFFER:2};t["default"]={OBJECT_TYPE:r}},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.chunkSize,o=void 0===n?65536:n,a=t.arrayType,i=void 0===a?"Int32Array":a;r(this,e),this.ArrayConstructor=window[i],this.chunkSize=o,this.reset()}return n(e,[{key:"reset",value:function(){this.chunkContainer=[],this.chunkContainer.push(new this.ArrayConstructor(this.chunkSize)),this.lastChunkItemCount=0}},{key:"push",value:function(e){this.lastChunkItemCount===this.chunkSize&&(this.chunkContainer.push(new this.ArrayConstructor(this.chunkSize)),this.lastChunkItemCount=0),this.chunkContainer[this.chunkContainer.length-1][this.lastChunkItemCount]=e,this.lastChunkItemCount+=1}},{key:"getNumberOfElements",value:function(){return(this.chunkContainer.length-1)*this.chunkSize+this.lastChunkItemCount}},{key:"getFrozenArray",value:function(){for(var e=new this.ArrayConstructor(this.getNumberOfElements()),t=0;t<this.chunkContainer.length-1;++t)e.set(this.chunkContainer[t],t*this.chunkSize);var r=this.chunkContainer.length-1;if(this.lastChunkItemCount<this.chunkSize){var n=this.chunkContainer[r].buffer,o=this.lastChunkItemCount,a=new this.ArrayConstructor(n,0,o);e.set(a,r*this.chunkSize)}else e.set(this.chunkContainer[r],r*this.chunkSize);return e}}]),e}();t["default"]=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.VTK_SHADING={FLAT:0,GOURAUD:1,PHONG:2},n=t.VTK_REPRESENTATION={POINTS:0,WIREFRAME:1,SURFACE:2},o=t.VTK_INTERPOLATION={FLAT:0,GOURAUD:1,PHONG:2};t["default"]={VTK_SHADING:r,VTK_REPRESENTATION:n,VTK_INTERPOLATION:o}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=Array.isArray(r)?r.join("\n"):r,a=!1;e.search(t)!==-1&&(a=!0);var i="";n&&(i="g");var u=new RegExp(t,i),s=e.replace(u,o);return{replace:a,result:s}}function i(e,t){t.classHierarchy.push("vtkShaderProgram"),e.compileShader=function(){return t.vertexShader.compile()?t.fragmentShader.compile()?e.attachShader(t.vertexShader)&&e.attachShader(t.fragmentShader)?e.link()?(e.setCompiled(!0),1):(console.log("Links failed: "+t.error),0):(console.log(t.error),0):(console.log(t.fragmentShader.getSource().split("\n").map(function(e,t){return t+": "+e}).join("\n")),console.log(t.fragmentShader.getError()),0):(console.log(t.vertexShader.getSource().split("\n").map(function(e,t){return t+": "+e}).join("\n")),console.log(t.vertexShader.getError()),0)},e.cleanup=function(){"Unknown"!==t.shaderType&&0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0)},e.bind=function(){return!(!t.linked&&!t.link())&&(t.context.useProgram(t.handle),e.setBound(!0),!0)},e.isBound=function(){return!!t.bound},e.release=function(){t.context.useProgram(null),e.setBound(!1)},e.setContext=function(e){t.vertexShader.setContext(e),t.fragmentShader.setContext(e),t.geometryShader.setContext(e)},e.link=function(){if(t.inked)return!0;if(0===t.handle)return t.error="Program has not been initialized, and/or does not have shaders.",!1;t.uniformLocs={},t.context.linkProgram(t.handle);var r=t.context.getProgramParameter(t.handle,t.context.LINK_STATUS);if(!r){var n=t.context.getProgramInfoLog(t.handle);return console.error("Error linking shader "+n),t.handle=0,!1}return e.setLinked(!0),t.attributeLocs={},!0},e.setUniformf=function(r,n){var o=e.findUniform(r);return o===-1?(t.error="Could not set uniform "+r+" . No such uniform.",!1):(t.context.uniform1f(o,n),!0)},e.setUniformi=function(r,n){var o=e.findUniform(r);return o===-1?(t.error="Could not set uniform "+r+" . No such uniform.",!1):(t.context.uniform1i(o,n),!0)},e.setUniformMatrix=function(r,n){var o=e.findUniform(r);return o===-1?(t.error="Could not set uniform "+r+" . No such uniform.",!1):(t.context.uniformMatrix4fv(o,!1,n),!0)},e.setUniformMatrix3x3=function(r,n){var o=e.findUniform(r);return o===-1?(t.error="Could not set uniform "+r+" . No such uniform.",!1):(t.context.uniformMatrix3fv(o,!1,n),!0)},e.setUniform3f=function(r,n){var o=e.findUniform(r);return o===-1?(t.error="Could not set uniform "+r+" . No such uniform.",!1):(t.context.uniform3f(o,n[0],n[1],n[2]),!0)},e.setUniform3fv=function(r,n,o){var a=e.findUniform(r);return a===-1?(t.error="Could not set uniform "+r+" . No such uniform.",!1):(t.context.uniform3fv(a,n,o),!0)},e.findUniform=function(e){if(!e||!t.linked)return-1;var r=Object.keys(t.uniformLocs).indexOf(e);return r!==-1?t.uniformLocs[e]:(r=t.context.getUniformLocation(t.handle,e),null===r&&(t.error="Uniform "+e+" not found in current shader program."),t.uniformLocs[e]=r,r)},e.isUniformUsed=function(e){if(!e)return!1;var r=Object.keys(t.uniformLocs).indexOf(e);return r!==-1||(t.linked?(r=t.context.getUniformLocation(t.handle,e),null!==r&&(t.uniformLocs[e]=r,!0)):(console.log("attempt to find uniform when the shader program is not linked"),!1))},e.isAttributeUsed=function(e){if(!e)return!1;var r=Object.keys(t.attributeLocs).indexOf(e);return r!==-1||(t.linked?(r=t.context.getAttribLocation(t.handle,e),r!==-1&&(t.attributeLocs[e]=r,!0)):(console.log("attempt to find uniform when the shader program is not linked"),!1))},e.attachShader=function(r){if(0===r.getHandle())return t.error="Shader object was not initialized, cannot attach it.",!1;if("Unknown"===r.getShaderType())return t.error="Shader object is of type Unknown and cannot be used.",!1;if(0===t.handle){var n=t.context.createProgram();if(0===n)return t.error="Could not create shader program.",!1;t.handle=n,t.linked=!1}return"Vertex"===r.getShaderType()&&(0!==t.vertexShaderHandle&&t.comntext.detachShader(t.handle,t.vertexShaderHandle),t.vertexShaderHandle=r.getHandle()),"Fragment"===r.getShaderType()&&(0!==t.fragmentShaderHandle&&t.context.detachShader(t.handle,t.fragmentShaderHandle),t.fragmentShaderHandle=r.getHandle()),t.context.attachShader(t.handle,r.getHandle()),e.setLinked(!1),!0},e.detachShader=function(e){if(0===e.getHandle())return t.error="shader object was not initialized, cannot attach it.",!1;if("Unknown"===e.getShaderType())return t.error="Shader object is of type Unknown and cannot be used.",!1;switch(0===t.handle&&(t.errror="This shader prorgram has not been initialized yet."),e.getShaderType()){case"Vertex":return t.vertexShaderHandle!==e.getHandle()?(t.error="The supplied shader was not attached to this program.",!1):(t.context.detachShader(t.handle,e.getHandle()),t.vertexShaderHandle=0,t.linked=!1,!0);case"Fragment":return t.fragmentShaderHandle!==e.getHandle()?(t.error="The supplied shader was not attached to this program.",!1):(t.context.detachShader(t.handle,e.getHandle()),t.fragmentShaderHandle=0,t.linked=!1,!0);default:return!1}},e.setContext=function(e){t.context=e,t.vertexShader.setContext(e),t.fragmentShader.setContext(e),t.geometryShader.setContext(e)}}function u(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,f,r),t.attributesLocs={},t.uniformLocs={},t.vertexShader=d["default"].newInstance(),t.vertexShader.setShaderType("Vertex"),t.fragmentShader=d["default"].newInstance(),t.fragmentShader.setShaderType("Fragment"),t.geometryShader=d["default"].newInstance(),t.geometryShader.setShaderType("Geometry"),l.obj(e,t),l.setGet(e,t,["error","handle","compiled","bound","md5Hash","vertexShader","fragmentShader","geometryShader","linked"]),i(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.substitute=a,t.vtkShaderProgram=i,t.extend=u;var s=r(3),l=o(s),c=r(29),d=n(c),f={vertexShaderHandle:0,fragmentShaderHandle:0,geometryShaderHandle:0,vertexShader:null,fragmentShader:null,geometryShader:null,linked:!1,bound:!1,compiled:!1,error:"",handle:0,numberOfOutputs:0,attributesLocs:null,uniformLocs:null,md5Hash:0,context:null},g=t.newInstance=l.newInstance(u);t["default"]={newInstance:g,extend:u,substitute:a}},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkShader"),e.compile=function(){var e=t.context.VERTEX_SHADER;if(!t.source||!t.source.length||"Unknown"===t.shaderType)return!1;switch(0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0),t.shaderType){case"Fragment":e=t.context.FRAGMENT_SHADER;break;case"Vertex":default:e=t.context.VERTEX_SHADER}t.handle=t.context.createShader(e),t.context.shaderSource(t.handle,t.source),t.context.compileShader(t.handle);var r=t.context.getShaderParameter(t.handle,t.context.COMPILE_STATUS);if(!r){var n=t.context.getShaderInfoLog(t.handle);return console.error("Error compiling shader '"+t.source+"': "+n),t.context.deleteShader(t.handle),t.handle=0,!1}return!0},e.cleanup=function(){"Unknown"!==t.shaderType&&0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0,t.dirty=!0)}}function a(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,s,r),u.obj(e,t),u.setGet(e,t,["shaderType","source","error","handle","context"]),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.vtkShader=o,t.extend=a;var i=r(3),u=n(i),s={shaderType:"Unknown",source:"",error:"",handle:0,dirty:!1,context:null},l=t.newInstance=u.newInstance(a);t["default"]={newInstance:l,extend:a}},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){t.classHierarchy.push("vtkOpenGLVertexArrayObject"),e.exposedMethod=function(){},e.initialize=function(){t.extension=t.context.getExtension("OES_vertex_array_object"),!t.forceEmulation&&t.extension?(t.supported=!0,t.handleVAO=t.extension.createVertexArrayOES()):t.supported=!1},e.isReady=function(){return 0!==t.handleVAO||t.supported===!1},e.bind=function(){e.isReady()||e.initialize(),e.isReady()&&t.supported?t.extension.bindVertexArrayOES(t.handleVAO):e.isReady()&&!function(){var e=t.context;Object.keys(t.buffers).map(function(e){return t.buffers[e]}).forEach(function(r){t.context.bindBuffer(e.ARRAY_BUFFER,r.buffer),Object.keys(r.attributes).map(function(e){return r.attributes[e]}).forEach(function(t){for(var r=t.isMatrix?t.size:1,n=0;n<r;++n)e.enableVertexAttribArray(t.index+n),e.vertexAttribPointer(t.index+n,t.size,t.type,t.normalize,t.stride,t.offset+t.stride*n/t.size),t.divisor>0&&e.vertexAttribDivisor(t.index+n,1)})})}()},e.release=function(){e.isReady()&&t.supported?t.extension.bindVertexArrayOES(null):e.isReady()&&!function(){var e=t.context;Object.keys(t.buffers).map(function(e){return t.buffers[e]}).forEach(function(t){Object.keys(t.attributes).map(function(e){return t.attributes[e]}).forEach(function(t){for(var r=t.isMatrix?t.size:1,n=0;n<r;++n)e.enableVertexAttribArray(t.index+n),e.vertexAttribPointer(t.index+n,t.size,t.type,t.normalize,t.stride,t.offset+t.stride*n/t.size),t.divisor>0&&e.vertexAttribDivisor(t.index+n,0),e.disableVertexAttribArray(t.index+n)})})}()},e.shaderProgramChanged=function(){e.release(),t.handleVAO&&t.extension.deleteVertexArrayOES(t.handleVAO),t.handleVAO=0,t.handleProgram=0},e.releaseGraphicsResources=function(){e.shaderProgramChanged(),t.handleVAO&&t.extension.deleteVertexArrayOES(t.handleVAO),t.handleVAO=0,t.supported=!0,t.handleProgram=0},e.addAttributeArray=function(t,r,n,o,a,i,u,s){return e.addAttributeArrayWithDivisor(t,r,n,o,a,i,u,s,0,!1)},e.addAttributeArrayWithDivisor=function(r,n,a,i,u,s,c,d,f,g){if(!r)return!1;if(!r.isBound()||0===n.getHandle()||n.getType()!==l.OBJECT_TYPE.ARRAY_BUFFER)return!1;if(0===t.handleProgram&&(t.handleProgram=r.getHandle()),e.isReady()||e.initialize(),!e.isReady()||t.handleProgram!==r.getHandle())return!1;var m=t.context,p={};if(p.index=m.getAttribLocation(t.handleProgram,a),p.offset=i,p.stride=u,p.type=s,p.size=c,p.normalize=d,p.isMatrix=g,p.divisor=f,p.Index===-1)return!1;if(n.bind(),m.enableVertexAttribArray(p.index),m.vertexAttribPointer(p.index,p.size,p.type,p.normalize,p.stride,p.offset),f>0&&m.vertexAttribDivisor(p.index,1),!t.supported){var v=n.getHandle();Object.keys(t.buffers).indexOf(v)!==-1?(t.buffers[v].attributes[p.index]=p,t.buffers[v].buffer=v):t.buffers[v]={buffer:v,attributes:o({},p.index,p)}}return!0},e.addAttributeMatrixWithDivisor=function(r,n,o,a,i,u,s,l,c){var d=e.addAttributeArrayWithDivisor(r,n,o,a,i,u,s,l,c,!0);if(!d)return d;for(var f=t.context,g=f.getAttribLocation(t.handleProgram,o),m=1;m<s;m++)f.enableVertexAttribArray(g+m),f.vertexAttribPointer(g+m,s,u,l,i,a+i*m/s),c>0&&f.vertexAttribDivisor(g+m,1);return!0},e.removeAttributeArray=function(r){if(!e.isReady()||0===t.handleProgram)return!1;var n=t.context,o=n.getAttribLocation(t.handleProgram,r);return o!==-1&&(n.disableVertexAttribArray(o),t.supported||Object.keys(t.buffers).map(function(e){return t.buffers[e]}).forEach(function(e){delete e.attributes[o]}),!0)}}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,c,r),t.buffers={},s.obj(e,t),s.get(e,t,["supported"]),s.setGet(e,t,["context","forceEmulation"]),a(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=r(3),s=n(u),l=r(25),c={forceEmulation:!1,handleVAO:0,handleProgram:0,supported:!0,buffers:null,context:null},d=t.newInstance=s.newInstance(i);t["default"]={newInstance:d,extend:i}},function(e,t){"use strict";function r(e){return function(){return console.log("vtkMath::"+e+" - NOT IMPLEMENTED")}}function n(e,t){for(var r=0;r<3;r++){var n=e[r];e[r]=t[r],t[r]=n}}function o(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=[];t.length<e;)t.push(0);return t}function a(e,t){for(var r=1,n=1;n<=t;++n)r*=(e-n+1)/n;return Math.floor(r)}function i(e,t){if(e<t)return 0;for(var r=o(t),n=0;n<t;++n)r[n]=n;return r}function u(e,t,r){for(var n=0,o=t-1;o>=0;--o)if(r[o]<e-t+o){for(var a=r[o]+1;o<t;)r[o++]=a++;n=1;break}return n}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=t-e;return e+r*Math.random()}function l(e,t,r){r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2]}function c(e,t,r){r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2]}function d(e,t){e[0]*=t,e[1]*=t,e[2]*=t}function f(e,t){e[0]*=t,e[1]*=t}function g(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function m(e,t,r){for(var n=0;n<3;n++)for(var o=0;o<3;o++)r[n][o]=e[n]*t[o]}function p(e,t,r){var n=e[1]*t[2]-e[2]*t[1],o=e[2]*t[0]-e[0]*t[2],a=e[0]*t[1]-e[1]*t[0];r[0]=n,r[1]=o,r[2]=a}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;switch(t){case 1:return Math.abs(e);case 2:return Math.sqrt(e[0]*e[0]+e[1]*e[1]);case 3:return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);default:for(var r=0,n=0;n<t;n++)r+=e[n]*e[n];return Math.sqrt(r)}}function h(e){var t=v(e);return 0!==t&&(e[0]/=t,e[1]/=t,e[2]/=t),t}function T(e,t,r,n){var o=e[0]*e[0],a=e[1]*e[1],i=e[2]*e[2],u=Math.sqrt(o+a+i),s=void 0,l=void 0,c=void 0;o>a&&o>i?(s=0,l=1,c=2):a>i?(s=1,l=2,c=0):(s=2,l=0,c=1);var d=e[s]/u,f=e[l]/u,g=e[c]/u,m=Math.sqrt(d*d+g*g);if(0!==n){var p=Math.sin(n),v=Math.cos(n);t&&(t[s]=(g*v-d*f*p)/m,t[l]=p*m,t[c]=(-(d*v)-f*g*p)/m),r&&(r[s]=(-(g*p)-d*f*v)/m,r[l]=v*m,r[c]=(d*p-f*g*v)/m)}else t&&(t[s]=g/m,t[l]=0,t[c]=-d/m),r&&(r[s]=-d*f/m,r[l]=m,r[c]=-f*g/m)}function x(e,t,r){var n=g(t,t);if(0===n)return r[0]=0,r[1]=0,r[2]=0,!1;for(var o=g(e,t)/n,a=0;a<3;a++)r[a]=t[a];return d(r,o),!0}function C(e,t){return e[0]*t[0]+e[1]*t[1]}function M(e,t,r){var n=C(t,t);if(0===n)return r[0]=0,r[1]=0,!1;for(var o=C(e,t)/n,a=0;a<2;a++)r[a]=t[a];return f(r,o),!0}function b(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])+(e[2]-t[2])*(e[2]-t[2])}function y(e,t){var r=[0,0,0];return p(e,t,r),Math.atan2(v(p),g(e,t))}function A(e,t,r){var n=Math.abs(e-r);return 1/Math.sqrt(2*Math.PI*t)*Math.exp(-Math.pow(n,2)/(2*t))}function O(e,t,r){var n=Math.abs(e-r);return Math.exp(-Math.pow(n,2)/(2*t))}function P(e,t,r){for(var n=0;n<2;n++)for(var o=0;o<2;o++)r[n][o]=e[n]*t[o]}function V(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function w(e){var t=V(e);return 0!==t&&(e[0]/=t,e[1]/=t),t}function S(e,t){return e[0]*t[1]-t[0]*e[1]}function E(e,t){for(var r=void 0,o=void 0,a=void 0,i=[0,0,0],u=0;u<3;u++)a=Math.abs(e[u][0]),(o=Math.abs(e[u][1]))>a&&(a=o),(o=Math.abs(e[u][2]))>a&&(a=o),i[u]=1/a;a=i[0]*Math.abs(e[0][0]),r=0,(o=i[1]*Math.abs(e[1][0]))>=a&&(a=o,r=1),(o=i[2]*Math.abs(e[2][0]))>=a&&(r=2),0!==r&&(n(e[r],e[0]),i[r]=i[0]),t[0]=r,e[1][0]/=e[0][0],e[2][0]/=e[0][0],e[1][1]-=e[1][0]*e[0][1],e[2][1]-=e[2][0]*e[0][1],a=i[1]*Math.abs(e[1][1]),r=1,(o=i[2]*Math.abs(e[2][1]))>=a&&(r=2,n(e[2],e[1]),i[2]=i[1]),t[1]=r,e[2][1]/=e[1][1],e[1][2]-=e[1][0]*e[0][2],e[2][2]-=e[2][0]*e[0][2]+e[2][1]*e[1][2],t[2]=2}function I(e,t,r){var n=r[t[0]];r[t[0]]=r[0],r[0]=n,n=r[t[1]],r[t[1]]=r[1],r[1]=n-e[1][0]*r[0],n=r[t[2]],r[t[2]]=r[2],r[2]=n-e[2][0]*r[0]-e[2][1]*r[1],r[2]/=e[2][2],r[1]=(r[1]-e[1][2]*r[2])/e[1][1],r[0]=(r[0]-e[0][1]*r[1]-e[0][2]*r[2])/e[0][0]}function R(e,t,r){var n=e[0][0],o=e[0][1],a=e[0][2],i=e[1][0],u=e[1][1],s=e[1][2],l=e[2][0],c=e[2][1],d=e[2][2],f=+S(u,c,s,d),g=-S(i,l,s,d),m=+S(i,l,u,c),p=-S(o,c,a,d),v=+S(n,l,a,d),h=-S(n,l,o,c),T=+S(o,u,a,s),x=-S(n,i,a,s),C=+S(n,i,o,u),M=n*f+o*g+a*m,b=f*t[0]+p*t[1]+T*t[2],y=g*t[0]+v*t[1]+x*t[2],A=m*t[0]+h*t[1]+C*t[2];r[0]=b/M,r[1]=y/M,r[2]=A/M}function _(e,t,r){var n=e[0][0]*t[0]+e[0][1]*t[1]+e[0][2]*t[2],o=e[1][0]*t[0]+e[1][1]*t[1]+e[1][2]*t[2],a=e[2][0]*t[0]+e[2][1]*t[1]+e[2][2]*t[2];r[0]=n,r[1]=o,r[2]=a}function L(e,t,r){for(var n=[[0,0,0],[0,0,0],[0,0,0]],o=0;o<3;o++)n[0][o]=e[0][0]*t[0][o]+e[0][1]*t[1][o]+e[0][2]*t[2][o],n[1][o]=e[1][0]*t[0][o]+e[1][1]*t[1][o]+e[1][2]*t[2][o],n[2][o]=e[2][0]*t[0][o]+e[2][1]*t[1][o]+e[2][2]*t[2][o];for(var a=0;a<3;a++)r[a][0]=n[a][0],r[a][1]=n[a][1],r[a][2]=n[a][2]}function D(e,t,r,n,o,a,i){n!==o&&console.error("Number of columns of A must match number of rows of B.");for(var u=0;u<r;u++)for(var s=0;s<a;s++){i[u][s]=0;for(var l=0;l<n;l++)i[u][s]+=e[u][l]*t[l][s]}}function N(e,t){var r=void 0;r=e[1][0],t[1][0]=e[0][1],t[0][1]=r,r=e[2][0],t[2][0]=e[0][2],t[0][2]=r,r=e[2][1],t[2][1]=e[1][2],t[1][2]=r,t[0][0]=e[0][0],t[1][1]=e[1][1],t[2][2]=e[2][2]}function F(e,t){var r=e[0][0],n=e[0][1],o=e[0][2],a=e[1][0],i=e[1][1],u=e[1][2],s=e[2][0],l=e[2][1],c=e[2][2],d=+S(i,l,u,c),f=-S(a,s,u,c),g=+S(a,s,i,l),m=-S(n,l,o,c),p=+S(r,s,o,c),v=-S(r,s,n,l),h=+S(n,i,o,u),T=-S(r,a,o,u),x=+S(r,a,n,i),C=r*d+n*f+o*g;t[0][0]=d/C,t[1][0]=f/C,t[2][0]=g/C,t[0][1]=m/C,t[1][1]=p/C,t[2][1]=v/C,t[0][2]=h/C,t[1][2]=T/C,t[2][2]=x/C}function B(e){for(var t=0;t<3;t++)e[t][0]=e[t][1]=e[t][2]=0,e[t][t]=1}function U(e){return e[0][0]*e[1][1]*e[2][2]+e[1][0]*e[2][1]*e[0][2]+e[2][0]*e[0][1]*e[1][2]-e[0][0]*e[2][1]*e[1][2]-e[1][0]*e[0][1]*e[2][2]-e[2][0]*e[1][1]*e[0][2]}function k(e,t){var r=e[0]*e[0],n=e[0]*e[1],o=e[0]*e[2],a=e[0]*e[3],i=e[1]*e[1],u=e[2]*e[2],s=e[3]*e[3],l=e[1]*e[2],c=e[1]*e[3],d=e[2]*e[3],f=i+u+s,g=1/(r+f),m=(r-f)*g;g*=2,t[0][0]=i*g+m,t[1][0]=(l+a)*g,t[2][0]=(c-o)*g,t[0][1]=(l-a)*g,t[1][1]=u*g+m,t[2][1]=(d+n)*g,t[0][2]=(c+o)*g,t[1][2]=(d-n)*g,t[2][2]=s*g+m}function G(e,t,r,n){var a=void 0,i=void 0,u=void 0,s=void 0,l=void 0,c=void 0,d=void 0,f=void 0,g=void 0,m=void 0,p=void 0,v=void 0,h=void 0,T=void 0,x=void 0,C=void 0,M=o(t),b=o(t),y=function(t,r,n,o,a){T=t[r][n],h=t[o][a],e[r][n]=T-v*(h+T*m),e[o][a]=h+v*(T-h*m)};for(l=0;l<t;l++){for(s=0;s<t;s++)n[l][s]=0;n[l][l]=1}for(l=0;l<t;l++)M[l]=r[l]=e[l][l],b[l]=0;for(a=0;a<xe;a++){for(p=0,l=0;l<t-1;l++)for(s=l+1;s<t;s++)p+=Math.abs(e[l][s]);if(0===p)break;for(d=a<3?.2*p/(t*t):0,l=0;l<t-1;l++)for(s=l+1;s<t;s++)if(T=100*Math.abs(e[l][s]),a>3&&Math.abs(r[l])+T===Math.abs(r[l])&&Math.abs(r[s])+T===Math.abs(r[s]))e[l][s]=0;else if(Math.abs(e[l][s])>d){for(h=r[s]-r[l],Math.abs(h)+T===Math.abs(h)?g=e[l][s]/h:(f=.5*h/e[l][s],g=1/(Math.abs(f)+Math.sqrt(1+f*f)),f<0&&(g=-g)),x=1/Math.sqrt(1+g*g),v=g*x,m=v/(1+x),h=g*e[l][s],b[l]-=h,b[s]+=h,r[l]-=h,r[s]+=h,e[l][s]=0,i=0;i<=l-1;i++)y(e,i,l,i,s);for(i=l+1;i<=s-1;i++)y(e,l,i,i,s);for(i=s+1;i<t;i++)y(e,l,i,s,i);for(i=0;i<t;i++)y(n,i,l,i,s)}for(l=0;l<t;l++)M[l]+=b[l],r[l]=M[l],b[l]=0}if(a>=xe)return console.warn("vtkMath::Jacobi: Error extracting eigenfunctions"),0;for(i=0;i<t-1;i++){for(u=i,C=r[u],a=i+1;a<t;a++)r[a]>=C&&(u=a,C=r[u]);if(u!==i)for(r[u]=r[i],r[i]=C,a=0;a<t;a++)C=n[a][i],n[a][i]=n[a][u],n[a][u]=C}var A=(t>>1)+(1&t);for(i=0;i<t;i++){for(c=0,a=0;a<t;a++)n[a][i]>=0&&c++;if(c<A)for(a=0;a<t;a++)n[a][i]*=-1}return 1}function j(e,t){var r=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];r[0][0]=e[0][0]+e[1][1]+e[2][2],r[1][1]=e[0][0]-e[1][1]-e[2][2],r[2][2]=-e[0][0]+e[1][1]-e[2][2],r[3][3]=-e[0][0]-e[1][1]+e[2][2],r[0][1]=r[1][0]=e[2][1]-e[1][2],r[0][2]=r[2][0]=e[0][2]-e[2][0],r[0][3]=r[3][0]=e[1][0]-e[0][1],r[1][2]=r[2][1]=e[1][0]+e[0][1],r[1][3]=r[3][1]=e[0][2]+e[2][0],r[2][3]=r[3][2]=e[2][1]+e[1][2];for(var n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],o=[0,0,0,0],a=[0,0,0,0],i=[0,0,0,0],u=0;u<4;u++)a[u]=r[u],i[u]=n[u];G(a,4,o,i),t[0]=n[0][0],t[1]=n[1][0],t[2]=n[2][0],t[3]=n[3][0]}function K(e,t,r){var n=e[0]*t[0],o=e[0]*t[1],a=e[0]*t[2],i=e[0]*t[3],u=e[1]*t[0],s=e[1]*t[1],l=e[1]*t[2],c=e[1]*t[3],d=e[2]*t[0],f=e[2]*t[1],g=e[2]*t[2],m=e[2]*t[3],p=e[3]*t[0],v=e[3]*t[1],h=e[3]*t[2],T=e[3]*t[3];r[0]=n-s-g-T,r[1]=o+u+m-h,r[2]=a-c+d+v,r[3]=i+l-f+p}function z(e,t){for(var r=0;r<3;r++)t[0][r]=e[0][r],t[1][r]=e[1][r],t[2][r]=e[2][r];for(var a=o(3),i=o(3),u=void 0,s=0;s<3;s++){var l=Math.abs(t[s][0]),c=Math.abs(t[s][1]),d=Math.abs(t[s][2]);u=c>l?c:l,u=d>u?d:u,a[s]=1,0!==u&&(a[s]/=u)}var f=Math.abs(t[0][0])*a[0],g=Math.abs(t[1][0])*a[1],m=Math.abs(t[2][0])*a[2];i[0]=0,u=f,g>=u&&(u=g,i[0]=1),m>=u&&(i[0]=2),0!==i[0]&&(n(t[i[0]],t[0]),a[i[0]]=a[0]);var p=Math.abs(t[1][1])*a[1],v=Math.abs(t[2][1])*a[2];i[1]=1,u=p,v>=u&&(i[1]=2,n(t[2],t[1])),i[2]=2;var h=0;if(U(t)<0){h=1;for(var T=0;T<3;T++)t[0][T]=-t[0][T],t[1][T]=-t[1][T],t[2][T]=-t[2][T]}var x=o(4);if(j(t,x),k(x,t),h)for(var C=0;C<3;C++)t[0][C]=-t[0][C],t[1][C]=-t[1][C],t[2][C]=-t[2][C];1!==i[1]&&n(t[i[1]],t[1]),0!==i[0]&&n(t[i[0]],t[0])}function W(e,t,r){var a=void 0,i=void 0,u=void 0,s=void 0,l=void 0,c=void 0,d=[o(3),o(3),o(3)],f=o(3),g=o(3);for(a=0;a<3;a++)d[a][0]=e[a][0],d[a][1]=e[a][1],d[a][2]=e[a][2],f[a]=d[a],g[a]=r[a];if(G(f,3,t,g),t[0]===t[1]&&t[0]===t[2])return void B(r);for(N(r,r),a=0;a<3;a++)if(t[(a+1)%3]===t[(a+2)%3]){for(c=Math.abs(r[a][0]),s=0,i=1;i<3;i++)c<(l=Math.abs(r[a][i]))&&(c=l,s=i);return s!==a&&(l=t[s],t[s]=t[a],t[a]=l,n(r[a],r[s])),r[s][s]<0&&(r[s][0]=-r[s][0],r[s][1]=-r[s][1],r[s][2]=-r[s][2]),i=(s+1)%3,u=(s+2)%3,r[i][0]=0,r[i][1]=0,r[i][2]=0,r[i][i]=1,p(r[s],r[i],r[u]),h(r[u]),p(r[u],r[s],r[i]),void N(r,r)}for(c=Math.abs(r[0][0]),s=0,a=1;a<3;a++)c<(l=Math.abs(r[a][0]))&&(c=l,s=a);for(0!==s&&(l=t[s],t[s]=t[0],t[0]=l,n(r[s],r[0])),Math.abs(r[1][1])<Math.abs(r[2][1])&&(l=t[2],t[2]=t[1],t[1]=l,n(r[2],r[1])),a=0;a<2;a++)r[a][a]<0&&(r[a][0]=-r[a][0],r[a][1]=-r[a][1],r[a][2]=-r[a][2]);U(r)<0&&(r[2][0]=-r[2][0],r[2][1]=-r[2][1],r[2][2]=-r[2][2]),N(r,r)}function H(e,t,r,n){var a=void 0,i=[o(3),o(3),o(3)];for(a=0;a<3;a++)i[0][a]=e[0][a],i[1][a]=e[1][a],i[2][a]=e[2][a];var u=U(i);if(u<0)for(a=0;a<3;a++)i[0][a]=-i[0][a],i[1][a]=-i[1][a],i[2][a]=-i[2][a];z(i,t),N(i,i),L(i,t,n),W(n,r,n),L(t,n,t),N(n,n),u<0&&(r[0]=-r[0],r[1]=-r[1],r[2]=-r[2])}function Y(e,t,r){var n=void 0,a=void 0,i=void 0,u=void 0,s=0,l=void 0,c=void 0,d=void 0,f=o(r);for(n=0;n<r;n++){for(u=0,a=0;a<r;a++)(d=Math.abs(e[n][a]))>u&&(u=d);if(0===u)return console.warn("Unable to factor linear system"),0;f[n]=1/u}for(a=0;a<r;a++){for(n=0;n<a;n++){for(l=e[n][a],i=0;i<n;i++)l-=e[n][i]*e[i][a];e[n][a]=l}for(u=0,n=a;n<r;n++){for(l=e[n][a],i=0;i<a;i++)l-=e[n][i]*e[i][a];e[n][a]=l,(c=f[n]*Math.abs(l))>=u&&(u=c,s=n)}if(a!==s){for(i=0;i<r;i++)c=e[s][i],e[s][i]=e[a][i],e[a][i]=c;f[s]=f[a]}if(t[a]=s,Math.abs(e[a][a])<=Ce)return console.warn("Unable to factor linear system"),0;if(a!==r-1)for(c=1/e[a][a],n=a+1;n<r;n++)e[n][a]*=c}return 1}function q(e,t,r,n){var o=void 0,a=void 0,i=void 0,u=void 0,s=void 0;for(i=-1,o=0;o<n;o++){if(u=t[o],s=r[u],r[u]=r[o],i>=0)for(a=i;a<=o-1;a++)s-=e[o][a]*r[a];else 0!==s&&(i=o);r[o]=s}for(o=n-1;o>=0;o--){for(s=r[o],a=o+1;a<n;a++)s-=e[o][a]*r[a];r[o]=s/e[o][o]}}function X(e,t,r){if(2===r){var n=o(2),a=S(e[0][0],e[0][1],e[1][0],e[1][1]);return 0===a?0:(n[0]=(e[1][1]*t[0]-e[0][1]*t[1])/a,n[1]=(-(e[1][0]*t[0])+e[0][0]*t[1])/a,t[0]=n[0],t[1]=n[1],1)}if(1===r)return 0===e[0][0]?0:(t[0]/=e[0][0],1);var i=o(r);return 0===Y(e,i,r)?0:(q(e,i,t,r),1)}function J(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=n||o(r),u=a||o(r);if(0===Y(e,i,r,u))return 0;for(var s=0;s<r;s++){for(var l=0;l<r;l++)u[l]=0;u[s]=1,q(e,i,u,r);for(var c=0;c<r;c++)t[c][s]=u[c]}return 1}function Z(e,t){for(var r=+Number.MAX_VALUE,n=-Number.MAX_VALUE,o=0;o<t;o++)for(var a=o;a<t;a++)Math.abs(e[o][a])>Se&&(n=Math.abs(e[o][a]));for(var i=0;i<t;i++)Math.abs(e[i][i])<we&&(r=Math.abs(e[i][i]));return 0===r?Number.MAX_VALUE:n/r}function Q(e,t,r){return G(e,3,t,r)}function $(e,t,r,n){if(e<r)return console.warn("Insufficient number of samples. Underdetermined."),0;var a=void 0,i=void 0,u=void 0,s=o(r),l=o(r),c=o(r);for(a=0;a<r;a++)for(c[a]=o(r),s[a]=o(r),i=0;i<r;i++)s[a][i]=0;for(u=0;u<e;u++)for(a=0;a<r;a++)for(i=a;i<r;i++)s[a][i]+=t[u][a]*t[u][i];for(a=0;a<r;a++)for(i=0;i<a;i++)s[a][i]=s[i][a];for(G(s,r,l,c),a=0;a<r;a++)n[a][0]=c[a][r-1];return 1}function ee(e,t,r,n,a,i){var u=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];if(e<r||e<a)return console.warn("Insufficient number of samples. Underdetermined."),0;var s=o(a),l=1,c=void 0,d=0,f=void 0,g=void 0,m=void 0,p=0;if(u){for(g=0;g<a;g++)s[g]=1;for(f=0;f<e;f++)for(g=0;g<a;g++)Math.abs(n[f][g])>Ce&&(l=0,s[g]=0);if(l&&1===a)return console.warn("Detected homogeneous system (Y=0), calling SolveHomogeneousLeastSquares()"),$(e,t,r,i);if(l)p=1;else for(g=0;g<a;g++)s[g]&&(p=1)}if(p){for(c=o(r),g=0;g<r;g++)c[g]=[0];d=$(e,t,r,c)}var v=o(r),h=o(r),T=o(r);for(f=0;f<r;f++){for(v[f]=o(r),h[f]=o(r),g=0;g<r;g++)v[f][g]=0,h[f][g]=0;for(T[f]=o(a),g=0;g<a;g++)T[f][g]=0}for(m=0;m<e;m++)for(f=0;f<r;f++){for(g=f;g<r;g++)v[f][g]+=t[m][f]*t[m][g];for(g=0;g<a;g++)T[f][g]+=t[m][f]*n[m][g]}for(f=0;f<r;f++)for(g=0;g<f;g++)v[f][g]=v[g][f];var x=J(v,h,r);if(x)for(f=0;f<r;f++)for(g=0;g<a;g++)for(i[f][g]=0,m=0;m<r;m++)i[f][g]+=h[f][m]*T[m][g];if(p)for(g=0;g<a;g++)if(s[g])for(f=0;f<r;f++)i[f][g]=c[f][0];return p?d&&x:x}function te(e,t){var r=void 0,n=void 0,o=Te(e,3),a=o[0],i=o[1],u=o[2],s=1/3,l=1/6,c=2/3,d=a,f=a;i>d?d=i:i<f&&(f=i),u>d?d=u:u<f&&(f=u);var g=d;n=g>0?(d-f)/d:0,n>0?(r=a===d?l*(i-u)/(d-f):i===d?s+l*(u-a)/(d-f):c+l*(a-i)/(d-f),r<0&&(r+=1)):r=0,t[0]=r,t[1]=n,t[2]=g}function re(e,t){var r=Te(e,3),n=r[0],o=r[1],a=r[2],i=1/3,u=1/6,s=2/3,l=5/6,c=void 0,d=void 0,f=void 0;n>u&&n<=i?(d=1,c=(i-n)/u,f=0):n>i&&n<=.5?(d=1,f=(n-i)/u,c=0):n>.5&&n<=s?(f=1,d=(s-n)/u,c=0):n>s&&n<=l?(f=1,c=(n-s)/u,d=0):n>l&&n<=1?(c=1,f=(1-n)/u,d=0):(c=1,d=n/u,f=0),c=o*c+(1-o),d=o*d+(1-o),f=o*f+(1-o),c*=a,d*=a,f*=a,t[0]=c,t[1]=d,t[2]=f}function ne(e,t){var r=Te(e,3),n=r[0],o=r[1],a=r[2],i=(n+16)/116,u=o/500+i,s=i-a/200;i=Math.pow(i,3)>.008856?Math.pow(i,3):(i-16/116)/7.787,u=Math.pow(u,3)>.008856?Math.pow(u,3):(u-16/116)/7.787,s=Math.pow(s,3)>.008856?Math.pow(s,3):(s-16/116)/7.787;var l=.9505,c=1,d=1.089;t[0]=l*u,t[1]=c*i,t[2]=d*s}function oe(e,t){var r=Te(e,3),n=r[0],o=r[1],a=r[2],i=.9505,u=1,s=1.089,l=n/i,c=o/u,d=a/s;l=l>.008856?Math.pow(l,1/3):7.787*l+16/116,c=c>.008856?Math.pow(c,1/3):7.787*c+16/116,d=d>.008856?Math.pow(d,1/3):7.787*d+16/116,t[0]=116*c-16,t[1]=500*(l-c),t[2]=200*(c-d)}function ae(e,t){var r=Te(e,3),n=r[0],o=r[1],a=r[2],i=3.2406*n+o*-1.5372+a*-.4986,u=n*-.9689+1.8758*o+.0415*a,s=.0557*n+o*-.204+1.057*a;i>.0031308?i=1.055*Math.pow(i,1/2.4)-.055:i*=12.92,u>.0031308?u=1.055*Math.pow(u,1/2.4)-.055:u*=12.92,s>.0031308?s=1.055*Math.pow(s,1/2.4)-.055:s*=12.92;var l=i;l<u&&(l=u),l<s&&(l=s),l>1&&(i/=l,u/=l,s/=l),i<0&&(i=0),u<0&&(u=0),s<0&&(s=0),t[0]=i,t[1]=u,t[2]=s}function ie(e,t){var r=Te(e,3),n=r[0],o=r[1],a=r[2];n>.04045?n=Math.pow((n+.055)/1.055,2.4):n/=12.92,o>.04045?o=Math.pow((o+.055)/1.055,2.4):o/=12.92,a>.04045?a=Math.pow((a+.055)/1.055,2.4):a/=12.92,t[0]=.4124*n+.3576*o+.1805*a,t[1]=.2126*n+.7152*o+.0722*a,t[2]=.0193*n+.1192*o+.9505*a}function ue(e,t){var r=[0,0,0];
ie(e,r),oe(r,t)}function se(e,t){var r=[0,0,0];ne(e,r),ae(r,t)}function le(e){e[0]=1,e[1]=-1,e[2]=1,e[3]=-1,e[4]=1,e[5]=-1}function ce(e){return!(e[1]-e[0]<0)}function de(e,t,r){return e<t?t:e>r?r:e}function fe(e,t){var r=0;return t[0]!==t[1]&&(r=e<t[0]?t[0]:e>t[1]?t[1]:e,r=(r-t[0])/(t[1]-t[0])),r}function ge(e,t){if(!e||!t)return 0;for(var r=0;r<6;r+=2)if(e[r]<t[r]||e[r]>t[r+1]||e[r+1]<t[r]||e[r+1]>t[r+1])return 0;return 1}function me(e,t,r){if(!e||!t)return 0;for(var n=0;n<6;n+=2)if(e[n]+r[n/2]<t[n]||e[n]-r[n/2]>t[n+1]||e[n+1]+r[n/2]<t[n]||e[n+1]-r[n/2]>t[n+1])return 0;return 1}function pe(e,t,r){if(!e||!t||!r)return 0;for(var n=0;n<3;n++)if(e[n]+r[n]<t[2*n]||e[n]-r[n]>t[2*n+1])return 0;return 1}function ve(e,t,r,n){for(var a=o(3),i=o(3),u=o(3),s=o(3),l=o(3),c=o(3),d=0;d<3;++d)a[d]=e[d]-t[d],i[d]=t[d]-r[d],u[d]=r[d]-e[d],s[d]=-a[d],l[d]=-i[d],c[d]=-u[d];var f=v(s),m=v(l),h=v(u),T=o(3);p(a,i,T);for(var x=v(T),C=f*m*h/(2*x),M=2*x*x,b=m*m*g(a,c)/M,y=h*h*g(s,i)/M,A=f*f*g(u,l)/M,O=0;O<3;++O)n[O]=b*e[O]+y*t[O]+A*r[O];return C}function he(){return[].concat([Number.MAX_VALUE,Number.MIN_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MAX_VALUE,Number.MIN_VALUE])}Object.defineProperty(t,"__esModule",{value:!0});var Te=function(){function e(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(s){o=!0,a=s}finally{try{!n&&u["return"]&&u["return"]()}finally{if(o)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),xe=20,Ce=1e-12,Me=function(){return Math.PI},be=function(e){return e/180*Math.PI},ye=function(e){return 180*e/Math.PI},Ae=Math.round,Oe=Math.floor,Pe=Math.ceil,Ve=r("ceilLog2"),we=Math.min,Se=Math.max,Ee=r("isPowerOfTwo"),Ie=r("nearestPowerOfTwo"),Re=r("factorial"),_e=r("randomSeed"),Le=r("getSeed"),De=r("gaussian"),Ne=r("GetScalarTypeFittingRange"),Fe=r("GetAdjustedScalarRange"),Be=1/0,Ue=-(1/0),ke=function(e){return!Number.isFinite(e)},Ge=Number.isNaN,je=Number.isFinite;t["default"]={Pi:Me,radiansFromDegrees:be,degreesFromRadians:ye,round:Ae,floor:Oe,ceil:Pe,ceilLog2:Ve,min:we,max:Se,isPowerOfTwo:Ee,nearestPowerOfTwo:Ie,factorial:Re,binomial:a,beginCombination:i,nextCombination:u,randomSeed:_e,getSeed:Le,random:s,gaussian:De,add:l,subtract:c,multiplyScalar:d,multiplyScalar2D:f,dot:g,outer:m,cross:p,norm:v,normalize:h,perpendiculars:T,projectVector:x,projectVector2D:M,distance2BetweenPoints:b,angleBetweenVectors:y,gaussianAmplitude:A,gaussianWeight:O,dot2D:C,outer2D:P,norm2D:V,normalize2D:w,determinant2x2:S,LUFactor3x3:E,LUSolve3x3:I,linearSolve3x3:R,multiply3x3_vect3:_,multiply3x3_mat3:L,multiplyMatrix:D,transpose3x3:N,invert3x3:F,identity3x3:B,determinant3x3:U,quaternionToMatrix3x3:k,matrix3x3ToQuaternion:j,multiplyQuaternion:K,orthogonalize3x3:z,diagonalize3x3:W,singularValueDecomposition3x3:H,solveLinearSystem:X,invertMatrix:J,luFactorLinearSystem:Y,luSolveLinearSystem:q,estimateMatrixCondition:Z,jacobi:Q,jacobiN:G,solveHomogeneousLeastSquares:$,solveLeastSquares:ee,rgb2hsv:te,hsv2rgb:re,lab2xyz:ne,xyz2lab:oe,xyz2rgb:ae,rgb2xyz:ie,rgb2lab:ue,LabToRGB:se,uninitializeBounds:le,areBoundsInitialized:ce,clampValue:de,clampAndNormalizeValue:fe,getScalarTypeFittingRange:Ne,getAdjustedScalarRange:Fe,extentIsWithinOtherExtent:ge,boundsIsWithinOtherBounds:me,pointIsWithinBounds:pe,solve3PointCircle:ve,inf:Be,negInf:Ue,isInf:ke,isNan:Ge,isFinite:je,createUninitializedBouds:he}},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n={min:Number.MAX_VALUE,max:Number.MIN_VALUE};if(t<0)return console.log("vtkDataArray: Compute magnitude - NOT IMPLEMENTED"),n;for(var o=e.length,a=t;a<o;a+=r){var i=e[a];n.min>i&&(n.min=i),n.max<i&&(n.max=i)}return n}function a(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e||[];r.length<=t;)r.push(null);return r}function i(e){var t=0;return e.filter(function(e,r){return r===t&&(t+=e+1,!0)})}function u(e){return i(e).length}function s(e){return Object.prototype.toString.call(e).split(" ")[1].slice(0,-1)}function l(e,t){function r(){t.ranges=null,e.modified()}t.classHierarchy.push("vtkDataArray"),e.getElementComponentSize=function(){return t.values.BYTES_PER_ELEMENT},e.getComponent=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.values[e*t.tuple+r]},e.setComponent=function(e,n,o){o!==t.values[e*t.tuple+n]&&(t.values[e*t.tuple+n]=o,r())},e.getData=function(){return t.values},e.getRange=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=e<0?t.tuple:e,n=null;return t.ranges||(t.ranges=a(t.ranges,t.tuple)),(n=t.ranges[r])?[n.min,n.max]:(n=t.ranges[r]=o(t.values,e),[n.min,n.max])},e.getTupleLocation=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e*t.tuple},e.getBounds=function(){return 3===t.tuple?[].concat(e.getRange(0),e.getRange(1),e.getRange(2)):2!==t.tuple?(console.error("getBounds called on an array of tuple size",t.tuple,t),[1,-1,1,-1,1,-1]):[].concat(e.getRange(0),e.getRange(1))},e.getNumberOfComponents=function(){return t.tuple},e.getNumberOfValues=function(){return t.values.length},e.getNumberOfTuples=function(){return t.values.length/t.tuple},e.getDataType=function(){return t.dataType},e.getNumberOfCells=function(){return void 0!==t.numberOfCells?t.numberOfCells:(t.cellSizes=i(t.values),t.numberOfCells=t.cellSizes.length,t.numberOfCells)},e.getCellSizes=function(){return void 0!==t.cellSizes?t.cellSizes:(t.cellSizes=i(t.values),t.cellSizes)},e.getName=function(){return t.name||(e.modified(),t.name="vtkDataArray"+e.getMTime()),t.name},e.setData=function(e,n){t.values=e,t.size=e.length,t.dataType=s(e),n&&(t.tuple=n),t.size%t.tuple!==0&&(t.tuple=1),r()},e.shallowCopy=function(){return v(Object.assign({},t))}}function c(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(t,p,r),t.values&&(t.size=t.values.length,t.dataType=s(t.values)),!t.empty&&(!t.values||!t.size)||"vtkDataArray"!==t.type)throw Error("Can not create vtkDataArray object without: size > 0, values or type = vtkDataArray");t.values||(t.values=new window[t.dataType](t.size)),f.obj(e,t),f.set(e,t,["name"]),l(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=t.STATIC=void 0,t.extend=c;var d=r(3),f=n(d),g=r(33),m=t.STATIC={computeRange:o,extractCellSizes:i,getNumberOfCells:u,getDataType:s},p={type:"vtkDataArray",name:"",tuple:1,size:0,dataType:g.VTK_DEFAULT_DATATYPE,values:null,ranges:null},v=t.newInstance=f.newInstance(c,"vtkDataArray");t["default"]=Object.assign({newInstance:v,extend:c},m)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.VTK_BYTE_SIZE={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},n=t.VTK_DATATYPES={CHAR:"Int8Array",SIGNED_CHAR:"Int8Array",UNSIGNED_CHAR:"Uint8Array",SHORT:"Int16Array",UNSIGNED_SHORT:"Uint16Array",INT:"Int32Array",UNSIGNED_INT:"Uint32Array",FLOAT:"Float32Array",DOUBLE:"Float64Array"},o=t.VTK_DEFAULT_DATATYPE="Float32Array";t["default"]={VTK_DEFAULT_DATATYPE:o,VTK_BYTE_SIZE:r,VTK_DATATYPES:n}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e,t){var r=this;t.classHierarchy.push("vtkOpenGLTexture"),e.build=function(e){e&&!t.renderable},e.render=function(t){if(t){var r=e.getFirstAncestorOfType("vtkOpenGLRenderer");e.preRender(r)}},e.preRender=function(r){if(t.window=r.getParent(),t.context=t.window.getContext(),t.renderable.getInterpolate()?(t.generateMipmap?e.setMinificationFilter(l.VTK_FILTER.LINEAR_MIPMAP_LINEAR):e.setMinificationFilter(l.VTK_FILTER.LINEAR),e.setMagnificationFilter(l.VTK_FILTER.LINEAR)):(e.setMinificationFilter(l.VTK_FILTER.NEAREST),e.setMagnificationFilter(l.VTK_FILTER.NEAREST)),t.handle)e.activate();else{var n=t.renderable.getInputData(),o=n.getExtent(),a=n.getPointData().getScalars();t.renderable.getInterpolate()&&(t.generateMipmap=!0,e.setMinificationFilter(l.VTK_FILTER.LINEAR_MIPMAP_LINEAR)),e.create2DFromRaw(o[1]-o[0]+1,o[3]-o[2]+1,a.getNumberOfComponents(),a.getDataType(),a.getData()),e.activate(),e.sendParameters()}},e.destroyTexture=function(){e.deactivate(),t.context&&t.handle&&t.context.deleteTexture(t.handle),t.handle=0,t.numberOfDimensions=0,t.target=0,t.components=0,t.width=0,t.height=0,t.depth=0,e.resetFormatAndType()},e.createTexture=function(){t.handle||(t.handle=t.context.createTexture(),t.target&&(t.context.bindTexture(t.target,t.handle),t.context.texParameteri(t.target,t.context.TEXTURE_MIN_FILTER,e.getOpenGLFilterMode(t.minificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_MAG_FILTER,e.getOpenGLFilterMode(t.magnificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_S,e.getOpenGLWrapMode(t.wrapS)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_T,e.getOpenGLWrapMode(t.wrapT)),t.context.bindTexture(t.target,null)))},e.getTextureUnit=function(){return t.window?t.window.getTextureUnitForTexture(e):-1},e.activate=function(){t.window.activateTexture(e),e.bind()},e.deactivate=function(){t.window&&(t.window.activateTexture(e),e.unBind(),t.window.deactivateTexture(e))},e.releaseGraphicsResources=function(r){r&&t.handle&&(r.makeCurrent(),r.activateTexture(e),e.unBind(),r.deactivateTexture(e),t.context.deleteTexture(t.handle),t.handle=0,t.numberOfDimensions=0,t.target=0,t.internalFormat=0,t.format=0,t.openGLDataType=0,t.components=0,t.width=0,t.height=0,t.depth=0),t.shaderProgram&&(t.shaderProgram.releaseGraphicsResources(r),t.shaderProgram=null)},e.bind=function(){t.context.bindTexture(t.target,t.handle),t.autoParameters&&e.getMTime()>t.sendParametersTime.getMTime()&&e.sendParameters()},e.unBind=function(){t.target&&t.context.bindTexture(t.target,null)},e.isBound=function(){var e=!1;if(t.context&&t.handle){var r=0;switch(t.target){case t.context.TEXTURE_2D:r=t.context.TEXTURE_BINDING_2D;break;default:console.warn("impossible case")}var n=t.context.getIntegerv(r);e=n===t.handle}return e},e.sendParameters=function(){t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_S,e.getOpenGLWrapMode(t.wrapS)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_T,e.getOpenGLWrapMode(t.wrapT)),t.context.texParameteri(t.target,t.context.TEXTURE_MIN_FILTER,e.getOpenGLFilterMode(t.minificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_MAG_FILTER,e.getOpenGLFilterMode(t.magnificationFilter)),t.sendParametersTime.modified()},e.getInternalFormat=function(r,n){return t.internalFormat?t.internalFormat:(t.internalFormat=e.getDefaultInternalFormat(r,n),t.internalFormat||console.debug("Unable to find suitable internal format for T="+r+" NC= "+n),t.internalFormat)},e.getDefaultInternalFormat=function(e,n){var o=0;return(o=t.window.getDefaultTextureInternalFormat(e,n,!1))?o:(o=r.window.getDefaultTextureInternalFormat(e,n,!0),o||(console.debug("Unsupported internal texture type!"),console.debug("Unable to find suitable internal format for T="+e+" NC= "+n)),o)},e.setInternalFormat=function(r){r!==t.context.InternalFormat&&(t.internalFormat=r,e.modified())},e.getFormat=function(r,n){return t.format||(t.format=e.getDefaultFormat(r,n)),t.format},e.getDefaultFormat=function(e,r){switch(r){case 1:return t.context.LUMINANCE;case 2:return t.context.LUMINANCE_ALPHA;case 3:return t.context.RGB;case 4:return t.context.RGBA;default:return t.context.RGB}},e.resetFormatAndType=function(){t.format=0,t.internalFormat=0,t.openGLDataType=0},e.getDefaultDataType=function(e){switch(e){case c.VTK_DATATYPES.UNSIGNED_CHAR:return t.context.UNSIGNED_BYTE;case c.VTK_DATATYPES.FLOAT:case c.VTK_DATATYPES.VOID:default:return t.context.getExtension("OES_texture_float")?t.context.FLOAT:t.context.UNSIGNED_BYTE}},e.getOpenGLDataType=function(r){return t.openGLDataType||(t.openGLDataType=e.getDefaultDataType(r)),t.openGLDataType},e.getShiftAndScale=function(){var e=0,r=1;switch(t.openGLDataType){case t.context.BYTE:r=127.5,e=r-128;break;case t.context.UNSIGNED_BYTE:r=255,e=0;break;case t.context.SHORT:r=32767.5,e=r-32768;break;case t.context.UNSIGNED_SHORT:r=65536,e=0;break;case t.context.INT:r=2147483647.5,e=r-2147483648;break;case t.context.UNSIGNED_INT:r=4294967295,e=0;break;case t.context.FLOAT:}return{shift:e,scale:r}},e.getOpenGLFilterMode=function(e){switch(e){case l.VTK_FILTER.NEAREST:return t.context.NEAREST;case l.VTK_FILTER.LINEAR:return t.context.LINEAR;case l.VTK_FILTER.NEAREST_MIPMAP_NEAREST:return t.context.NEAREST_MIPMAP_NEAREST;case l.VTK_FILTER.NEAREST_MIPMAP_LINEAR:return t.context.NEAREST_MIPMAP_LINEAR;case l.VTK_FILTER.LINEAR_MIPMAP_NEAREST:return t.context.LINEAR_MIPMAP_NEAREST;case l.VTK_FILTER.LINEAR_MIPMAP_LINEAR:return t.context.LINEAR_MIPMAP_LINEAR;default:return t.context.NEAREST}},e.getOpenGLWrapMode=function(e){switch(e){case l.VTK_WRAP.CLAMP_TO_EDGE:return t.context.CLAMP_TO_EDGE;case l.VTK_WRAP.REPEAT:return t.context.REPEAT;case l.VTK_WRAP.MIRRORED_REPEAT:return t.context.MIRRORED_REPEAT;default:return t.context.CLAMP_TO_EDGE}},e.create2DFromRaw=function(r,n,o,a,i){if(e.getOpenGLDataType(a),e.getInternalFormat(a,o),e.getFormat(a,o),!t.internalFormat||!t.format||!t.openGLDataType)return console.error("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=o,t.width=r,t.height=n,t.depth=1,t.numberOfDimensions=2,t.window.activateTexture(e),e.createTexture(),e.bind();var u=i;if(a!==c.VTK_DATATYPES.FLOAT&&t.openGLDataType===t.context.FLOAT){for(var s=t.width*t.height*t.components,l=new Float32Array(s),d=0;d<s;d++)l[d]=i[d];u=l}if(a!==c.VTK_DATATYPES.UNSIGNED_CHAR&&t.openGLDataType===t.context.UNSIGNED_BYTE){for(var f=t.width*t.height*t.components,g=new Uint8Array(f),m=0;m<f;m++)g[m]=i[m];u=g}return t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,u),t.generateMipmap&&t.context.generateMipmap(t.target),e.deactivate(),!0},e.getMaximumTextureSize=function(e){return e&&e.isCurrent()?e.getIntegerv(e.MAX_TEXTURE_SIZE):-1}}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,g,r),f["default"].extend(e,t),t.sendParametersTime={},s.obj(t.sendParametersTime),s.set(e,t,["format","openGLDataType"]),s.setGet(e,t,["window","context","keyMatrixTime","minificationFilter","magnificationFilter","wrapS","wrapT","wrapR"]),s.get(e,t,["components"]),a(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=r(3),s=o(u),l=r(35),c=r(33),d=r(18),f=n(d),g={window:null,context:null,handle:0,sendParametersTime:null,numberOfDimensions:0,target:0,format:0,openGLDataType:0,components:0,width:0,height:0,depth:0,autoParameters:!0,wrapS:l.VTK_WRAP.CLAMP_TO_EDGE,wrapT:l.VTK_WRAP.CLAMP_TO_EDGE,wrapR:l.VTK_WRAP.CLAMP_TO_EDGE,minificationFilter:l.VTK_FILTER.NEAREST,magnificationFilter:l.VTK_FILTER.NEAREST,minLOD:-1e3,maxLOD:1e3,baseLevel:0,maxLevel:0,generateMipmap:!1},m=t.newInstance=s.newInstance(i);t["default"]={newInstance:m,extend:i}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.VTK_WRAP={CLAMP_TO_EDGE:0,REPEAT:1,MIRRORED_REPEAT:2},n=t.VTK_FILTER={NEAREST:0,LINEAR:1,NEAREST_MIPMAP_NEAREST:2,NEAREST_MIPMAP_LINEAR:3,LINEAR_MIPMAP_NEAREST:4,LINEAR_MIPMAP_LINEAR:5};t["default"]={VTK_WRAP:r,VTK_FILTER:n}},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkTexture")}function a(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,s,r),u.obj(e,t),u.algo(e,t,1,0),u.setGet(e,t,["repeat","edgeClamp","interpolate"]),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=a;var i=r(3),u=n(i),s={repeat:!1,interpolate:!1,edgeClamp:!1},l=t.newInstance=u.newInstance(a);t["default"]={newInstance:l,extend:a}},function(e,t){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\nattribute vec4 vertexMC;\n\n// frag position in VC\n//VTK::PositionVC::Dec\n\n// optional normal declaration\n//VTK::Normal::Dec\n\n// extra lighting parameters\n//VTK::Light::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// material property values\n//VTK::Color::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// camera and actor matrix values\n//VTK::Camera::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\nvoid main()\n{\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Clip::Impl\n\n  //VTK::PrimID::Impl\n\n  //VTK::PositionVC::Impl\n\n  //VTK::Light::Impl\n}\n"},function(e,t){e.exports="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// Template for the polydata mappers fragment shader\n\nuniform int PrimitiveIDOffset;\n\n// VC position of this fragment\n//VTK::PositionVC::Dec\n\n// optional color passed in from the vertex shader, vertexColor\n//VTK::Color::Dec\n\n// optional surface normal declaration\n//VTK::Normal::Dec\n\n// extra lighting parameters\n//VTK::Light::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// picking support\n//VTK::Picking::Dec\n\n// Depth Peeling Support\n//VTK::DepthPeeling::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// the output of this shader\n//VTK::Output::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\n// handle coincident offsets\n//VTK::Coincident::Dec\n\nvoid main()\n{\n  // VC position of this fragment. This should not branch/return/discard.\n  //VTK::PositionVC::Impl\n\n  // Place any calls that require uniform flow (e.g. dFdx) here.\n  //VTK::UniformFlow::Impl\n\n  // Early depth peeling abort:\n  //VTK::DepthPeeling::PreColor\n\n  // Apple Bug\n  //VTK::PrimID::Impl\n\n  //VTK::Clip::Impl\n\n  //VTK::Color::Impl\n\n  // Generate the normal if we are not passed in one\n  //VTK::Normal::Impl\n\n  //VTK::Light::Impl\n\n  //VTK::TCoord::Impl\n\n  if (gl_FragData[0].a <= 0.0)\n    {\n    discard;\n    }\n\n  //VTK::DepthPeeling::Impl\n\n  //VTK::Picking::Impl\n\n  // handle coincident offsets\n  //VTK::Coincident::Impl\n}\n"},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e,t){t.classHierarchy.push("vtkOpenGLImageSlice"),e.build=function(r){if(t.renderable&&t.renderable.getVisibility()&&r){if(!t.renderable)return;e.prepareNodes(),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes()}},e.render=function(r){if(t.renderable&&t.renderable.getVisibility())if(r)t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),e.preRender();else{var n=0!==t.renderable.getIsOpaque();n||t.context.depthMask(!0)}},e.preRender=function(){var e=0!==t.renderable.getIsOpaque();e?t.context.depthMask(!0):t.context.depthMask(!1)},e.getKeyMatrices=function(){return t.renderable.getMTime()>t.keyMatrixTime.getMTime()&&(t.renderable.computeMatrix(),u.mat4.copy(t.MCWCMatrix,t.renderable.getMatrix()),u.mat4.transpose(t.MCWCMatrix,t.MCWCMatrix),t.renderable.getIsIdentity()?u.mat3.identity(t.normalMatrix):(u.mat3.fromMat4(t.normalMatrix,t.MCWCMatrix),u.mat3.invert(t.normalMatrix,t.normalMatrix)),t.keyMatrixTime.modified()),{mcwc:t.MCWCMatrix,normalMatrix:t.normalMatrix}}}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,f,r),d["default"].extend(e,t),t.keyMatrixTime={},l.obj(t.keyMatrixTime),t.normalMatrix=u.mat3.create(),t.MCWCMatrix=u.mat4.create(),l.setGet(e,t,["context"]),a(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=r(8),s=r(3),l=o(s),c=r(18),d=n(c),f={context:null,keyMatrixTime:null,normalMatrix:null,MCWCMatrix:null},g=t.newInstance=l.newInstance(i);t["default"]={newInstance:g,extend:i}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e,t){t.classHierarchy.push("vtkOpenGLPolyDataMapper"),e.build=function(e){e&&!t.renderable},e.render=function(r){if(r){t.openGLRenderWindow=e.getFirstAncestorOfType("vtkOpenGLRenderWindow"),t.context=t.openGLRenderWindow.getContext();for(var n=V.Start;n<V.End;n++)t.primitives[n].setContext(t.context);t.openGLActor=e.getFirstAncestorOfType("vtkOpenGLActor");var o=t.openGLActor.getRenderable(),a=e.getFirstAncestorOfType("vtkOpenGLRenderer"),i=a.getRenderable();t.openGLCamera=a.getViewNodeFor(i.getActiveCamera()),e.renderPiece(i,o)}},e.buildShaders=function(t,r,n){e.getShaderTemplate(t,r,n),e.replaceShaderValues(t,r,n)},e.getShaderTemplate=function(e,t,r){e.Vertex=A["default"],e.Fragment=P["default"],e.Geometry=""},e.replaceShaderColor=function(e,r,n){var o=e.Vertex,a=e.Geometry,i=e.Fragment,u=t.lastLightComplexity.get(t.lastBoundBO.getPrimitiveType()),s=["uniform float opacityUniform; // the fragment opacity","uniform vec3 ambientColorUniform; // intensity weighted color","uniform vec3 diffuseColorUniform; // intensity weighted color"];u&&(s=s.concat(["uniform vec3 specularColorUniform; // intensity weighted color","uniform float specularPowerUniform;"]));var l=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];u&&(l=l.concat(["  vec3 specularColor;","  float specularPower;"])),l=l.concat(["  ambientColor = ambientColorUniform;","  diffuseColor = diffuseColorUniform;","  opacity = opacityUniform;"]),u&&(l=l.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),0===t.lastBoundBO.getCABO().getColorComponents()||t.drawingEdges||(s=s.concat(["varying vec4 vertexColorVSOutput;"]),o=p["default"].substitute(o,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,o=p["default"].substitute(o,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,a=p["default"].substitute(a,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,a=p["default"].substitute(a,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result);var c=t.renderable.getScalarMaterialMode();i=0===t.lastBoundBO.getCABO().getColorComponents()||t.drawingEdges?t.renderable.getInterpolateScalarsBeforeMapping()&&t.renderable.getColorCoordinates()&&!t.drawingEdges?c===M.VTK_MATERIALMODE.AMBIENT||c===M.VTK_MATERIALMODE.DEFAULT&&n.getProperty().getAmbient()>n.getProperty().getDiffuse()?p["default"].substitute(i,"//VTK::Color::Impl",l.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  ambientColor = texColor.rgb;","  opacity = opacity*texColor.a;"])).result:c===M.VTK_MATERIALMODE.DIFFUSE||c===M.VTK_MATERIALMODE.DEFAULT&&n.getProperty().getAmbient()<=n.getProperty().getDiffuse()?p["default"].substitute(i,"//VTK::Color::Impl",l.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  opacity = opacity*texColor.a;"])).result:p["default"].substitute(i,"//VTK::Color::Impl",l.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  ambientColor = texColor.rgb;","  opacity = opacity*texColor.a;"])).result:p["default"].substitute(i,"//VTK::Color::Impl",l).result:c===M.VTK_MATERIALMODE.AMBIENT||c===M.VTK_MATERIALMODE.DEFAULT&&n.getProperty().getAmbient()>n.getProperty().getDiffuse()?p["default"].substitute(i,"//VTK::Color::Impl",l.concat(["  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result:c===M.VTK_MATERIALMODE.DIFFUSE||c===M.VTK_MATERIALMODE.DEFAULT&&n.getProperty().getAmbient()<=n.getProperty().getDiffuse()?p["default"].substitute(i,"//VTK::Color::Impl",l.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result:p["default"].substitute(i,"//VTK::Color::Impl",l.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result,i=p["default"].substitute(i,"//VTK::Color::Dec",s).result,e.Vertex=o,e.Geometry=a,e.Fragment=i},e.replaceShaderLight=function(e,r,n){var o=e.Fragment,a="",i=t.lastLightComplexity.get(t.lastBoundBO.getPrimitiveType());switch(i){case 0:o=p["default"].substitute(o,"//VTK::Light::Impl",["  gl_FragData[0] = vec4(ambientColor + diffuseColor, opacity);","  //VTK::Light::Impl"],!1).result;break;case 1:o=p["default"].substitute(o,"//VTK::Light::Impl",["  float df = max(0.0, normalVCVSOutput.z);","  float sf = pow(df, specularPower);","  vec3 diffuse = df * diffuseColor;","  vec3 specular = sf * specularColor;","  gl_FragData[0] = vec4(ambientColor + diffuse + specular, opacity);","  //VTK::Light::Impl"],!1).result;break;case 2:o=p["default"].substitute(o,"//VTK::Light::Dec",["uniform int numberOfLights;","uniform vec3 lightColor[6];","uniform vec3 lightDirectionVC[6]; // normalized","uniform vec3 lightHalfAngleVC[6]; // normalized"]).result,o=p["default"].substitute(o,"//VTK::Light::Impl",["vec3 diffuse = vec3(0,0,0);","  vec3 specular = vec3(0,0,0);","  for (int lightNum = 0; lightNum < numberOfLights; lightNum++)","    {","    float df = max(0.0, dot(normalVCVSOutput, -lightDirectionVC[lightNum]));","    diffuse += ((df"+a+") * lightColor[lightNum]);","    if (dot(normalVCVSOutput, lightDirectionVC[lightNum]) < 0.0)","      {","      float sf = pow( max(0.0, dot(lightHalfAngleVC[lightNum],normalVCVSOutput)), specularPower);","      specular += ((sf"+a+") * lightColor[lightNum]);","      }","    }","  diffuse = diffuse * diffuseColor;","  specular = specular * specularColor;","  gl_FragData[0] = vec4(ambientColor + diffuse + specular, opacity);","  //VTK::Light::Impl"],!1).result;break;case 3:o=p["default"].substitute(o,"//VTK::Light::Dec",["uniform int numberOfLights;","uniform vec3 lightColor[6];","uniform vec3 lightDirectionVC[6]; // normalized","uniform vec3 lightHalfAngleVC[6]; // normalized","uniform vec3 lightPositionVC[6];","uniform vec3 lightAttenuation[6];","uniform float lightConeAngle[6];","uniform float lightExponent[6];","uniform int lightPositional[6];"]).result,o=p["default"].substitute(o,"//VTK::Light::Impl",["  vec3 diffuse = vec3(0,0,0);","  vec3 specular = vec3(0,0,0);","  vec3 vertLightDirectionVC;","  for (int lightNum = 0; lightNum < numberOfLights; lightNum++)","    {","    float attenuation = 1.0;","    if (lightPositional[lightNum] == 0)","      {","      vertLightDirectionVC = lightDirectionVC[lightNum];","      }","    else","      {","      vertLightDirectionVC = vertexVC.xyz - lightPositionVC[lightNum];","      float distanceVC = length(vertLightDirectionVC);","      vertLightDirectionVC = normalize(vertLightDirectionVC);","      attenuation = 1.0 /","        (lightAttenuation[lightNum].x","         + lightAttenuation[lightNum].y * distanceVC","         + lightAttenuation[lightNum].z * distanceVC * distanceVC);","      // per OpenGL standard cone angle is 90 or less for a spot light","      if (lightConeAngle[lightNum] <= 90.0)","        {","        float coneDot = dot(vertLightDirectionVC, lightDirectionVC[lightNum]);","        // if inside the cone","        if (coneDot >= cos(radians(lightConeAngle[lightNum])))","          {","          attenuation = attenuation * pow(coneDot, lightExponent[lightNum]);","          }","        else","          {","          attenuation = 0.0;","          }","        }","      }","    float df = max(0.0, attenuation*dot(normalVCVSOutput, -vertLightDirectionVC));","    diffuse += ((df"+a+") * lightColor[lightNum]);","    if (dot(normalVCVSOutput, vertLightDirectionVC) < 0.0)","      {","      float sf = attenuation*pow( max(0.0, dot(lightHalfAngleVC[lightNum],normalVCVSOutput)), specularPower);","      specular += ((sf"+a+") * lightColor[lightNum]);","      }","    }","  diffuse = diffuse * diffuseColor;","  specular = specular * specularColor;","  gl_FragData[0] = vec4(ambientColor + diffuse + specular, opacity);","  //VTK::Light::Impl"],!1).result;break;default:console.error("bad light complexity")}e.Fragment=o},e.replaceShaderNormal=function(e,r,n){if(t.lastLightComplexity.get(t.lastBoundBO.getPrimitiveType())>0){var o=e.Vertex,a=e.Geometry,i=e.Fragment;t.lastBoundBO.getCABO().getNormalOffset()?(o=p["default"].substitute(o,"//VTK::Normal::Dec",["attribute vec3 normalMC;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,o=p["default"].substitute(o,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * normalMC;"]).result,a=p["default"].substitute(a,"//VTK::Normal::Dec",["in vec3 normalVCVSOutput[];","out vec3 normalVCGSOutput;"]).result,a=p["default"].substitute(a,"//VTK::Normal::Impl",["normalVCGSOutput = normalVCVSOutput[i];"]).result,i=p["default"].substitute(i,"//VTK::Normal::Dec",["varying vec3 normalVCVSOutput;"]).result,i=p["default"].substitute(i,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalVCVSOutput);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):t.haveCellNormals?(i=p["default"].substitute(i,"//VTK::Normal::Dec",["uniform mat3 normalMatrix;","uniform samplerBuffer textureN;"]).result,i=p["default"].substitute(i,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalMatrix *","    texelFetchBuffer(textureN, gl_PrimitiveID + PrimitiveIDOffset).xyz);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):n.getProperty().getRepresentation()===C.VTK_REPRESENTATION.WIREFRAME?(i=p["default"].substitute(i,"//VTK::UniformFlow::Impl",["  vec3 fdx = vec3(dFdx(vertexVC.x),dFdx(vertexVC.y),dFdx(vertexVC.z));","  vec3 fdy = vec3(dFdy(vertexVC.x),dFdy(vertexVC.y),dFdy(vertexVC.z));","  //VTK::UniformFlow::Impl"]).result,i=p["default"].substitute(i,"//VTK::Normal::Impl",["vec3 normalVCVSOutput;","  fdx = normalize(fdx);","  fdy = normalize(fdy);","  if (abs(fdx.x) > 0.0)","    { normalVCVSOutput = normalize(cross(vec3(fdx.y, -fdx.x, 0.0), fdx)); }","  else { normalVCVSOutput = normalize(cross(vec3(fdy.y, -fdy.x, 0.0), fdy));}"]).result):(i=p["default"].substitute(i,"//VTK::Normal::Dec",["uniform int cameraParallel;"]).result,i=p["default"].substitute(i,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,
i=p["default"].substitute(i,"//VTK::Normal::Impl",["  fdx = normalize(fdx);","  fdy = normalize(fdy);","  vec3 normalVCVSOutput = normalize(cross(fdx,fdy));","  if (cameraParallel == 1 && normalVCVSOutput.z < 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }","  if (cameraParallel == 0 && dot(normalVCVSOutput,vertexVC.xyz) > 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }"]).result),e.Vertex=o,e.Geometry=a,e.Fragment=i}},e.replaceShaderPositionVC=function(e,r,n){var o=e.Vertex,a=e.Geometry,i=e.Fragment;n.getProperty().getRepresentation()===C.VTK_REPRESENTATION.POINTS&&(o=p["default"].substitute(o,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl","  gl_PointSize = "+n.getProperty().getPointSize().toFixed(1)+";"],!1).result),t.lastLightComplexity.get(t.lastBoundBO.getPrimitiveType())>0?(o=p["default"].substitute(o,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,o=p["default"].substitute(o,"//VTK::PositionVC::Impl",["vertexVCVSOutput = MCVCMatrix * vertexMC;","  gl_Position = MCDCMatrix * vertexMC;"]).result,o=p["default"].substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCDCMatrix;","uniform mat4 MCVCMatrix;"]).result,a=p["default"].substitute(a,"//VTK::PositionVC::Dec",["in vec4 vertexVCVSOutput[];","out vec4 vertexVCGSOutput;"]).result,a=p["default"].substitute(a,"//VTK::PositionVC::Impl",["vertexVCGSOutput = vertexVCVSOutput[i];"]).result,i=p["default"].substitute(i,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,i=p["default"].substitute(i,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;"]).result):(o=p["default"].substitute(o,"//VTK::Camera::Dec",["uniform mat4 MCDCMatrix;"]).result,o=p["default"].substitute(o,"//VTK::PositionVC::Impl",["  gl_Position = MCDCMatrix * vertexMC;"]).result),e.Vertex=o,e.Geometry=a,e.Fragment=i},e.replaceShaderTCoord=function(e,r,n){if(t.lastBoundBO.getCABO().getTCoordOffset()){var o=e.Vertex,a=e.Geometry,i=e.Fragment;if(t.drawingEdges)return;o=p["default"].substitute(o,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result;var u=t.openGLActor.getActiveTextures(),s=2;switch(u.length>0&&(s=u[0].getComponents()),t.renderable.getColorTextureMap()&&(s=t.renderable.getColorTextureMap().getPointData().getScalars().getNumberOfComponents()),o=p["default"].substitute(o,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result,a=p["default"].substitute(a,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];","out vec2 tcoordVCGSOutput;"]).result,a=p["default"].substitute(a,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,i=p["default"].substitute(i,"//VTK::TCoord::Dec",["varying vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,s){case 1:i=p["default"].substitute(i,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*","  vec4(tcolor.r,tcolor.r,tcolor.r,1.0);"]).result;break;case 2:i=p["default"].substitute(i,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*","  vec4(tcolor.r,tcolor.r,tcolor.r,tcolor.g);"]).result;break;default:i=p["default"].substitute(i,"//VTK::TCoord::Impl","gl_FragData[0] = clamp(gl_FragData[0],0.0,1.0)*texture2D(texture1, tcoordVCVSOutput.st);").result}e.Vertex=o,e.Geometry=a,e.Fragment=i}},e.getCoincidentParameters=function(e,r){var n=null,o=r.getProperty();if(t.renderable.getResolveCoincidentTopology()||o.getEdgeVisibility()&&o.getRepresentation()===C.VTK_REPRESENTATION.SURFACE){var a=t.lastBoundBO.getPrimitiveType();a===V.Points||o.getRepresentation()===C.VTK_REPRESENTATION.POINTS?n=t.renderable.getCoincidentTopologyPointOffsetParameter():a===V.Lines||o.getRepresentation()===C.VTK_REPRESENTATION.WIREFRAME?n=t.renderable.getCoincidentTopologyLineOffsetParameters():a!==V.Tris&&a!==V.TriStrips||(n=t.renderable.getCoincidentTopologyPolygonOffsetParameters()),a!==V.TrisEdges&&a!==V.TriStripsEdges||(n=t.renderable.getCoincidentTopologyPolygonOffsetParameters(),n.factor/=2,n.units/=2)}return n},e.replaceShaderCoincidentOffset=function(t,r,n){var o=e.getCoincidentParameters(r,n);if(o&&(0!==o.factor||0!==o.offset)){var a=t.Fragment;a=p["default"].substitute(a,"//VTK::Coincident::Dec",["uniform float cfactor;","uniform float coffset;"]).result,0!==o.factor?(a=p["default"].substitute(a,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,a=p["default"].substitute(a,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):a=p["default"].substitute(a,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + 0.000016*coffset;").result,t.Fragment=a}},e.replaceShaderValues=function(t,r,n){e.replaceShaderColor(t,r,n),e.replaceShaderNormal(t,r,n),e.replaceShaderLight(t,r,n),e.replaceShaderTCoord(t,r,n),e.replaceShaderCoincidentOffset(t,r,n),e.replaceShaderPositionVC(t,r,n)},e.getNeedToRebuildShaders=function(r,n,o){var a=0,i=r.getPrimitiveType(),u=!0,s=t.currentInput,l=o.getProperty().getInterpolation()!==C.VTK_SHADING.FLAT?s.getPointData().getNormals():null;null===l&&s.getCellData().getNormals()&&(l=s.getCelData().getNormals());var c=null!==l;return o.getProperty().getRepresentation()!==C.VTK_REPRESENTATION.POINTS&&i!==V.Points||(u=c),o.getProperty().getLighting()&&u&&!function(){a=0;var e=0;n.getLights().forEach(function(t){var r=t.getSwitch();r>0&&(e++,0===a&&(a=1)),1===a&&(e>1||1!==t.getIntensity()||!t.lightTypeIsHeadLight())&&(a=2),a<3&&t.getPositional()&&(a=3)})}(),t.lastLightComplexity.get(i)!==a&&(t.lightComplexityChanged.get(i).modified(),t.lastLightComplexity.set(i,a)),0===r.getProgram()||r.getShaderSourceTime().getMTime()<e.getMTime()||r.getShaderSourceTime().getMTime()<o.getMTime()||r.getShaderSourceTime().getMTime()<t.currentInput.getMTime()||r.getShaderSourceTime().getMTime()<t.lightComplexityChanged.get(i).getMTime()},e.updateShaders=function(r,n,o){if(r.getVAO().bind(),t.lastBoundBO=r,e.getNeedToRebuildShaders(r,n,o)){var a={Vertex:null,Fragment:null,Geometry:null};e.buildShaders(a,n,o);var i=t.openGLRenderWindow.getShaderCache().readyShaderProgramArray(a.Vertex,a.Fragment,a.Geometry);i!==r.getProgram()&&(r.setProgram(i),r.getVAO().releaseGraphicsResources()),r.getShaderSourceTime().modified()}else t.openGLRenderWindow.getShaderCache().readyShaderProgram(r.getProgram());e.setMapperShaderParameters(r,n,o),e.setPropertyShaderParameters(r,n,o),e.setCameraShaderParameters(r,n,o),e.setLightingShaderParameters(r,n,o)},e.setMapperShaderParameters=function(e,r,n){e.getProgram().setUniformi("PrimitiveIDOffset",t.primitiveIDOffset),e.getCABO().getElementCount()&&(t.VBOBuildTime>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())&&(e.getCABO().bind(),e.getProgram().isAttributeUsed("vertexMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"vertexMC",e.getCABO().getVertexOffset(),e.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||console.error("Error setting vertexMC in shader VAO.")),e.getProgram().isAttributeUsed("normalMC")&&e.getCABO().getNormalOffset()&&t.lastLightComplexity.get(e.getPrimitiveType())>0&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"normalMC",e.getCABO().getNormalOffset(),e.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||console.error("Error setting normalMC in shader VAO.")),e.getProgram().isAttributeUsed("tcoordMC")&&e.getCABO().getTCoordOffset()&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"tcoordMC",e.getCABO().getTCoordOffset(),e.getCABO().getStride(),t.context.FLOAT,e.getCABO().getTCoordComponents(),t.context.FALSE)||console.error("Error setting tcoordMC in shader VAO.")),e.getProgram().isAttributeUsed("scalarColor")&&e.getCABO().getColorComponents()&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"scalarColor",e.getCABO().getColorOffset(),e.getCABO().getStride(),t.context.FLOAT,e.getCABO().getColorComponents(),!0)||console.error("Error setting scalarColor in shader VAO."))),t.internalColorTexture&&e.getProgram().isUniformUsed("texture1")&&e.getProgram().setUniformi("texture1",t.internalColorTexture.getTextureUnit());var o=t.openGLActor.getActiveTextures();o.forEach(function(t){var r=t.getTextureUnit(),n="texture"+(r+1);e.getProgram().isUniformUsed(n)&&e.getProgram().setUniformi(n,r)})},e.setLightingShaderParameters=function(e,r,n){if(!(t.lastLightComplexity.get(e.getPrimitiveType())<2)){var o=e.getProgram(),a=0,i=[],u=r.getLights();Object.keys(u).map(function(e){return u[e]}).forEach(function(e){var t=e.getSwitch();if(t>0){var r=e.getDiffuseColor(),n=e.getIntensity();i[a][0]=r[0]*n,i[a][1]=r[1]*n,i[a][2]=r[2]*n,a++}}),o.setUniform3fv("lightColor",a,i),o.setUniformi("numberOfLights",a),t.lastLightComplexity.get(e.getPrimitiveType())<3}},e.setCameraShaderParameters=function(e,r,n){var o=e.getProgram(),a=t.openGLCamera.getKeyMatrices(r),i=r.getActiveCamera();if(n.getIsIdentity())o.setUniformMatrix("MCDCMatrix",a.wcdc),o.isUniformUsed("MCVCMatrix")&&o.setUniformMatrix("MCVCMatrix",a.wcvc),o.isUniformUsed("normalMatrix")&&o.setUniformMatrix3x3("normalMatrix",a.normalMatrix);else{var s=t.openGLActor.getKeyMatrices();if(o.isUniformUsed("normalMatrix")){var l=u.mat3.create();u.mat3.multiply(l,a.normalMatrix,s.normalMatrix),o.setUniformMatrix3x3("normalMatrix",l)}var c=u.mat4.create();u.mat4.multiply(c,a.wcdc,s.mcwc),o.setUniformMatrix("MCDCMatrix",c),o.isUniformUsed("MCVCMatrix")&&(u.mat4.multiply(c,a.wcvc,s.mcwc),o.setUniformMatrix("MCVCMatrix",c))}o.isUniformUsed("cameraParallel")&&o.setUniformi("cameraParallel",i.getParallelProjection())},e.setPropertyShaderParameters=function(e,r,n){var o=e.getProgram(),a=n.getProperty(),i=a.getOpacity(),u=t.drawingEdges?a.getEdgeColor():a.getAmbientColor(),s=a.getAmbient(),l=[u[0]*s,u[1]*s,u[2]*s],c=t.drawingEdges?a.getEdgeColor():a.getDiffuseColor(),d=a.getDiffuse(),f=[c[0]*d,c[1]*d,c[2]*d];if(o.setUniformf("opacityUniform",i),o.setUniform3f("ambientColorUniform",l),o.setUniform3f("diffuseColorUniform",f),!(t.lastLightComplexity.get(e.getPrimitiveType())<1)){var g=a.getSpecularColor(),m=a.getSpecular(),p=[g[0]*m,g[1]*m,g[2]*m];o.setUniform3f("specularColorUniform",p);var v=a.getSpecularPower();o.setUniformf("specularPowerUniform",v)}},e.renderPieceStart=function(r,n){t.primitiveIDOffset=0,t.context.lineWidth(n.getProperty().getLineWidth()),e.updateBufferObjects(r,n),t.renderable.getColorTextureMap()&&t.internalColorTexture.activate(),t.lastBoundBO=null},e.renderPieceDraw=function(r,n){for(var o=n.getProperty().getRepresentation(),a=t.context,i=n.getProperty().getEdgeVisibility()&&o===C.VTK_REPRESENTATION.SURFACE,u=V.Start;u<V.End;u++){var s=t.primitives[u].getCABO();if(s.getElementCount()){t.drawingEdges=i&&(u===V.TrisEdges||u===V.TriStripsEdges),e.updateShaders(t.primitives[u],r,n);var l=e.getOpenGLMode(o,u);a.drawArrays(l,0,s.getElementCount());var c=l===a.POINTS?1:l===a.LINES?2:3;t.primitiveIDOffset+=s.getElementCount()/c}}},e.getOpenGLMode=function(e,r){return e===C.VTK_REPRESENTATION.POINTS||r===V.Points?t.context.POINTS:e===C.VTK_REPRESENTATION.WIREFRAME||r===V.Lines||r===V.TrisEdges||r===V.TriStripsEdges?t.context.LINES:t.context.TRIANGLES},e.renderPieceFinish=function(e,r){t.LastBoundBO&&t.LastBoundBO.getVAO().release(),t.renderable.getColorTextureMap()&&t.internalColorTexture.deactivate()},e.renderPiece=function(r,n){return e.invokeEvent({type:"StartEvent"}),t.currentInput=t.renderable.getInputData(),t.renderable.getStatic()||(t.renderable.update(),t.currentInput=t.renderable.getInputData()),e.invokeEvent({type:"EndEvent"}),null===t.currentInput?void console.error("No input!"):void(t.currentInput.getPoints&&t.currentInput.getPoints().getNumberOfValues()&&(e.renderPieceStart(r,n),e.renderPieceDraw(r,n),e.renderPieceFinish(r,n)))},e.computeBounds=function(r,n){return e.getInput()?void(t.bounnds=e.getInput().getBounds()):void g["default"].uninitializeBounds(t.Bounds)},e.updateBufferObjects=function(t,r){e.getNeedToRebuildBufferObjects(t,r)&&e.buildBufferObjects(t,r)},e.getNeedToRebuildBufferObjects=function(r,n){return t.VBOBuildTime.getMTime()<e.getMTime()||t.VBOBuildTime.getMTime()<t.renderable.getMTime()||t.VBOBuildTime.getMTime()<n.getMTime()||t.VBOBuildTime.getMTime()<n.getProperty().getMTime()||t.VBOBuildTime.getMTime()<t.currentInput.getMTime()},e.buildBufferObjects=function(e,r){var n=t.currentInput;if(null!==n){t.renderable.mapScalars(n,1);var o=t.renderable.getColorMapColors();t.haveCellScalars=!1;var a=t.renderable.getScalarMode();t.renderable.getScalarVisibility()&&(a!==M.VTK_SCALAR_MODE.USE_CELL_DATA&&a!==M.VTK_SCALAR_MODE.USE_CELL_FIELD_DATA&&a!==M.VTK_SCALAR_MODE.USE_FIELD_DATA&&n.getPointData().getScalars()||a===M.VTK_SCALAR_MODE.USE_POINT_FIELD_DATA||!o||(t.haveCellScalars=!0));var i=r.getProperty().getInterpolation()!==C.VTK_SHADING.FLAT?n.getPointData().getNormals():null;null===i&&n.getCellData().getNormals()&&(t.haveCellNormals=!0,i=n.getCelData().getNormals());var u=r.getProperty().getRepresentation(),s=n.getMTime()+"A"+u+"B"+n.getMTime()+("C"+(i?i.getMTime():1)+"D"+(t.colors?t.colors.getMTime():1))+("E"+r.getProperty().getEdgeVisibility()),l=n.getPointData().getTCoords();if(t.openGLActor.getActiveTextures().length||(l=null),t.renderable.getColorCoordinates()){l=t.renderable.getColorCoordinates(),t.internalColorTexture||(t.internalColorTexture=h["default"].newInstance());var c=t.internalColorTexture;c.setMinificationFilter(b.VTK_FILTER.NEAREST),c.setMagnificationFilter(b.VTK_FILTER.NEAREST),c.setWrapS(b.VTK_WRAP.CLAMP_TO_EDGE),c.setWrapT(b.VTK_WRAP.CLAMP_TO_EDGE),c.setWindow(t.openGLRenderWindow),c.setContext(t.openGLRenderWindow.getContext());var d=t.renderable.getColorTextureMap(),f=d.getExtent(),g=d.getPointData().getScalars();c.create2DFromRaw(f[1]-f[0]+1,f[3]-f[2]+1,g.getNumberOfComponents(),g.getDataType(),g.getData()),c.activate(),c.sendParameters(),c.deactivate()}if(t.VBOBuildString!==s){var m=n.getPoints(),p=0;p+=t.primitives[V.Points].getCABO().createVBO(n.getVerts(),"verts",u,{points:m,normals:i,tcoords:l,colors:o,cellOffset:p,haveCellScalars:t.haveCellScalars,haveCellNormals:t.haveCellNormals}),p+=t.primitives[V.Lines].getCABO().createVBO(n.getLines(),"lines",u,{points:m,normals:i,tcoords:l,colors:o,cellOffset:p,haveCellScalars:t.haveCellScalars,haveCellNormals:t.haveCellNormals}),p+=t.primitives[V.Tris].getCABO().createVBO(n.getPolys(),"polys",u,{points:m,normals:i,tcoords:l,colors:o,cellOffset:p,haveCellScalars:t.haveCellScalars,haveCellNormals:t.haveCellNormals}),p+=t.primitives[V.TriStrips].getCABO().createVBO(n.getStrips(),"strips",u,{points:m,normals:i,tcoords:l,colors:o,cellOffset:p,haveCellScalars:t.haveCellScalars,haveCellNormals:t.haveCellNormals}),r.getProperty().getEdgeVisibility()?(t.primitives[V.TrisEdges].getCABO().createVBO(n.getPolys(),"polys",C.VTK_REPRESENTATION.WIREFRAME,{points:m,normals:i,tcoords:null,colors:null,cellOffset:0,haveCellScalars:!1,haveCellNormals:!1}),t.primitives[V.TriStripsEdges].getCABO().createVBO(n.getStrips(),"strips",C.VTK_REPRESENTATION.WIREFRAME,{points:m,normals:i,tcoords:null,colors:null,cellOffset:0,haveCellScalars:!1,haveCellNormals:!1})):(t.primitives[V.TrisEdges].releaseGraphicsResources(t.openGLRenderWindow),t.primitives[V.TriStripsEdges].releaseGraphicsResources(t.openGLRenderWindow)),console.log("FIXME(Ken):",p),t.VBOBuildTime.modified(),t.VBOBuildString=s}}}}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,w,r),x["default"].extend(e,t),t.lightComplexityChanged=new Map,t.lastLightComplexity=new Map,t.primitives=[];for(var n=V.Start;n<V.End;n++)t.primitives[n]=d["default"].newInstance(),t.primitives[n].setPrimitiveType(n),t.lightComplexityChanged.set(n,{}),l.obj(t.lightComplexityChanged.get(n)),t.lastLightComplexity.set(n,0);l.setGet(e,t,["context"]),t.VBOBuildTime={},l.obj(t.VBOBuildTime),a(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.vtkOpenGLPolyDataMapper=a,t.extend=i;var u=r(8),s=r(3),l=o(s),c=r(22),d=n(c),f=r(31),g=n(f),m=r(28),p=n(m),v=r(34),h=n(v),T=r(18),x=n(T),C=r(27),M=r(41),b=r(35),y=r(37),A=n(y),O=r(38),P=n(O),V={Start:0,Points:0,Lines:1,Tris:2,TriStrips:3,TrisEdges:4,TriStripsEdges:5,End:6},w={context:null,VBOBuildTime:0,VBOBuildString:null,lightComplexityChanged:null,lastLightComplexity:null,primitives:null},S=t.newInstance=l.newInstance(i);t["default"]={newInstance:S,extend:i}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.VTK_COLOR_MODE={DEFAULT:0,MAP_SCALARS:1,DIRECT_SCALARS:2},n=t.VTK_SCALAR_MODE={DEFAULT:0,USE_POINT_DATA:1,USE_CELL_DATA:2,USE_POINT_FIELD_DATA:3,USE_CELL_FIELD_DATA:4,USE_FIELD_DATA:5},o=t.VTK_MATERIALMODE={DEFAULT:0,AMBIENT:1,DIFFUSE:2,AMBIENT_AND_DIFFUSE:3},a=t.VTK_GET_ARRAY={BY_ID:0,BY_NAME:1};t["default"]={VTK_COLOR_MODE:r,VTK_MATERIALMODE:o,VTK_GET_ARRAY:a,VTK_SCALAR_MODE:n}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e,t){t.classHierarchy.push("vtkOpenGLRenderer"),e.build=function(r){if(r){if(!t.renderable)return;t.renderable.isActiveCameraCreated()||t.renderable.resetCamera(),e.updateLights(),e.prepareNodes(),e.addMissingNode(t.renderable.getActiveCamera()),e.addMissingNodes(t.renderable.getActors()),e.addMissingNodes(t.renderable.getActors2D()),e.addMissingNodes(t.renderable.getVolumes()),e.removeUnusedNodes()}},e.updateLights=function(){var e=0;return t.renderable.getLights().forEach(function(t){t.getSwitch()>0&&e++}),e||(console.debug("No lights are on, creating one."),t.renderable.createLight()),e},e.render=function(r){r&&(t.context=e.getFirstAncestorOfType("vtkOpenGLRenderWindow").getContext(),e.clear())},e.getAspectRatio=function(){var e=t.parent.getSize(),r=t.renderable.getViewport();return e[0]*(r[2]-r[0])/((r[3]-r[1])*e[1])},e.getTiledSizeAndOrigin=function(){var e=t.renderable.getViewport(),r=[0,0,1,1],n=f["default"].clampValue(e[0]-r[0],0,1),o=f["default"].clampValue(e[1]-r[1],0,1),a=t.parent.normalizedDisplayToDisplay(n,o),i=Math.round(a[0]),u=Math.round(a[1]),s=f["default"].clampValue(e[2]-r[0],0,1),l=f["default"].clampValue(e[3]-r[1],0,1);s>r[2]-r[0]&&(s=r[2]-r[0]),l>r[3]-r[1]&&(l=r[3]-r[1]);var c=t.parent.normalizedDisplayToDisplay(s,l),d=Math.round(c[0])-i,g=Math.round(c[1])-u;return d<0&&(d=0),g<0&&(g=0),{usize:d,vsize:g,lowerLeftU:i,lowerLeftV:u}},e.clear=function(){var e=0,r=t.context;if(!t.renderable.getTransparent()){var n=t.renderable.getBackground();t.context.clearColor(n[0],n[1],n[2],1),e|=r.COLOR_BUFFER_BIT}t.renderable.getPreserveDepthBuffer()||(r.clearDepth(1),e|=r.DEPTH_BUFFER_BIT,r.depthMask(!0)),r.colorMask(!0,!0,!0,!0),r.clear(e),r.enable(r.DEPTH_TEST)}}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,g,r),c["default"].extend(e,t),s.get(e,t,["shaderCache"]),s.setGet(e,t,["context"]),a(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.vtkOpenGLRenderer=a,t.extend=i;var u=r(3),s=o(u),l=r(18),c=n(l),d=r(31),f=n(d),g={context:null},m=t.newInstance=s.newInstance(i);t["default"]={newInstance:m,extend:i}},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){t.classHierarchy.push("vtkShaderCache"),e.replaceShaderValues=function(e,r,n){t.context.getExtension("OES_standard_derivatives");var o=r;n.length>0&&(o=f["default"].substitute(o,"VSOut","GSOut").result);var a="#version 100\n",i=f["default"].substitute(e,"//VTK::System::Dec",a).result;o=f["default"].substitute(o,"//VTK::System::Dec",[a+"\n#extension GL_OES_standard_derivatives : enable\n","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif"]).result;var u=f["default"].substitute(n,"//VTK::System::Dec",a).result;return{VSSource:i,FSSource:o,GSSource:u}},e.readyShaderProgramArray=function(t,r,n){var o=e.replaceShaderValues(t,r,n),a=e.getShaderProgram(o.VSSource,o.FSSource,o.GSSource);return e.readyShaderProgram(a)},e.readyShaderProgram=function(t){return t&&(t.getCompiled()||t.compileShader())&&e.bindShader(t)?t:null},e.getShaderProgram=function(e,r,n){var o=""+e+r+n,a=(0,s["default"])(o),i=Object.keys(t.shaderPrograms).indexOf(a);if(i===-1){var u=f["default"].newInstance();return u.setContext(t.context),u.getVertexShader().setSource(e),u.getFragmentShader().setSource(r),n&&u.getGeometryShader().setSource(n),u.setMd5Hash(a),t.shaderPrograms[a]=u,u}return t.shaderPrograms[a]},e.releaseGraphicsResources=function(r){e.releaseCurrentShader(),Object.keys(t.shaderPrograms).map(function(e){return t.shaderPrograms[e]}).forEach(function(e){return e.releaseGraphicsResources(r)})},e.releaseGraphicsResources=function(){t.astShaderBound&&(t.lastShaderBound.release(),t.lastShaderBound=null)},e.bindShader=function(e){return t.lastShaderBound===e?1:(t.lastShaderBound&&t.lastShaderBound.release(),e.bind(),t.lastShaderBound=e,1)}}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.assign(t,m,r),t.shaderPrograms={},c.obj(e,t),c.setGet(e,t,g),a(e,t),Object.freeze(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=r(44),s=o(u),l=r(3),c=n(l),d=r(28),f=o(d),g=["lastShaderBound","context"],m={lastShaderBound:null,shaderPrograms:null,context:null},p=t.newInstance=c.newInstance(i);t["default"]={newInstance:p,extend:i}},function(e,t,r){var n;!function(o){"use strict";function a(e,t){var r=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(r>>16);return n<<16|65535&r}function i(e,t){return e<<t|e>>>32-t}function u(e,t,r,n,o,u){return a(i(a(a(t,e),a(n,u)),o),r)}function s(e,t,r,n,o,a,i){return u(t&r|~t&n,e,t,o,a,i)}function l(e,t,r,n,o,a,i){return u(t&n|r&~n,e,t,o,a,i)}function c(e,t,r,n,o,a,i){return u(t^r^n,e,t,o,a,i)}function d(e,t,r,n,o,a,i){return u(r^(t|~n),e,t,o,a,i)}function f(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;var r,n,o,i,u,f=1732584193,g=-271733879,m=-1732584194,p=271733878;for(r=0;r<e.length;r+=16)n=f,o=g,i=m,u=p,f=s(f,g,m,p,e[r],7,-680876936),p=s(p,f,g,m,e[r+1],12,-389564586),m=s(m,p,f,g,e[r+2],17,606105819),g=s(g,m,p,f,e[r+3],22,-1044525330),f=s(f,g,m,p,e[r+4],7,-176418897),p=s(p,f,g,m,e[r+5],12,1200080426),m=s(m,p,f,g,e[r+6],17,-1473231341),g=s(g,m,p,f,e[r+7],22,-45705983),f=s(f,g,m,p,e[r+8],7,1770035416),p=s(p,f,g,m,e[r+9],12,-1958414417),m=s(m,p,f,g,e[r+10],17,-42063),g=s(g,m,p,f,e[r+11],22,-1990404162),f=s(f,g,m,p,e[r+12],7,1804603682),p=s(p,f,g,m,e[r+13],12,-40341101),m=s(m,p,f,g,e[r+14],17,-1502002290),g=s(g,m,p,f,e[r+15],22,1236535329),f=l(f,g,m,p,e[r+1],5,-165796510),p=l(p,f,g,m,e[r+6],9,-1069501632),m=l(m,p,f,g,e[r+11],14,643717713),g=l(g,m,p,f,e[r],20,-373897302),f=l(f,g,m,p,e[r+5],5,-701558691),p=l(p,f,g,m,e[r+10],9,38016083),m=l(m,p,f,g,e[r+15],14,-660478335),g=l(g,m,p,f,e[r+4],20,-405537848),f=l(f,g,m,p,e[r+9],5,568446438),p=l(p,f,g,m,e[r+14],9,-1019803690),m=l(m,p,f,g,e[r+3],14,-187363961),g=l(g,m,p,f,e[r+8],20,1163531501),f=l(f,g,m,p,e[r+13],5,-1444681467),p=l(p,f,g,m,e[r+2],9,-51403784),m=l(m,p,f,g,e[r+7],14,1735328473),g=l(g,m,p,f,e[r+12],20,-1926607734),f=c(f,g,m,p,e[r+5],4,-378558),p=c(p,f,g,m,e[r+8],11,-2022574463),m=c(m,p,f,g,e[r+11],16,1839030562),g=c(g,m,p,f,e[r+14],23,-35309556),f=c(f,g,m,p,e[r+1],4,-1530992060),p=c(p,f,g,m,e[r+4],11,1272893353),m=c(m,p,f,g,e[r+7],16,-155497632),g=c(g,m,p,f,e[r+10],23,-1094730640),f=c(f,g,m,p,e[r+13],4,681279174),p=c(p,f,g,m,e[r],11,-358537222),m=c(m,p,f,g,e[r+3],16,-722521979),g=c(g,m,p,f,e[r+6],23,76029189),f=c(f,g,m,p,e[r+9],4,-640364487),p=c(p,f,g,m,e[r+12],11,-421815835),m=c(m,p,f,g,e[r+15],16,530742520),g=c(g,m,p,f,e[r+2],23,-995338651),f=d(f,g,m,p,e[r],6,-198630844),p=d(p,f,g,m,e[r+7],10,1126891415),m=d(m,p,f,g,e[r+14],15,-1416354905),g=d(g,m,p,f,e[r+5],21,-57434055),f=d(f,g,m,p,e[r+12],6,1700485571),p=d(p,f,g,m,e[r+3],10,-1894986606),m=d(m,p,f,g,e[r+10],15,-1051523),g=d(g,m,p,f,e[r+1],21,-2054922799),f=d(f,g,m,p,e[r+8],6,1873313359),p=d(p,f,g,m,e[r+15],10,-30611744),m=d(m,p,f,g,e[r+6],15,-1560198380),g=d(g,m,p,f,e[r+13],21,1309151649),f=d(f,g,m,p,e[r+4],6,-145523070),p=d(p,f,g,m,e[r+11],10,-1120210379),m=d(m,p,f,g,e[r+2],15,718787259),g=d(g,m,p,f,e[r+9],21,-343485551),f=a(f,n),g=a(g,o),m=a(m,i),p=a(p,u);return[f,g,m,p]}function g(e){var t,r="";for(t=0;t<32*e.length;t+=8)r+=String.fromCharCode(e[t>>5]>>>t%32&255);return r}function m(e){var t,r=[];for(r[(e.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;for(t=0;t<8*e.length;t+=8)r[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return r}function p(e){return g(f(m(e),8*e.length))}function v(e,t){var r,n,o=m(e),a=[],i=[];for(a[15]=i[15]=void 0,o.length>16&&(o=f(o,8*e.length)),r=0;r<16;r+=1)a[r]=909522486^o[r],i[r]=1549556828^o[r];return n=f(a.concat(m(t)),512+8*t.length),g(f(i.concat(n),640))}function h(e){var t,r,n="0123456789abcdef",o="";for(r=0;r<e.length;r+=1)t=e.charCodeAt(r),o+=n.charAt(t>>>4&15)+n.charAt(15&t);return o}function T(e){return unescape(encodeURIComponent(e))}function x(e){return p(T(e))}function C(e){return h(x(e))}function M(e,t){return v(T(e),T(t))}function b(e,t){return h(M(e,t))}function y(e,t,r){return t?r?M(t,e):b(t,e):r?x(e):C(e)}n=function(){return y}.call(t,r,t,e),!(void 0!==n&&(e.exports=n))}(this)},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkOpenGLTextureUnitManager"),e.deleteTable=function(){t.textureUnits.length&&console.error("some texture units  were not properly released"),t.textureUnits=[],t.numberOfTextureUnits=0},e.setContext=function(r){t.context!==r&&(0!==t.context&&e.deleteTable(),t.context=r,t.context&&(t.numberOfTextureUnits=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS)),e.modified())},e.allocate=function(){for(var r=0;r<t.numberOfTextureUnits;r++)if(!e.isAllocated(r))return t.textureUnits[r]=!0,r;return-1},e.allocateUnit=function(r){return e.isAllocated(r)?-1:(t.textureUnits[r]=!0,r)},e.isAllocated=function(e){return!!t.textureUnits.filter(function(t){return t===e}).length},e.free=function(e){var r=t.textureUnits.filter(function(t){return t===e});t.textureUnits.length!==r.length&&(t.textureUnits=r)}}function a(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,s,r),u.obj(e,t),u.get(e,t,["numberOfTextureUnits"]),u.setGet(e,t,["context","keyMatrixTime"]),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=a;var i=r(3),u=n(i),s={context:null,numberOfTextureUnits:0,textureUnits:0},l=t.newInstance=u.newInstance(a);t["default"]={newInstance:l,extend:a}},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e,t){t.classHierarchy.push("vtkRenderWindow"),e.addRenderer=function(r){e.hasRenderer(r)||(r.setRenderWindow(e),t.renderers.push(r),e.modified())},e.removeRenderer=function(r){t.renderers=t.renderers.filter(function(e){return e!==r}),e.modified()},e.hasRenderer=function(e){return t.renderers.indexOf(e)!==-1},e.addView=function(r){e.hasView(r)||(r.setRenderable(e),t.views.push(r),e.modified())},e.removeView=function(r){t.views=t.views.filter(function(e){return e!==r}),e.modified()},e.hasView=function(e){return t.views.indexOf(e)!==-1},e.render=function(){t.views.forEach(function(e){return e.traverseAllPasses()})},e.captureImages=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png";return e.render(),t.views.map(function(e){return e.captureImage?e.captureImage(r):void 0}).filter(function(e){return!!e})}}function a(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,s,r),u.obj(e,t),u.setGet(e,t,["interactor","numberOfLayers","views"]),u.get(e,t,["neverRendered"]),u.getArray(e,t,["renderers"]),u.event(e,t,"completion"),o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=t.DEFAULT_VALUES=void 0,t.vtkRenderWindow=o,t.extend=a;var i=r(3),u=n(i),s=t.DEFAULT_VALUES={renderers:[],views:[],interactor:null,neverRendered:!0,numberOfLayers:1},l=t.newInstance=u.newInstance(a);t["default"]={newInstance:l,extend:a}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e){return function(){return console.log("vtkRenderer::"+e+" - NOT IMPLEMENTED")}}function i(e,t){t.classHierarchy.push("vtkRenderer"),e.updateCamera=function(){return t.activeCamera||(console.debug("No cameras are on, creating one."),e.getActiveCameraAndResetIfCreated()),t.activeCamera.render(e),!0},e.updateLightsGeometryToFollowCamera=function(){var r=e.getActiveCameraAndResetIfCreated(),n=r.getCameraLightTransformMatrix();t.lights.forEach(function(e){e.lightTypeIsSceneLight()||(e.lightTypeIsHeadLight()?(e.setPosition(r.getPosition()),e.setFocalPoint(r.getFocalPoint())):e.lightTypeIsCameraLight()?e.setTransformMatrix(n):console.error("light has unknown light type",e))})},e.updateLightGeometry=function(){return!t.lightFollowCamera||e.updateLightsGeometryToFollowCamera()},e.allocateTime=a("allocateTime"),e.updateGeometry=a("updateGeometry"),e.getVTKWindow=function(){return t.renderWindow},e.setLayer=function(r){console.debug(e.getClassName(),e,"setting Layer to ",r),t.layer!==r&&(t.layer=r,e.modified()),e.setPreserveColorBuffer(!!r)},e.setActiveCamera=function(r){return t.activeCamera!==r&&(t.activeCamera=r,e.modified(),e.invokeEvent({type:"ActiveCameraEvent",camera:r}),!0)},e.makeCamera=function(){var t=f["default"].newInstance();return e.invokeEvent({type:"CreateCameraEvent",camera:t}),t},e.getActiveCamera=function(){return t.activeCamera||(t.activeCamera=e.makeCamera()),t.activeCamera},e.getActiveCameraAndResetIfCreated=function(){return t.activeCamera||(e.getActiveCamera(),e.resetCamera()),t.activeCamera},e.addActor=e.addViewProp,e.addVolume=e.addViewProp,e.removeActor=function(r){t.actors=t.actors.filter(function(e){return e!==r}),e.removeViewProp(r)},e.removeVolume=function(r){t.volumes=t.volumes.filter(function(e){return e!==r}),e.removeViewProp(r)},e.addLight=function(r){t.lights=[].concat(t.lights,r),e.modified()},e.getActors=function(){return t.actors=[],t.props.forEach(function(e){t.actors=t.actors.concat(e.getActors())}),t.actors},e.getVolumes=function(){return t.volumes=[],t.props.forEach(function(e){t.volumes=t.volumes.concat(e.getVolumes())}),t.volumes},e.removeLight=function(r){t.lights=t.lights.filter(function(e){return e!==r}),e.modified()},e.removeAllLights=function(){t.lights=[]},e.addCuller=a("addCuller"),e.removeCuller=a("removeCuller"),e.setLightCollection=function(r){t.lights=r,e.modified()},e.makeLight=m["default"].newInstance,e.createLight=function(){t.automaticLightCreation&&(t.createdLight&&(e.removeLight(t.createdLight),t.createdLight["delete"](),t.createdLight=null),t.createdLight=e.makeLight(),e.addLight(t.createdLight),t.createdLight.setLightTypeToHeadLight(),t.createdLight.setPosition(e.getActiveCamera().getPosition()),t.createdLight.setFocalPoint(e.getActiveCamera().getFocalPoint()))},e.normalizedDisplayToWorld=function(t,r,n){var o=e.normalizedDisplayToView(t,r,n);return e.viewToWorld(o[0],o[1],o[2])},e.worldToNormalizedDisplay=function(t,r,n){var o=e.worldToView(t,r,n);return e.viewToNormalizedDisplay(o[0],o[1],o[2])},e.viewToWorld=function(e,r,n){if(null===t.activeCamera)return console.error("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];var o=t.activeCamera.getCompositeProjectionTransformMatrix(1,0,1);
s.mat4.invert(o,o),s.mat4.transpose(o,o);var a=s.vec3.fromValues(e,r,n);return s.vec3.transformMat4(a,a,o),[a[0],a[1],a[2]]},e.worldToView=function(e,r,n){if(null===t.activeCamera)return console.error("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];var o=t.activeCamera.getCompositeProjectionTransformMatrix(1,0,1);s.mat4.transpose(o,o);var a=s.vec3.fromValues(e,r,n);return s.vec3.transformMat4(a,a,o),[a[0],a[1],a[2]]},e.computeVisiblePropBounds=function(){var r=[].concat(x.INIT_BOUNDS),n=!0;return e.invokeEvent({type:"ComputeVisiblePropBoundsEvent",renderer:e}),t.props.filter(function(e){return e.getVisibility()&&e.getUseBounds()}).forEach(function(e){var t=e.getBounds();t&&v["default"].areBoundsInitialized(t)&&(n=!1,t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1]),t[2]<r[2]&&(r[2]=t[2]),t[3]>r[3]&&(r[3]=t[3]),t[4]<r[4]&&(r[4]=t[4]),t[5]>r[5]&&(r[5]=t[5]))}),n&&(v["default"].uninitializeBounds(r),console.debug("Can't compute bounds, no 3D props are visible")),r},e.resetCamera=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=r||e.computeVisiblePropBounds(),o=[0,0,0];if(!v["default"].areBoundsInitialized(n))return console.debug("Cannot reset camera!"),!1;var a=null;if(!e.getActiveCamera())return console.error("Trying to reset non-existant camera"),!1;a=t.activeCamera.getViewPlaneNormal(),t.activeCamera.setViewAngle(30),o[0]=(n[0]+n[1])/2,o[1]=(n[2]+n[3])/2,o[2]=(n[4]+n[5])/2;var i=n[1]-n[0],u=n[3]-n[2],s=n[5]-n[4];i*=i,u*=u,s*=s;var l=i+u+s;l=0===l?1:l,l=.5*Math.sqrt(l);var c=v["default"].radiansFromDegrees(t.activeCamera.getViewAngle()),d=l,f=l/Math.sin(.5*c),g=t.activeCamera.getViewUp();return Math.abs(v["default"].dot(g,a))>.999&&(console.warn("Resetting view-up since view plane normal is parallel"),t.activeCamera.setViewUp(-g[2],g[0],g[1])),t.activeCamera.setFocalPoint(o[0],o[1],o[2]),t.activeCamera.setPosition(o[0]+f*a[0],o[1]+f*a[1],o[2]+f*a[2]),e.resetCameraClippingRange(n),t.activeCamera.setParallelScale(d),e.invokeEvent({type:"ResetCameraEvent",renderer:e}),!0},e.resetCameraClippingRange=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=r||e.computeVisiblePropBounds();if(!v["default"].areBoundsInitialized(n))return console.debug("Cannot reset camera clipping range!"),!1;if(e.getActiveCameraAndResetIfCreated(),!t.activeCamera)return console.error("Trying to reset clipping range of non-existant camera"),!1;var o=null,a=null;o=t.activeCamera.getViewPlaneNormal(),a=t.activeCamera.getPosition();for(var i=-o[0],u=-o[1],s=-o[2],l=-(i*a[0]+u*a[1]+s*a[2]),c=[i*n[0]+u*n[2]+s*n[4]+l,1e-18],d=0;d<2;d++)for(var f=0;f<2;f++)for(var g=0;g<2;g++){var m=i*n[g]+u*n[2+f]+s*n[4+d]+l;c[0]=m<c[0]?m:c[0],c[1]=m>c[1]?m:c[1]}var p=0;if(t.activeCamera.getParallelProjection())p=.1*t.activeCamera.getParallelScale();else{var h=v["default"].radiansFromDegrees(t.activeCamera.getViewAngle());p=.2*Math.tan(h/2)*c[1]}return c[1]-c[0]<p&&(p=p-c[1]+c[0],c[1]+=p/2,c[0]-=p/2),c[0]<0&&(c[0]=0),c[0]=.99*c[0]-(c[1]-c[0])*t.clippingRangeExpansion,c[1]=1.01*c[1]+(c[1]-c[0])*t.clippingRangeExpansion,c[0]=c[0]>=c[1]?.01*c[1]:c[0],t.nearClippingPlaneTolerance||(t.nearClippingPlaneTolerance=.01),c[0]<t.nearClippingPlaneTolerance*c[1]&&(c[0]=t.nearClippingPlaneTolerance*c[1]),t.activeCamera.setClippingRange(c[0],c[1]),e.invokeEvent({type:"ResetCameraClippingRangeEvent",renderer:e}),!1},e.setRenderWindow=function(e){e!==t.renderWindow&&(t.vtkWindow=e,t.renderWindow=e)},e.visibleActorCount=function(){return t.props.filter(function(e){return e.getVisibility()}).length},e.visibleVolumeCount=e.visibleActorCount,e.getMTime=function(){return Math.max(t.mtime,t.activeCamera?t.activeCamera.getMTime():0,t.createdLight?t.createdLight.getMTime():0)},e.pickProp=a("pickProp"),e.pickRender=a("PickRender"),e.pickGeometry=a("PickGeometry"),e.getTransparent=function(){return!!t.preserveColorBuffer},e.getTiledAspectRatio=a("GetTiledAspectRatio"),e.isActiveCameraCreated=function(){return!!t.activeCamera}}function u(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,C,r),T["default"].extend(e,t,r),c.get(e,t,["renderWindow","allocatedRenderTime","timeFactor","lastRenderTimeInSeconds","numberOfPropsRendered","lastRenderingUsedDepthPeeling","selector"]),c.setGet(e,t,["twoSidedLighting","lightFollowCamera","automaticLightCreation","erase","draw","nearClippingPlaneTolerance","clippingRangeExpansion","backingStore","interactive","layer","preserveColorBuffer","preserveDepthBuffer","useDepthPeeling","occlusionRatio","maximumNumberOfPeels","delegate","backgroundTexture","texturedBackground","useShadows","pass"]),c.getArray(e,t,["actors","volumes","lights"]),c.setGetArray(e,t,["background"],3),i(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=u;var s=r(8),l=r(3),c=o(l),d=r(48),f=n(d),g=r(49),m=n(g),p=r(31),v=n(p),h=r(50),T=n(h),x=r(51),C={pickedProp:null,activeCamera:null,ambient:[1,1,1],allocatedRenderTime:100,timeFactor:1,createdLight:null,automaticLightCreation:!0,twoSidedLighting:!0,lastRenderTimeInSeconds:-1,renderWindow:null,lights:[],actors:[],volumes:[],lightFollowCamera:!0,numberOfPropsRendered:0,propArray:null,pathArray:null,layer:1,preserveColorBuffer:!1,preserveDepthBuffer:!1,computeVisiblePropBounds:v["default"].createUninitializedBouds(),interactive:!0,nearClippingPlaneTolerance:0,clippingRangeExpansion:.05,erase:!0,draw:!0,useShadows:!1,useDepthPeeling:!1,occlusionRatio:0,maximumNumberOfPeels:4,selector:null,delegate:null,texturedBackground:!1,backgroundTexture:null,pass:0},M=t.newInstance=c.newInstance(u);t["default"]={newInstance:M,extend:u}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e,t){t.classHierarchy.push("vtkCamera");var r=u.mat4.create(),n=u.mat4.create();e.orthogonalizeViewUp=function(){var r=e.getViewTransformMatrix();t.viewUp[0]=r[4],t.viewUp[1]=r[5],t.viewUp[2]=r[6],e.modified()},e.setPosition=function(r,n,o){r===t.position[0]&&n===t.position[1]&&o===t.position[2]||(t.position[0]=r,t.position[1]=n,t.position[2]=o,e.computeDistance(),e.modified())},e.setFocalPoint=function(r,n,o){r===t.focalPoint[0]&&n===t.focalPoint[1]&&o===t.focalPoint[2]||(t.focalPoint[0]=r,t.focalPoint[1]=n,t.focalPoint[2]=o,e.computeDistance(),e.modified())},e.setDistance=function(e){},e.getDistance=function(){},e.computeDistance=function(){var r=t.focalPoint[0]-t.position[0],n=t.focalPoint[1]-t.position[1],o=t.focalPoint[2]-t.position[2];if(t.distance=Math.sqrt(r*r+n*n+o*o),t.distance<1e-20){t.distance=1e-20,console.debug("Distance is set to minimum.");var a=t.DirectionOfProjection;t.focalPoint[0]=t.position[0]+a[0]*t.distance,t.focalPoint[1]=t.position[1]+a[1]*t.distance,t.focalPoint[2]=t.position[2]+a[2]*t.distance}t.directionOfProjection[0]=r/t.distance,t.directionOfProjection[1]=n/t.distance,t.directionOfProjection[2]=o/t.distance,e.computeViewPlaneNormal()},e.computeViewPlaneNormal=function(){t.viewPlaneNormal[0]=-t.directionOfProjection[0],t.viewPlaneNormal[1]=-t.directionOfProjection[1],t.viewPlaneNormal[2]=-t.directionOfProjection[2]},e.dolly=function(r){if(!(r<=0)){var n=t.distance/r;e.setPosition(t.focalPoint[0]-n*t.directionOfProjection[0],t.focalPoint[1]-n*t.directionOfProjection[1],t.focalPoint[2]-n*t.directionOfProjection[2])}},e.setRoll=function(e){},e.getRoll=function(){},e.roll=function(r){var n=t.position,o=t.focalPoint,a=t.viewUp,i=u.vec4.fromValues(a[0],a[1],a[2],0),s=u.mat4.create(),l=u.vec3.fromValues(o[0]-n[0],o[1]-n[1],o[2]-n[2]);u.mat4.rotate(s,s,d["default"].radiansFromDegrees(r),l),u.vec4.transformMat4(i,i,s),t.viewUp[0]=i[0],t.viewUp[1]=i[1],t.viewUp[2]=i[2],e.modified()},e.azimuth=function(r){var n=u.vec3.create(),o=t.focalPoint,a=u.mat4.create();u.mat4.identity(a),u.mat4.translate(a,a,u.vec3.fromValues(o[0],o[1],o[2])),u.mat4.rotate(a,a,d["default"].radiansFromDegrees(r),u.vec3.fromValues(t.viewUp[0],t.viewUp[1],t.viewUp[2])),u.mat4.translate(a,a,u.vec3.fromValues(-o[0],-o[1],-o[2])),u.vec3.transformMat4(n,u.vec3.fromValues(t.position[0],t.position[1],t.position[2]),a),e.setPosition(n[0],n[1],n[2])},e.yaw=function(e){},e.elevation=function(r){var n=u.vec3.create(),o=t.focalPoint,a=e.getViewTransformMatrix(),i=[-a[0],-a[1],-a[2]],s=u.mat4.create();u.mat4.identity(s),u.mat4.translate(s,s,u.vec3.fromValues(o[0],o[1],o[2])),u.mat4.rotate(s,s,d["default"].radiansFromDegrees(r),u.vec3.fromValues(i[0],i[1],i[2])),u.mat4.translate(s,s,u.vec3.fromValues(-o[0],-o[1],-o[2])),u.vec3.transformMat4(n,u.vec3.fromValues(t.position[0],t.position[1],t.position[2]),s),e.setPosition(n[0],n[1],n[2])},e.pitch=function(e){},e.zoom=function(r){r<=0||(t.parallelProjection?t.parallelScale/=r:t.viewAngle/=r,e.modified())},e.setThickness=function(e){},e.setWindowCenter=function(e,t){},e.setObliqueAngles=function(e,t){},e.applyTransform=function(e){},e.getViewTransformMatrix=function(){var e=t.position,n=t.focalPoint,o=t.viewUp,a=u.mat4.lookAt(r,u.vec3.fromValues(e[0],e[1],e[2]),u.vec3.fromValues(n[0],n[1],n[2]),u.vec3.fromValues(o[0],o[1],o[2]));return u.mat4.transpose(a,a),a},e.getViewTransformObject=function(){},e.getProjectionTransformMatrix=function(e,r,o){u.mat4.identity(n);var a=t.clippingRange[1]-t.clippingRange[0],i=[t.clippingRange[0]+(r+1)*a/2,t.clippingRange[0]+(o+1)*a/2];if(t.parallelProjection){var s=t.parallelScale*e,l=t.parallelScale,c=(t.windowCenter[0]-1)*s,f=(t.windowCenter[0]+1)*s,g=(t.windowCenter[1]-1)*l,m=(t.windowCenter[1]+1)*l;u.mat4.ortho(n,c,f,g,m,r,o)}else{if(t.useOffAxisProjection)throw new Error("Off-Axis projection is not supported at this time");var p=t.viewAngle;t.useHorizontalViewAngle===!0&&(p=t.viewAngle/e),u.mat4.perspective(n,d["default"].radiansFromDegrees(p),e,i[0],i[1])}return u.mat4.transpose(n,n),n},e.getProjectionTransformObject=function(e,t,r){},e.getCompositeProjectionTransformMatrix=function(t,r,n){var o=e.getViewTransformMatrix(),a=e.getProjectionTransformMatrix(t,r,n);return u.mat4.multiply(a,o,a),a},e.setUserViewTransform=function(e){},e.setUserTransform=function(e){},e.render=function(e){},e.getViewingRaysMTime=function(){},e.viewingRaysModified=function(){},e.getFrustumPlanes=function(e){},e.getOrientation=function(){},e.getOrientationWXYZ=function(){},e.getCameraLightTransformMatrix=function(){},e.updateViewport=function(){},e.shallowCopy=function(e){},e.deepCopy=function(e){},e.setScissorRect=function(e){},e.getScissorRect=function(){}}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,f,r),l.obj(e,t),l.get(e,t,["thickness","userViewTransform","userTransform"]),l.setGet(e,t,["parallelProjection","useHorizontalViewAngle","viewAngle","parallelScale","focalDisk","useOffAxisProjection","freezeFocalPoint","useScissor"]),l.getArray(e,t,["directionOfProjection","windowCenter","viewPlaneNormal","position","focalPoint"]),l.setGetArray(e,t,["clippingRange"],2),l.setGetArray(e,t,["viewUp","screenBottomLeft","screenBottomRight","screenTopRight"],3),a(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=t.DEFAULT_VALUES=void 0,t.extend=i;var u=r(8),s=r(3),l=o(s),c=r(31),d=n(c),f=t.DEFAULT_VALUES={position:[0,0,1],focalPoint:[0,0,0],viewUp:[0,1,0],directionOfProjection:[0,0,-1],parallelProjection:!1,useHorizontalViewAngle:!1,viewAngle:30,parallelScale:1,clippingRange:[.01,1000.01],thickness:1e3,windowCenter:[0,0],viewPlaneNormal:[0,0,1],focalDisk:1,useOffAxisProjection:!1,screenBottomLeft:[-.5,-.5,-.5],screenBottomRight:[.5,-.5,-.5],screenTopRight:[.5,.5,-.5],userViewTransform:null,userTransform:null,freezeFocalPoint:!1,useScissor:!1},g=t.newInstance=l.newInstance(i);t["default"]={newInstance:g,extend:i}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e,t){t.classHierarchy.push("vtkLight"),e.getTransformedPosition=function(){return t.transformMatrix?[]:[].concat(t.position)},e.getTransformedFocalPoint=function(){return t.transformMatrix?[]:[].concat(t.focalPoint)},e.setDirectionAngle=function(t,r){var n=c["default"].radiansFromDegrees(t),o=c["default"].radiansFromDegrees(r);e.setPosition(Math.cos(n)*Math.sin(o),Math.sin(n),Math.cos(n)*Math.cos(o)),e.setFocalPoint(0,0,0),e.setPositional(0)},e.setLightTypeToHeadLight=function(){e.setLightType("HeadLight")},e.setLightTypeToCameraLight=function(){e.setLightType("CameraLight")},e.setLightTypeToSceneLight=function(){e.setTransformMatrix(null),e.setLightType("SceneLight")},e.lightTypeIsHeadLight=function(){return"HeadLight"===t.lightType},e.lightTypeIsSceneLight=function(){return"SceneLight"===t.lightType},e.lightTypeIsCameraLight=function(){return"CameraLight"===t.lightType}}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,f,r),s.obj(e,t),s.setGet(e,t,["intensity","switch","positional","exponent","coneAngle","transformMatrix","lightType","shadowAttenuation"]),s.setGetArray(e,t,["ambientColor","diffuseColor","specularColor","position","focalPoint","attenuationValues"],3),a(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=t.LIGHT_TYPES=void 0,t.vtkLight=a,t.extend=i;var u=r(3),s=o(u),l=r(31),c=n(l),d=t.LIGHT_TYPES=["HeadLight","CameraLight","SceneLight"],f={"switch":!0,intensity:1,ambientColor:[0,0,0],diffuseColor:[1,1,1],specularColor:[1,1,1],position:[0,0,1],focalPoint:[0,0,0],positional:!1,exponent:1,coneAngle:30,attenuationValues:[1,0,0],transformMatrix:null,lightType:"SceneLight",shadowAttenuation:1},g=t.newInstance=s.newInstance(i);t["default"]={newInstance:g,extend:i,LIGHT_TYPES:d}},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e){return function(){return console.log("vtkViewport::"+e+" - NOT IMPLEMENTED")}}function a(e,t){t.classHierarchy.push("vtkViewport"),e.getViewProps=function(){return t.props},e.hasViewProp=function(e){return!!t.props.filter(function(t){return t===e}).length},e.addViewProp=function(r){r&&!e.hasViewProp(r)&&(t.props=t.props.concat(r))},e.removeViewProp=function(e){var r=t.props.filter(function(t){return t===e});t.props.length!==r.length&&(t.props=r)},e.removeAllViewProps=function(){t.props=[]},e.addActor2D=e.addViewProp,e.removeActor2D=function(t){e.removeViewProp(t)},e.getActors2D=function(){return t.actors2D=[],t.props.forEach(function(e){t.actors2D=t.actors2D.concat(e.getActors2D())}),t.actors2D},e.displayToView=function(){return console.error("call displayToView on your view instead")},e.viewToDisplay=function(){return console.error("callviewtodisplay on your view instead")},e.getSize=function(){return console.error("call getSize on your View instead")},e.normalizedDisplayToView=function(t,r,n){var o=e.normalizedDisplayToNormalizedViewport(t,r,n);return e.normalizedViewportToView(o[0],o[1],o[2])},e.normalizedDisplayToNormalizedViewport=function(e,r,n){var o=[t.viewport[2]-t.viewport[0],t.viewport[3]-t.viewport[1]];return[(e-t.viewport[0])/o[0],(r-t.viewport[1])/o[1],n]},e.normalizedViewportToView=function(e,t,r){return[2*e-1,2*t-1,2*r-1]},e.viewToNormalizedDisplay=function(t,r,n){var o=e.viewToNormalizedViewport(t,r,n);return e.normalizedViewportToNormalizedDisplay(o[0],o[1],o[2])},e.normalizedViewportToNormalizedDisplay=function(e,r,n){var o=[t.viewport[2]-t.viewport[0],t.viewport[3]-t.viewport[1]];return[(e-t.viewport[0])/o[0],(r-t.viewport[1])/o[1],n]},e.viewToNormalizedViewport=function(e,t,r){return[.5*(e+1),.5*(t+1),.5*(r+1)]},e.PickPropFrom=o("PickPropFrom")}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,l,r),s.obj(e,t),s.event(e,t,"event"),s.setGetArray(e,t,["viewport"],4),s.setGetArray(e,t,["background","background2"],3),a(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=void 0,t.extend=i;var u=r(3),s=n(u),l={vtkWindow:null,background:[0,0,0],background2:[.2,.2,.2],gradientBackground:!1,viewport:[0,0,1,1],aspect:[1,1],pixelAspect:[1,1],props:[],actors2D:[]},c=t.newInstance=s.newInstance(i);t["default"]={newInstance:c,extend:i}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function i(e){return e[0]<=e[1]&&e[2]<=e[3]&&e[4]<=e[5]}function u(e){return[.5*(e[0]+e[1]),.5*(e[2]+e[3]),.5*(e[4]+e[5])]}function s(e,t){return e[2*t+1]-e[2*t]}function l(e){return[s(e,0),s(e,1),s(e,2)]}function c(e){return e.slice(0,2)}function d(e){return e.slice(2,4)}function f(e){return e.slice(4,6)}function g(e){var t=l(e);return t[0]>t[1]?t[0]>t[2]?t[0]:t[2]:t[1]>t[2]?t[1]:t[2]}function m(e){if(i(e)){var t=l(e);return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}return null}function p(e,t){return e<=0&&t>=0||e>=0&&t<=0}function v(e,t){t.classHierarchy.push("vtkBoundingBox"),e.clone=function(){var e=[].concat(t.bounds);return P({bounds:e})},e.equals=function(e){var r=t.bounds,n=e.getBounds();return r[0]===n[0]&&r[1]===n[1]&&r[2]===n[2]&&r[3]===n[3]&&r[4]===n[4]&&r[5]===n[5]},e.setMinPoint=function(e,r,n){var o=T(t.bounds,6),a=o[0],i=o[1],u=o[2],s=o[3],l=o[4],c=o[5];return t.bounds=[e,e>i?e:i,r,r>s?r:s,n,n>c?n:c],a!==e||u!==r||l!==n},e.setMaxPoint=function(e,r,n){var o=T(t.bounds,6),a=o[0],i=o[1],u=o[2],s=o[3],l=o[4],c=o[5];return t.bounds=[e<a?e:a,e,r<u?r:u,r,n<l?n:l,n],i!==e||s!==r||c!==n},e.addPoint=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];t.bounds=t.bounds.map(function(e,t){if(t%2===0){var n=t/2;return e<r[n]?e:r[n]}var o=(t-1)/2;return e>r[o]?e:r[o]})},e.addBounds=function(e,r,n,o,a,i){var u=T(t.bounds,6),s=u[0],l=u[1],c=u[2],d=u[3],f=u[4],g=u[5];t.bounds=[Math.min(e,s),Math.max(r,l),Math.min(n,c),Math.max(o,d),Math.min(a,f),Math.max(i,g)]},e.addBox=function(t){e.addBounds.apply(e,a(t.getBounds()))},e.isValid=function(){return i(t.bounds)},e.intersect=function(r){if(!e.isValid()||!r.isValid())return!1;for(var n=[0,0,0,0,0,0],o=r.getBounds(),a=void 0,i=0;i<3;i++)if(a=!1,o[2*i]>=t.bounds[2*i]&&o[2*i]<=t.bounds[2*i+1]?(a=!0,n[2*i]=o[2*i]):t.bounds[2*i]>=o[2*i]&&t.bounds[2*i]<=o[2*i+1]&&(a=!0,n[2*i]=t.bounds[2*i]),o[2*i+1]>=t.bounds[2*i]&&o[2*i+1]<=t.bounds[2*i+1]?(a=!0,n[2*i+1]=r.MaxPnt[i]):t.bounds[2*i+1]>=r.MinPnt[2*i]&&t.bounds[2*i+1]<=r.MaxPnt[2*i+1]&&(a=!0,n[2*i+1]=t.bounds[2*i+1]),!a)return!1;return t.bounds=n,!0},e.intersects=function(r){if(!e.isValid()||!r.isValid())return!1;for(var n=r.getBounds(),o=0;o<3;o++)if(!(n[2*o]>=t.bounds[2*o]&&n[2*o]<=t.bounds[2*o+1]||t.bounds[2*o]>=n[2*o]&&t.bounds[2*o]<=n[2*o+1]||n[2*o+1]>=t.bounds[2*o]&&n[2*o+1]<=t.bounds[2*o+1]||t.bounds[2*o+1]>=r.MinPnt[2*o]&&t.bounds[2*o+1]<=r.MaxPnt[2*o+1]))return!1;return!0},e.intersectPlane=function(e,r){for(var n=[[0,1,2,3,4,5,6,7],[0,1,4,5,2,3,6,7],[0,2,4,6,1,3,5,7]],o=[0,0,0,0,0,0,0,0],a=0,i=0;i<2;i++)for(var u=2;u<4;u++)for(var s=4;s<6;s++){var l=[t.bounds[i],t.bounds[u],t.bounds[s]];o[a++]=b["default"].evaluate(r,e,l)}for(var c=2;c--&&!(p(o[n[c][0]],o[n[c][4]])&&p(o[n[c][1]],o[n[c][5]])&&p(o[n[c][2]],o[n[c][6]])&&p(o[n[c][3]],o[n[c][7]])););if(c<0)return!1;for(var d=Math.sign(r[c]),f=Math.abs((t.bounds[2*c+1]-t.bounds[2*c])*r[c]),g=d>0?1:0,m=0;m<4;m++)if(0!==f){var v=Math.abs(o[n[c][m]])/f;d>0&&v<g&&(g=v),d<0&&v>g&&(g=v)}var h=(1-g)*t.bounds[2*c]+g*t.bounds[2*c+1];return d>0?t.bounds[2*c]=h:t.bounds[2*c+1]=h,!0},e.containsPoint=function(e,r,n){return!(e<t.bounds[0]||e>t.bounds[1])&&(!(r<t.bounds[2]||r>t.bounds[3])&&!(n<t.bounds[4]||n>t.bounds[5]))},e.getMinPoint=function(){return[t.bounds[0],t.bounds[2],t.bounds[4]]},e.getMaxPoint=function(){return[t.bounds[1],t.bounds[3],t.bounds[5]]},e.getBound=function(e){return t.bound[e]},e.contains=function(t){return!!e.intersects(t)&&(!!e.containsPoint.apply(e,a(t.getMinPoint()))&&(!!e.containsPoint.apply(e,a(t.getMaxPoint()))||0))},e.getCenter=function(){return u(t.bounds)},e.getLength=function(e){return s(t.bounds,e)},e.getLengths=function(){return l(t.bounds)},e.getMaxLength=function(){return g(t.bounds)},e.getDiagonalLength=function(){return m(t.bounds)},e.reset=function(){return e.setBounds([].concat(y))},e.inflate=function(e){t.bounds=t.bounds.map(function(t,r){return r%2===0?t-e:t+e})},e.scale=function(r,n,o){if(e.isValid()){var a=[].concat(t.bounds);return r>=0?(a[0]*=r,a[1]*=r):(a[0]=r*t.bounds[1],a[1]=r*t.bounds[0]),n>=0?(a[2]*=n,a[3]*=n):(a[2]=n*t.bounds[3],a[3]=n*t.bounds[2]),o>=0?(a[4]*=o,a[5]*=o):(a[4]=o*t.bounds[5],a[5]=o*t.bounds[4]),t.bounds=a,!0}return!1}}function h(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,O,r),C.obj(e,t),C.setGet(e,t,["bounds"]),v(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=t.STATIC=t.INIT_BOUNDS=void 0;var T=function(){function e(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(s){o=!0,a=s}finally{try{!n&&u["return"]&&u["return"]()}finally{if(o)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.extend=h;var x=r(3),C=o(x),M=r(52),b=n(M),y=t.INIT_BOUNDS=[Number.MAX_VALUE,Number.MIN_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MAX_VALUE,Number.MIN_VALUE],A=t.STATIC={isValid:i,getCenter:u,getLength:s,getLengths:l,getMaxLength:g,getDiagonalLength:m,getXRange:c,getYRange:d,getZRange:f},O={type:"vtkBoundingBox",bounds:[].concat(y)},P=t.newInstance=C.newInstance(h,"vtkBoundingBox");t["default"]=Object.assign({newInstance:P,extend:h},A)},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function o(e,t,r){return e[0]*(r[0]-t[0])+e[1]*(r[1]-t[1])+e[2]*(r[2]-t[2])}function a(e,t){t.classHierarchy.push("vtkPlane")}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,c,r),s.obj(e,t),s.setGet(e,t,["bounds"]),a(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.newInstance=t.STATIC=void 0,t.extend=i;var u=r(3),s=n(u),l=t.STATIC={evaluate:o},c={type:"vtkPlane"},d=t.newInstance=s.newInstance(i,"vtkPlane");t["default"]=Object.assign({newInstance:d,extend:i},l)}]);